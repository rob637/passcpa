/**
 * CFP Diagnostic Quiz
 * 25-question assessment covering all 8 CFP domains to identify knowledge gaps.
 * Single exam format — covers the entire CFP exam.
 */
import type { DiagnosticQuiz } from '../../types/diagnostic';

export const CFP_AREA_NAMES: Record<string, string> = {
  'CFP-PCR': 'Professional Conduct & Regulation',
  'CFP-GEN': 'General Financial Planning Principles',
  'CFP-RISK': 'Risk Management & Insurance Planning',
  'CFP-INV': 'Investment Planning',
  'CFP-TAX': 'Tax Planning',
  'CFP-RET': 'Retirement Savings & Income Planning',
  'CFP-EST': 'Estate Planning',
  'CFP-PSY': 'Psychology of Financial Planning',
};

export const CFP_DIAGNOSTIC: DiagnosticQuiz = {
  courseId: 'cfp',
  section: 'CFP',
  title: 'CFP Diagnostic Assessment',
  description: 'Assess your readiness across all 8 CFP domains',
  timeLimit: 35,
  passingScore: 65,
  questions: [
    // Domain 1: Professional Conduct & Regulation — 3 questions
    {
      id: 'cfp-d01',
      question: 'A CFP professional\'s fiduciary duty requires them to:',
      options: ['Maximize revenue for their firm', 'Act in the client\'s best interest at all times when providing financial advice', 'Only recommend proprietary products', 'Follow the suitability standard'],
      correctAnswer: 1,
      blueprintArea: 'CFP-PCR',
      topic: 'Fiduciary Duty',
      difficulty: 'easy',
      explanation: 'CFP professionals must act in the client\'s best interest at all times when providing financial advice.',
    },
    {
      id: 'cfp-d02',
      question: 'The CFP Board\'s Code of Ethics requires all of the following EXCEPT:',
      options: ['Integrity', 'Objectivity', 'Guaranteed investment returns', 'Professionalism'],
      correctAnswer: 2,
      blueprintArea: 'CFP-PCR',
      topic: 'Code of Ethics',
      difficulty: 'easy',
      explanation: 'The Code requires integrity, objectivity, competence, fairness, confidentiality, professionalism, and diligence — never guarantees.',
    },
    {
      id: 'cfp-d03',
      question: 'A CFP professional discovers a client is engaged in illegal activity. The professional should:',
      options: ['Ignore it', 'Report it to law enforcement immediately', 'Consider the nature and severity and, if necessary, terminate the engagement', 'Help the client hide the activity'],
      correctAnswer: 2,
      blueprintArea: 'CFP-PCR',
      topic: 'Professional Responsibility',
      difficulty: 'medium',
      explanation: 'The planner must evaluate the situation, consult legal counsel if needed, and may need to terminate the engagement.',
    },

    // Domain 2: General Financial Planning Principles — 3 questions
    {
      id: 'cfp-d04',
      question: 'The financial planning process begins with:',
      options: ['Implementing recommendations', 'Establishing and defining the client-planner relationship', 'Analyzing client data', 'Monitoring the plan'],
      correctAnswer: 1,
      blueprintArea: 'CFP-GEN',
      topic: 'Financial Planning Process',
      difficulty: 'easy',
      explanation: 'Step 1: Establish and define the relationship, including scope and responsibilities.',
    },
    {
      id: 'cfp-d05',
      question: 'A client\'s personal financial statement includes:',
      options: ['Only income and expenses', 'A balance sheet (assets/liabilities) and cash flow statement', 'Only investment accounts', 'Tax returns only'],
      correctAnswer: 1,
      blueprintArea: 'CFP-GEN',
      topic: 'Personal Financial Statements',
      difficulty: 'easy',
      explanation: 'Personal financial statements include a balance sheet (net worth) and a cash flow statement (income/expenses).',
    },
    {
      id: 'cfp-d06',
      question: 'The time value of money concept implies that:',
      options: ['Money loses value over time due to inflation only', 'A dollar received today is worth more than a dollar received in the future', 'All investments earn the same return', 'Cash is always the best investment'],
      correctAnswer: 1,
      blueprintArea: 'CFP-GEN',
      topic: 'Time Value of Money',
      difficulty: 'easy',
      explanation: 'TVM: money available now is worth more due to its earning potential.',
    },

    // Domain 3: Risk Management & Insurance Planning — 3 questions
    {
      id: 'cfp-d07',
      question: 'Pure risk differs from speculative risk in that pure risk:',
      options: ['Always results in a gain', 'Only has the possibility of loss or no loss', 'Is more profitable', 'Cannot be insured'],
      correctAnswer: 1,
      blueprintArea: 'CFP-RISK',
      topic: 'Risk Concepts',
      difficulty: 'easy',
      explanation: 'Pure risk: only loss or no loss. Speculative risk: possibility of gain, loss, or no change.',
    },
    {
      id: 'cfp-d08',
      question: 'A 35-year-old married professional with two children needs MOST:',
      options: ['Whole life insurance', 'Term life insurance with coverage matching income replacement needs', 'Annuities', 'No life insurance'],
      correctAnswer: 1,
      blueprintArea: 'CFP-RISK',
      topic: 'Life Insurance',
      difficulty: 'medium',
      explanation: 'Term insurance provides the most affordable coverage during peak earning/dependent years.',
    },
    {
      id: 'cfp-d09',
      question: 'An umbrella liability policy provides:',
      options: ['Coverage for weather damage', 'Excess liability protection above underlying policies', 'Life insurance benefits', 'Health insurance continuation'],
      correctAnswer: 1,
      blueprintArea: 'CFP-RISK',
      topic: 'Liability Insurance',
      difficulty: 'easy',
      explanation: 'Umbrella policies provide excess liability coverage above homeowners and auto limits.',
    },

    // Domain 4: Investment Planning — 4 questions
    {
      id: 'cfp-d10',
      question: 'Beta measures:',
      options: ['Total risk of a security', 'Systematic (market) risk of a security relative to the market', 'Credit risk', 'Inflation risk'],
      correctAnswer: 1,
      blueprintArea: 'CFP-INV',
      topic: 'Risk Measurement',
      difficulty: 'easy',
      explanation: 'Beta measures systematic risk: sensitivity of a security to market movements. Beta = 1 means same as market.',
    },
    {
      id: 'cfp-d11',
      question: 'The Efficient Market Hypothesis (strong form) suggests that:',
      options: ['Technical analysis can produce superior returns', 'All information, including inside information, is already reflected in prices', 'Only fundamental analysis is useful', 'Markets are always wrong'],
      correctAnswer: 1,
      blueprintArea: 'CFP-INV',
      topic: 'Market Theory',
      difficulty: 'medium',
      explanation: 'Strong form EMH: all information — public and private — is fully reflected in prices.',
    },
    {
      id: 'cfp-d12',
      question: 'Dollar-cost averaging benefits investors by:',
      options: ['Guaranteeing profits', 'Reducing the average cost per share over time through regular fixed-amount investments', 'Eliminating all market risk', 'Increasing dividends'],
      correctAnswer: 1,
      blueprintArea: 'CFP-INV',
      topic: 'Investment Strategies',
      difficulty: 'easy',
      explanation: 'DCA: invest fixed amount regularly, buying more shares when prices fall, reducing average cost.',
    },
    {
      id: 'cfp-d13',
      question: 'Asset allocation is important because:',
      options: ['It eliminates investment risk', 'It is the primary determinant of portfolio returns over time', 'It guarantees positive returns', 'It only affects tax consequences'],
      correctAnswer: 1,
      blueprintArea: 'CFP-INV',
      topic: 'Asset Allocation',
      difficulty: 'easy',
      explanation: 'Research shows asset allocation explains the majority of portfolio return variation over time.',
    },

    // Domain 5: Tax Planning — 3 questions
    {
      id: 'cfp-d14',
      question: 'The difference between a tax deduction and a tax credit is:',
      options: ['They are the same thing', 'A deduction reduces taxable income; a credit reduces tax liability dollar for dollar', 'A credit reduces income; a deduction reduces tax', 'Neither affects taxes owed'],
      correctAnswer: 1,
      blueprintArea: 'CFP-TAX',
      topic: 'Tax Fundamentals',
      difficulty: 'easy',
      explanation: 'Deductions reduce taxable income (value depends on bracket); credits reduce tax liability directly.',
    },
    {
      id: 'cfp-d15',
      question: 'Long-term capital gains (assets held > 1 year) are taxed at:',
      options: ['Always the same rate as ordinary income', 'Preferential rates (0%, 15%, or 20%) depending on income', 'A flat 30% rate', 'They are not taxed'],
      correctAnswer: 1,
      blueprintArea: 'CFP-TAX',
      topic: 'Capital Gains',
      difficulty: 'easy',
      explanation: 'LTCG rates: 0%, 15%, or 20% based on taxable income, plus potential 3.8% NIIT.',
    },
    {
      id: 'cfp-d16',
      question: 'Tax-loss harvesting involves:',
      options: ['Selling winners to lock in gains', 'Selling investments at a loss to offset capital gains and reduce taxes', 'Avoiding all stock sales', 'Converting traditional IRAs to Roth'],
      correctAnswer: 1,
      blueprintArea: 'CFP-TAX',
      topic: 'Tax Strategies',
      difficulty: 'medium',
      explanation: 'Tax-loss harvesting: sell losing positions to offset gains, reducing current-year tax liability.',
    },

    // Domain 6: Retirement Savings & Income Planning — 4 questions
    {
      id: 'cfp-d17',
      question: 'A traditional 401(k) provides:',
      options: ['Tax-free contributions and withdrawals', 'Pre-tax contributions with tax-deferred growth; distributions taxed as ordinary income', 'After-tax contributions with tax-free growth', 'No tax benefits'],
      correctAnswer: 1,
      blueprintArea: 'CFP-RET',
      topic: '401(k) Plans',
      difficulty: 'easy',
      explanation: 'Traditional 401(k): pre-tax contributions reduce current income; growth is tax-deferred; distributions are ordinary income.',
    },
    {
      id: 'cfp-d18',
      question: 'Required Minimum Distributions (RMDs) from a traditional IRA must begin by:',
      options: ['Age 59½', 'Age 73 (under SECURE 2.0)', 'Age 65', 'There are no RMDs'],
      correctAnswer: 1,
      blueprintArea: 'CFP-RET',
      topic: 'RMDs',
      difficulty: 'easy',
      explanation: 'SECURE 2.0 Act raised the RMD age to 73 (and 75 starting in 2033).',
    },
    {
      id: 'cfp-d19',
      question: 'A Roth IRA conversion is beneficial when:',
      options: ['The client is in a high tax bracket today', 'The client expects to be in a higher tax bracket in retirement', 'The client needs immediate income', 'AMT does not apply'],
      correctAnswer: 1,
      blueprintArea: 'CFP-RET',
      topic: 'Roth Conversions',
      difficulty: 'medium',
      explanation: 'Roth conversion: pay tax now at current rates for tax-free growth/withdrawals; most beneficial if future rates are higher.',
    },
    {
      id: 'cfp-d20',
      question: 'Social Security benefits may be claimed as early as age:',
      options: ['59½', '62, with a permanent reduction in benefits', '65', '67'],
      correctAnswer: 1,
      blueprintArea: 'CFP-RET',
      topic: 'Social Security',
      difficulty: 'easy',
      explanation: 'Benefits begin as early as 62, but with a permanent reduction from the full retirement age benefit.',
    },

    // Domain 7: Estate Planning — 3 questions
    {
      id: 'cfp-d21',
      question: 'The federal estate tax exemption (2024) is approximately:',
      options: ['$1 million', '$5.49 million', '$13.61 million per individual', '$25 million'],
      correctAnswer: 2,
      blueprintArea: 'CFP-EST',
      topic: 'Estate Tax',
      difficulty: 'easy',
      explanation: 'The 2024 federal estate tax exemption is $13.61 million per individual ($27.22 million for married couples).',
    },
    {
      id: 'cfp-d22',
      question: 'A revocable living trust provides:',
      options: ['Asset protection from creditors', 'Probate avoidance and privacy, but NOT asset protection', 'Tax-free transfers', 'Guaranteed capital gains elimination'],
      correctAnswer: 1,
      blueprintArea: 'CFP-EST',
      topic: 'Trusts',
      difficulty: 'medium',
      explanation: 'Revocable trusts avoid probate and provide privacy but do not protect assets from creditors (assets still belong to grantor).',
    },
    {
      id: 'cfp-d23',
      question: 'The annual gift tax exclusion (2024) is:',
      options: ['$15,000', '$16,000', '$18,000 per donee', '$25,000'],
      correctAnswer: 2,
      blueprintArea: 'CFP-EST',
      topic: 'Gift Tax',
      difficulty: 'easy',
      explanation: 'The 2024 annual gift tax exclusion is $18,000 per donee per year.',
    },

    // Domain 8: Psychology of Financial Planning — 2 questions
    {
      id: 'cfp-d24',
      question: 'Loss aversion in behavioral finance means:',
      options: ['Investors love taking losses', 'The pain of losses is felt more strongly than the pleasure of equivalent gains', 'All investors are rational', 'Markets are always efficient'],
      correctAnswer: 1,
      blueprintArea: 'CFP-PSY',
      topic: 'Behavioral Finance',
      difficulty: 'easy',
      explanation: 'Loss aversion: losses are psychologically about twice as powerful as equivalent gains (Kahneman & Tversky).',
    },
    {
      id: 'cfp-d25',
      question: 'Active listening in client communication involves:',
      options: ['Talking more than the client', 'Understanding the client\'s concerns through attentive listening, reflection, and clarification', 'Quickly recommending products', 'Using technical jargon to demonstrate expertise'],
      correctAnswer: 1,
      blueprintArea: 'CFP-PSY',
      topic: 'Client Communication',
      difficulty: 'easy',
      explanation: 'Active listening: give full attention, reflect back understanding, ask clarifying questions, understand emotions.',
    },
  ],
};

export const CFP_DIAGNOSTIC_QUIZZES: Record<string, DiagnosticQuiz> = {
  CFP: CFP_DIAGNOSTIC,
};
