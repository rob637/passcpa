/**
 * CMA Diagnostic Quizzes
 * 25-question assessments for each CMA part to identify knowledge gaps.
 */
import type { DiagnosticQuiz } from '../../../types/diagnostic';

export const CMA_AREA_NAMES: Record<string, string> = {
  'CMA1-A': 'External Financial Reporting Decisions',
  'CMA1-B': 'Planning, Budgeting, and Forecasting',
  'CMA1-C': 'Performance Management',
  'CMA1-D': 'Cost Management',
  'CMA1-E': 'Internal Controls',
  'CMA1-F': 'Technology and Analytics',
  'CMA2-A': 'Financial Statement Analysis',
  'CMA2-B': 'Corporate Finance',
  'CMA2-C': 'Decision Analysis',
  'CMA2-D': 'Risk Management',
  'CMA2-E': 'Investment Decisions',
  'CMA2-F': 'Professional Ethics',
};

export const CMA1_DIAGNOSTIC: DiagnosticQuiz = {
  courseId: 'cma',
  section: 'CMA1',
  title: 'Part 1 Diagnostic Assessment',
  description: 'Assess your readiness for Financial Planning, Performance, and Analytics',
  timeLimit: 35,
  passingScore: 65,
  questions: [
    {
      id: 'cma1-d01',
      question: 'Under U.S. GAAP, inventory is reported at:',
      options: ['Historical cost only', 'Fair market value', 'Lower of cost or net realizable value', 'Replacement cost'],
      correctAnswer: 2,
      blueprintArea: 'CMA1-A',
      topic: 'Inventory Valuation',
      difficulty: 'easy',
      explanation: 'ASC 330 requires inventory at lower of cost or NRV under GAAP.',
    },
    {
      id: 'cma1-d02',
      question: 'Which financial statement reports an entity\'s financial position at a point in time?',
      options: ['Income statement', 'Balance sheet', 'Cash flow statement', 'Statement of comprehensive income'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-A',
      topic: 'Financial Statements',
      difficulty: 'easy',
      explanation: 'The balance sheet (statement of financial position) reports assets, liabilities, and equity at a point in time.',
    },
    {
      id: 'cma1-d03',
      question: 'Revenue is recognized under ASC 606 when:',
      options: ['Cash is collected', 'A contract is signed', 'Performance obligations are satisfied', 'An invoice is sent'],
      correctAnswer: 2,
      blueprintArea: 'CMA1-A',
      topic: 'Revenue Recognition',
      difficulty: 'medium',
      explanation: 'ASC 606: recognize revenue when (or as) the entity satisfies performance obligations.',
    },
    {
      id: 'cma1-d04',
      question: 'An operating lease right-of-use asset is amortized:',
      options: ['Using declining balance', 'On a straight-line basis', 'Using units of production', 'It is not amortized'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-A',
      topic: 'Leases',
      difficulty: 'medium',
      explanation: 'Under ASC 842, operating lease ROU assets are amortized straight-line over the lease term.',
    },
    {
      id: 'cma1-d05',
      question: 'A static budget is:',
      options: ['Adjusted for actual activity levels', 'Prepared for a single level of activity', 'Updated monthly', 'Based on prior year actuals only'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-B',
      topic: 'Budgeting Concepts',
      difficulty: 'easy',
      explanation: 'A static (fixed) budget is prepared for one expected level of activity and does not change.',
    },
    {
      id: 'cma1-d06',
      question: 'The sales budget is typically the starting point for the master budget because:',
      options: ['It is the easiest to prepare', 'Sales drive production, purchasing, and cash flow budgets', 'It is required by GAAP', 'Management always starts with revenue'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-B',
      topic: 'Master Budget',
      difficulty: 'easy',
      explanation: 'The sales forecast drives the entire budget process — production, purchasing, staffing, and cash.',
    },
    {
      id: 'cma1-d07',
      question: 'A flexible budget variance is computed by comparing:',
      options: ['Static budget to actual results', 'Flexible budget to actual results', 'Static budget to flexible budget', 'Prior year to current year'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-B',
      topic: 'Flexible Budgets',
      difficulty: 'medium',
      explanation: 'Flexible budget variance = Actual results − Flexible budget (at actual volume).',
    },
    {
      id: 'cma1-d08',
      question: 'Rolling forecasts differ from traditional budgets in that they:',
      options: ['Are prepared once per year', 'Continuously extend the forecast horizon', 'Only cover variable costs', 'Eliminate the need for budgets'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-B',
      topic: 'Forecasting',
      difficulty: 'medium',
      explanation: 'Rolling forecasts continuously add periods as old ones expire, maintaining a constant forward-looking horizon.',
    },
    {
      id: 'cma1-d09',
      question: 'Return on Investment (ROI) is calculated as:',
      options: ['Net income / Sales', 'Operating income / Average invested capital', 'Revenue / Total assets', 'Gross profit / Equity'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-C',
      topic: 'ROI',
      difficulty: 'easy',
      explanation: 'ROI = Operating income / Average invested capital (or total assets).',
    },
    {
      id: 'cma1-d10',
      question: 'Residual income is a better measure than ROI because:',
      options: ['It is simpler to calculate', 'It encourages managers to accept projects earning above the cost of capital even if ROI drops', 'It ignores the cost of capital', 'It always shows a positive number'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-C',
      topic: 'Residual Income',
      difficulty: 'medium',
      explanation: 'Residual income overcomes ROI\'s bias against accepting projects with returns above cost of capital but below current ROI.',
    },
    {
      id: 'cma1-d11',
      question: 'The balanced scorecard includes all of the following perspectives EXCEPT:',
      options: ['Financial', 'Customer', 'Internal business processes', 'Competitor analysis'],
      correctAnswer: 3,
      blueprintArea: 'CMA1-C',
      topic: 'Balanced Scorecard',
      difficulty: 'easy',
      explanation: 'BSC perspectives: Financial, Customer, Internal Business Processes, Learning & Growth.',
    },
    {
      id: 'cma1-d12',
      question: 'Transfer pricing using the market price method is most appropriate when:',
      options: ['No external market exists', 'A competitive external market exists', 'The divisions have excess capacity', 'Products are unique with no comparable'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-C',
      topic: 'Transfer Pricing',
      difficulty: 'medium',
      explanation: 'Market-based transfer prices work best when a well-established external market exists.',
    },
    {
      id: 'cma1-d13',
      question: 'Under absorption costing, fixed manufacturing overhead is:',
      options: ['Expensed as a period cost', 'Included in product cost', 'Excluded from inventory', 'Reported as a selling expense'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-D',
      topic: 'Absorption vs Variable Costing',
      difficulty: 'easy',
      explanation: 'Absorption costing includes all manufacturing costs (variable + fixed) in product cost.',
    },
    {
      id: 'cma1-d14',
      question: 'In activity-based costing (ABC), costs are assigned to products based on:',
      options: ['Direct labor hours only', 'Machine hours only', 'Activities that consume resources', 'Sales revenue'],
      correctAnswer: 2,
      blueprintArea: 'CMA1-D',
      topic: 'ABC Costing',
      difficulty: 'easy',
      explanation: 'ABC assigns costs using activities (cost drivers) that cause resource consumption.',
    },
    {
      id: 'cma1-d15',
      question: 'A favorable material price variance means:',
      options: ['More material was used than standard', 'Actual price was less than standard price', 'Actual quantity was less than standard', 'Fixed costs were lower than planned'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-D',
      topic: 'Variance Analysis',
      difficulty: 'medium',
      explanation: 'Favorable price variance: actual price < standard price for the materials purchased.',
    },
    {
      id: 'cma1-d16',
      question: 'Job-order costing is MOST appropriate for:',
      options: ['Mass production of identical units', 'Custom products or short production runs', 'Continuous process manufacturing', 'Service industries with identical services'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-D',
      topic: 'Cost Systems',
      difficulty: 'easy',
      explanation: 'Job-order costing tracks costs per individual job or batch — ideal for custom products.',
    },
    {
      id: 'cma1-d17',
      question: 'Segregation of duties is an example of which type of internal control?',
      options: ['Detective', 'Preventive', 'Corrective', 'Directive'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-E',
      topic: 'Internal Control Types',
      difficulty: 'easy',
      explanation: 'Segregation of duties prevents fraud by ensuring no single person controls all aspects of a transaction.',
    },
    {
      id: 'cma1-d18',
      question: 'The COSO internal control framework identifies how many components?',
      options: ['3', '4', '5', '6'],
      correctAnswer: 2,
      blueprintArea: 'CMA1-E',
      topic: 'COSO Framework',
      difficulty: 'easy',
      explanation: 'COSO: Control Environment, Risk Assessment, Control Activities, Information & Communication, Monitoring.',
    },
    {
      id: 'cma1-d19',
      question: 'A reconciliation of the bank statement to the general ledger is an example of a:',
      options: ['Preventive control', 'Detective control', 'Corrective control', 'Compensating control'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-E',
      topic: 'Control Activities',
      difficulty: 'easy',
      explanation: 'Bank reconciliations detect discrepancies after transactions have occurred.',
    },
    {
      id: 'cma1-d20',
      question: 'Enterprise Risk Management (ERM) differs from traditional risk management by:',
      options: ['Focusing only on financial risks', 'Taking a holistic view of all organizational risks', 'Eliminating all risks', 'Only covering insurable risks'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-E',
      topic: 'ERM',
      difficulty: 'medium',
      explanation: 'ERM takes a portfolio view of all risks across the enterprise, not just financial or insurable risks.',
    },
    {
      id: 'cma1-d21',
      question: 'Big data is characterized by the "4 Vs." Which is NOT one of them?',
      options: ['Volume', 'Velocity', 'Veracity', 'Visualization'],
      correctAnswer: 3,
      blueprintArea: 'CMA1-F',
      topic: 'Data Analytics',
      difficulty: 'easy',
      explanation: 'The 4 Vs of big data: Volume, Velocity, Variety, Veracity. Visualization is not one of them.',
    },
    {
      id: 'cma1-d22',
      question: 'Regression analysis is a technique used to:',
      options: ['Assign overhead costs', 'Predict the value of a dependent variable based on independent variables', 'Reconcile budgets', 'Establish internal controls'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-F',
      topic: 'Statistical Analysis',
      difficulty: 'medium',
      explanation: 'Regression analysis models the relationship between dependent and independent variables for prediction.',
    },
    {
      id: 'cma1-d23',
      question: 'Robotic Process Automation (RPA) is BEST suited for:',
      options: ['Complex judgment-based decisions', 'Repetitive, rule-based tasks', 'Strategic planning', 'Creative problem solving'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-F',
      topic: 'Technology',
      difficulty: 'easy',
      explanation: 'RPA automates repetitive, rule-based tasks like data entry, report generation, and reconciliations.',
    },
    {
      id: 'cma1-d24',
      question: 'The breakeven point in units is calculated as:',
      options: ['Sales / Variable cost per unit', 'Fixed costs / Contribution margin per unit', 'Total costs / Price per unit', 'Variable costs / Fixed costs'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-D',
      topic: 'CVP Analysis',
      difficulty: 'easy',
      explanation: 'Breakeven units = Total fixed costs / Contribution margin per unit.',
    },
    {
      id: 'cma1-d25',
      question: 'A dashboard that tracks KPIs in real-time is an example of:',
      options: ['Prescriptive analytics', 'Descriptive analytics', 'Predictive analytics', 'Diagnostic analytics'],
      correctAnswer: 1,
      blueprintArea: 'CMA1-F',
      topic: 'Business Intelligence',
      difficulty: 'easy',
      explanation: 'Dashboards with current KPIs are descriptive — they show what is happening now.',
    },
  ],
};

export const CMA2_DIAGNOSTIC: DiagnosticQuiz = {
  courseId: 'cma',
  section: 'CMA2',
  title: 'Part 2 Diagnostic Assessment',
  description: 'Assess your readiness for Strategic Financial Management',
  timeLimit: 35,
  passingScore: 65,
  questions: [
    {
      id: 'cma2-d01',
      question: 'The current ratio is calculated as:',
      options: ['Quick assets / Current liabilities', 'Current assets / Current liabilities', 'Total assets / Total liabilities', 'Net income / Current liabilities'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-A',
      topic: 'Liquidity Ratios',
      difficulty: 'easy',
      explanation: 'Current ratio = Current assets / Current liabilities.',
    },
    {
      id: 'cma2-d02',
      question: 'A company with a debt-to-equity ratio of 2.0 has:',
      options: ['Twice as much equity as debt', 'Twice as much debt as equity', 'Equal debt and equity', 'No debt'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-A',
      topic: 'Leverage Ratios',
      difficulty: 'easy',
      explanation: 'D/E of 2.0 means $2 of debt for every $1 of equity.',
    },
    {
      id: 'cma2-d03',
      question: 'DuPont analysis decomposes ROE into:',
      options: ['Profit margin × Asset turnover × Equity multiplier', 'Net income / Equity', 'EBITDA / Total assets', 'Operating income / Sales'],
      correctAnswer: 0,
      blueprintArea: 'CMA2-A',
      topic: 'DuPont Analysis',
      difficulty: 'medium',
      explanation: 'DuPont ROE = Profit margin × Asset turnover × Financial leverage (equity multiplier).',
    },
    {
      id: 'cma2-d04',
      question: 'Free cash flow is calculated as:',
      options: ['Net income − Dividends', 'Operating cash flow − Capital expenditures', 'Revenue − Total expenses', 'EBITDA − Taxes'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-A',
      topic: 'Cash Flow Analysis',
      difficulty: 'medium',
      explanation: 'FCF = Operating cash flow − Capital expenditures.',
    },
    {
      id: 'cma2-d05',
      question: 'The weighted average cost of capital (WACC) represents:',
      options: ['The cost of equity only', 'The minimum return required to satisfy all capital providers', 'The interest rate on debt', 'The dividend yield on stock'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-B',
      topic: 'Cost of Capital',
      difficulty: 'medium',
      explanation: 'WACC is the blended required return for all capital sources (debt + equity), weighted by their proportions.',
    },
    {
      id: 'cma2-d06',
      question: 'In the CAPM, the expected return on a stock is determined by:',
      options: ['Risk-free rate + Beta × Market risk premium', 'Dividend / Price', 'EPS / Price', 'Book value / Market value'],
      correctAnswer: 0,
      blueprintArea: 'CMA2-B',
      topic: 'CAPM',
      difficulty: 'medium',
      explanation: 'CAPM: E(R) = Rf + β(Rm − Rf), where (Rm − Rf) is the market risk premium.',
    },
    {
      id: 'cma2-d07',
      question: 'Financial leverage increases when a company:',
      options: ['Issues more equity', 'Reduces its debt', 'Uses more debt relative to equity', 'Distributes dividends'],
      correctAnswer: 2,
      blueprintArea: 'CMA2-B',
      topic: 'Capital Structure',
      difficulty: 'easy',
      explanation: 'Financial leverage increases with higher debt-to-equity ratios.',
    },
    {
      id: 'cma2-d08',
      question: 'Working capital management aims to:',
      options: ['Maximize long-term debt', 'Optimize current assets and liabilities for liquidity and profitability', 'Reduce all current assets to zero', 'Eliminate accounts payable'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-B',
      topic: 'Working Capital',
      difficulty: 'easy',
      explanation: 'Working capital management balances liquidity needs against profitability by managing current assets and liabilities.',
    },
    {
      id: 'cma2-d09',
      question: 'In a relevant cost analysis, sunk costs are:',
      options: ['Always relevant', 'Never relevant', 'Relevant only for long-term decisions', 'Relevant only if they are large'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-C',
      topic: 'Relevant Costs',
      difficulty: 'easy',
      explanation: 'Sunk costs are past expenditures that cannot be changed — never relevant to future decisions.',
    },
    {
      id: 'cma2-d10',
      question: 'A make-or-buy decision should consider:',
      options: ['Only the purchase price from the supplier', 'Avoidable costs of making vs. purchase price', 'Total overhead allocated to the product', 'Historical costs of production'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-C',
      topic: 'Make or Buy',
      difficulty: 'medium',
      explanation: 'Compare avoidable (incremental) costs of making with the purchase price, plus qualitative factors.',
    },
    {
      id: 'cma2-d11',
      question: 'Contribution margin pricing sets price above:',
      options: ['Total cost per unit', 'Variable cost per unit', 'Fixed cost per unit', 'Breakeven price'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-C',
      topic: 'Pricing Decisions',
      difficulty: 'medium',
      explanation: 'Contribution margin pricing: price must at least cover variable costs; any excess contributes to fixed costs.',
    },
    {
      id: 'cma2-d12',
      question: 'Marginal analysis considers the impact of:',
      options: ['Average costs', 'Total costs', 'One additional unit', 'Historical cost trends'],
      correctAnswer: 2,
      blueprintArea: 'CMA2-C',
      topic: 'Marginal Analysis',
      difficulty: 'easy',
      explanation: 'Marginal analysis evaluates the incremental cost and revenue of producing one more unit.',
    },
    {
      id: 'cma2-d13',
      question: 'Linear programming is used to:',
      options: ['Calculate depreciation', 'Optimize resource allocation subject to constraints', 'Prepare financial statements', 'Determine transfer prices'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-C',
      topic: 'Quantitative Methods',
      difficulty: 'medium',
      explanation: 'Linear programming maximizes or minimizes an objective function subject to constraints.',
    },
    {
      id: 'cma2-d14',
      question: 'Enterprise risk management identifies risk as:',
      options: ['Only negative events', 'Both threats and opportunities', 'Only insurable events', 'Only financial risks'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-D',
      topic: 'ERM',
      difficulty: 'easy',
      explanation: 'Modern ERM views risk as both threats (downside) and opportunities (upside) to achieving objectives.',
    },
    {
      id: 'cma2-d15',
      question: 'A forward contract is used to:',
      options: ['Speculate on stock prices', 'Lock in a future exchange rate or price', 'Borrow money at variable rates', 'Issue new equity'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-D',
      topic: 'Hedging',
      difficulty: 'medium',
      explanation: 'Forward contracts fix a future price/rate, hedging against price fluctuations.',
    },
    {
      id: 'cma2-d16',
      question: 'Value at Risk (VaR) measures:',
      options: ['Expected profit', 'Maximum potential loss at a given confidence level over a specified period', 'Average daily returns', 'Total portfolio value'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-D',
      topic: 'Risk Quantification',
      difficulty: 'hard',
      explanation: 'VaR estimates the maximum expected loss over a time period at a given confidence level.',
    },
    {
      id: 'cma2-d17',
      question: 'Net present value (NPV) is the:',
      options: ['Sum of all cash flows', 'Difference between PV of inflows and PV of outflows', 'Rate that makes NPV zero', 'Payback period in years'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-E',
      topic: 'NPV',
      difficulty: 'easy',
      explanation: 'NPV = PV of cash inflows − PV of cash outflows (initial investment).',
    },
    {
      id: 'cma2-d18',
      question: 'The internal rate of return (IRR) is:',
      options: ['The average return on investment', 'The discount rate that makes NPV equal to zero', 'A fixed rate set by management', 'The cost of capital'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-E',
      topic: 'IRR',
      difficulty: 'easy',
      explanation: 'IRR is the discount rate at which the net present value of a project equals zero.',
    },
    {
      id: 'cma2-d19',
      question: 'If a project has a positive NPV, its IRR must be:',
      options: ['Equal to the cost of capital', 'Less than the cost of capital', 'Greater than the cost of capital', 'Zero'],
      correctAnswer: 2,
      blueprintArea: 'CMA2-E',
      topic: 'NPV vs IRR',
      difficulty: 'medium',
      explanation: 'Positive NPV means the project\'s IRR exceeds the discount rate (cost of capital).',
    },
    {
      id: 'cma2-d20',
      question: 'The IMA Statement of Ethical Professional Practice includes all of the following principles EXCEPT:',
      options: ['Competence', 'Confidentiality', 'Integrity', 'Profitability'],
      correctAnswer: 3,
      blueprintArea: 'CMA2-F',
      topic: 'IMA Ethics',
      difficulty: 'easy',
      explanation: 'IMA ethics: Competence, Confidentiality, Integrity, and Credibility. Profitability is not an ethical standard.',
    },
    {
      id: 'cma2-d21',
      question: 'Overstatement of financial results by management is an example of:',
      options: ['Acceptable earnings management', 'Fraudulent financial reporting', 'Conservative accounting', 'Aggressive but legal accounting'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-F',
      topic: 'Fraud',
      difficulty: 'easy',
      explanation: 'Intentional overstatement of results is fraudulent financial reporting.',
    },
    {
      id: 'cma2-d22',
      question: 'When facing an ethical dilemma, a management accountant should first:',
      options: ['Resign immediately', 'Follow the organization\'s established policies', 'Contact a lawyer', 'Report to the media'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-F',
      topic: 'Ethical Resolution',
      difficulty: 'medium',
      explanation: 'IMA guidance: first follow the organization\'s established policies for resolving ethical conflicts.',
    },
    {
      id: 'cma2-d23',
      question: 'The payback period method ignores:',
      options: ['Initial investment', 'Cash flows during payback', 'The time value of money', 'Operating expenses'],
      correctAnswer: 2,
      blueprintArea: 'CMA2-E',
      topic: 'Payback Period',
      difficulty: 'easy',
      explanation: 'Simple payback ignores the time value of money and cash flows after the payback period.',
    },
    {
      id: 'cma2-d24',
      question: 'Interest rate risk most directly affects the value of:',
      options: ['Inventory', 'Fixed-rate bonds', 'Accounts receivable', 'Raw materials'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-D',
      topic: 'Interest Rate Risk',
      difficulty: 'easy',
      explanation: 'Fixed-rate bond prices move inversely to interest rates — higher rates, lower bond prices.',
    },
    {
      id: 'cma2-d25',
      question: 'Economic Value Added (EVA) is calculated as:',
      options: ['Net income − Dividends', 'NOPAT − (WACC × Invested capital)', 'Revenue − Total costs', 'EBITDA − Interest'],
      correctAnswer: 1,
      blueprintArea: 'CMA2-A',
      topic: 'EVA',
      difficulty: 'hard',
      explanation: 'EVA = NOPAT − (WACC × Total invested capital). Positive EVA = value creation.',
    },
  ],
};

export const CMA_DIAGNOSTIC_QUIZZES: Record<string, DiagnosticQuiz> = {
  CMA1: CMA1_DIAGNOSTIC,
  CMA2: CMA2_DIAGNOSTIC,
};
