/**
 * CMA Part 1: Financial Planning, Performance, and Analytics - Flashcard Batch 4
 * Additional flashcards to strengthen Part 1 coverage
 */

import { CMAFlashcard } from './types';

export const CMA1_BATCH4: CMAFlashcard[] = [
  // ============================================
  // CMA1-A: External Financial Reporting Decisions (15%)
  // ============================================
  {
    id: 'cma1-b4-001',
    section: 'CMA1',
    type: 'definition',
    topic: 'External Reporting',
    subtopic: 'Leases',
    blueprintArea: 'CMA1-A',
    front: 'Under ASC 842, how do lessees classify leases?',
    back: '**All leases (except short-term) go on balance sheet**\n\n**Classification:**\n\n**Finance Lease (any ONE):**\n- Ownership transfers at end\n- Bargain purchase option\n- Lease term ≥ 75% of asset life\n- PV of payments ≥ 90% of fair value\n- Specialized asset with no alternative use\n\n**Operating Lease:**\n- Does not meet any finance lease criteria\n\n**Balance Sheet:**\nBoth: ROU Asset and Lease Liability\n\n**Income Statement:**\n- Finance: Interest + Amortization (front-loaded)\n- Operating: Single lease expense (straight-line)',
    difficulty: 'hard',
    tags: ['ASC 842', 'leases', 'classification'],
    reference: 'ASC 842',
  },
  {
    id: 'cma1-b4-002',
    section: 'CMA1',
    type: 'formula',
    topic: 'External Reporting',
    subtopic: 'Depreciation',
    blueprintArea: 'CMA1-A',
    front: 'What is the Sum-of-the-Years-Digits (SYD) depreciation formula?',
    back: '**Annual Depreciation:**\nDepreciation = (Cost - Salvage) × (Remaining Life / SYD)\n\n**Where SYD = n(n+1)/2**\nn = useful life in years\n\n**Example: 5-year asset**\nSYD = 5(6)/2 = 15\n\nYear 1: 5/15 = 33.3%\nYear 2: 4/15 = 26.7%\nYear 3: 3/15 = 20.0%\nYear 4: 2/15 = 13.3%\nYear 5: 1/15 = 6.7%\n\n**Accelerated method** - higher depreciation early',
    formula: 'SYD = n(n+1)/2; Depreciation = (Cost-Salvage) × (Remaining/SYD)',
    difficulty: 'medium',
    tags: ['depreciation', 'SYD', 'accelerated'],
  },
  {
    id: 'cma1-b4-003',
    section: 'CMA1',
    type: 'definition',
    topic: 'External Reporting',
    subtopic: 'EPS',
    blueprintArea: 'CMA1-A',
    front: 'How do you calculate Diluted EPS with convertible bonds?',
    back: '**If-Converted Method:**\n\n**Numerator Adjustment:**\nAdd back: Interest expense × (1 - Tax Rate)\n\n**Denominator Adjustment:**\nAdd: Shares that would be issued upon conversion\n\n**Formula:**\nDiluted EPS = (NI - Pref Div + Interest(1-T)) / (WASO + Convertible Shares)\n\n**Antidilution Test:**\nIf Diluted EPS > Basic EPS, exclude the security\n\n**Example:**\n$1M convertible bonds, 6% interest, 25% tax\nConverts to 50,000 shares\nInterest add-back = $60,000 × 0.75 = $45,000',
    formula: 'DEPS = (NI - PD + I(1-T)) / (WASO + Convertible Shares)',
    difficulty: 'hard',
    tags: ['EPS', 'dilution', 'convertibles'],
    reference: 'ASC 260',
  },
  {
    id: 'cma1-b4-004',
    section: 'CMA1',
    type: 'comparison',
    topic: 'External Reporting',
    subtopic: 'Inventory',
    blueprintArea: 'CMA1-A',
    front: 'What is the difference between Periodic and Perpetual inventory systems?',
    back: '**Periodic System:**\n- COGS calculated at period end\n- COGS = Beginning Inv + Purchases - Ending Inv\n- Physical count needed to determine ending inventory\n- Simpler, less costly\n- Common for low-value items\n\n**Perpetual System:**\n- Inventory updated with each transaction\n- COGS recorded at time of sale\n- Real-time inventory tracking\n- More accurate, more costly\n- Common for high-value items, modern retail\n\n**Key Difference:** Timing of COGS recognition and level of detail',
    comparison: {
      itemA: 'Periodic',
      itemB: 'Perpetual',
      differences: ['COGS timing', 'Record keeping', 'Cost and complexity'],
    },
    difficulty: 'easy',
    tags: ['inventory', 'periodic', 'perpetual'],
  },
  {
    id: 'cma1-b4-005',
    section: 'CMA1',
    type: 'definition',
    topic: 'External Reporting',
    subtopic: 'Intangibles',
    blueprintArea: 'CMA1-A',
    front: 'How is Goodwill tested for impairment under ASC 350?',
    back: '**Goodwill Impairment (Simplified - 2017 update):**\n\n**Step 1 (Optional):** Qualitative assessment\n- Is it more likely than not (>50%) FV < Carrying Value?\n- If no, stop. No impairment.\n- If yes (or skip), proceed to quantitative test.\n\n**Step 2:** Quantitative test\n- Compare FV of reporting unit to its carrying amount\n- If FV < Carrying Amount: Impairment exists\n- Impairment = Carrying Amount - FV\n- Limited to total goodwill allocated to unit\n\n**Cannot be reversed**\n\n**Old 2-step test eliminated in 2017**',
    difficulty: 'hard',
    tags: ['goodwill', 'impairment', 'ASC 350'],
    reference: 'ASC 350',
  },
  {
    id: 'cma1-b4-006',
    section: 'CMA1',
    type: 'formula',
    topic: 'External Reporting',
    subtopic: 'Stockholders Equity',
    blueprintArea: 'CMA1-A',
    front: 'How do you account for Treasury Stock under the Cost Method?',
    back: '**Purchase Treasury Stock:**\nDr. Treasury Stock (at cost)\n    Cr. Cash\n\n**Reissue ABOVE cost:**\nDr. Cash (proceeds)\n    Cr. Treasury Stock (cost)\n    Cr. APIC-Treasury Stock (excess)\n\n**Reissue BELOW cost:**\nDr. Cash (proceeds)\nDr. APIC-Treasury Stock (to extent available)\nDr. Retained Earnings (remaining difference)\n    Cr. Treasury Stock (cost)\n\n**Note:** Treasury Stock is a contra-equity account\nNever recognize gain/loss on company\'s own stock',
    difficulty: 'medium',
    tags: ['treasury stock', 'equity', 'cost method'],
  },
  {
    id: 'cma1-b4-007',
    section: 'CMA1',
    type: 'definition',
    topic: 'External Reporting',
    subtopic: 'Contingencies',
    blueprintArea: 'CMA1-A',
    front: 'When should a loss contingency be accrued under ASC 450?',
    back: '**Accrue (Recognize) when BOTH:**\n1. Probable: Likely to occur\n2. Reasonably Estimable: Amount can be estimated\n\n**If range of estimates:**\n- Accrue minimum if no best estimate\n- Accrue best estimate if determinable\n- Disclose possible additional loss\n\n**Disclose Only (not accrue) when:**\n- Reasonably possible (more than remote, less than probable)\n\n**No Disclosure when:**\n- Remote likelihood\n\n**Examples:**\n- Lawsuit: Probable loss = accrue\n- Warranty: Expected claims = accrue\n- Environmental: Probable cleanup = accrue',
    difficulty: 'medium',
    tags: ['contingencies', 'ASC 450', 'accrual'],
    reference: 'ASC 450',
  },
  {
    id: 'cma1-b4-008',
    section: 'CMA1',
    type: 'mnemonic',
    topic: 'External Reporting',
    subtopic: 'Financial Statements',
    blueprintArea: 'CMA1-A',
    front: 'What are the four main financial statements required under GAAP?',
    back: '**Mnemonic: IS-BS-CF-SE**\n\n**1. Income Statement (Statement of Operations):**\n- Revenues, expenses, gains, losses\n- Period of time\n\n**2. Balance Sheet (Statement of Financial Position):**\n- Assets, liabilities, equity\n- Point in time\n\n**3. Cash Flow Statement:**\n- Operating, investing, financing activities\n- Period of time\n\n**4. Statement of Stockholders\' Equity:**\n- Changes in equity accounts\n- Period of time\n\n**Plus:** Notes to Financial Statements (integral part)',
    mnemonic: 'IS-BS-CF-SE',
    difficulty: 'easy',
    tags: ['financial statements', 'GAAP', 'basics'],
  },

  // ============================================
  // CMA1-B: Planning, Budgeting, and Forecasting (20%)
  // ============================================
  {
    id: 'cma1-b4-009',
    section: 'CMA1',
    type: 'comparison',
    topic: 'Budgeting',
    subtopic: 'Budget Types',
    blueprintArea: 'CMA1-B',
    front: 'What is the difference between Static and Flexible Budgets?',
    back: '**Static (Fixed) Budget:**\n- Prepared for ONE level of activity\n- Does not adjust for actual volume\n- Useful for fixed costs\n- Poor for performance evaluation if volume differs\n\n**Flexible Budget:**\n- Adjusts for ACTUAL activity level\n- Variable costs flex with volume\n- Fixed costs remain constant\n- Better for performance evaluation\n\n**Flexible Budget Formula:**\nFlexible Budget = (Variable Cost per Unit × Actual Units) + Fixed Costs\n\n**Key Benefit:** Separates volume variance from spending variance',
    comparison: {
      itemA: 'Static Budget',
      itemB: 'Flexible Budget',
      differences: ['Activity adjustment', 'Performance evaluation', 'Variance analysis'],
    },
    difficulty: 'medium',
    tags: ['budgeting', 'flexible budget', 'static budget'],
  },
  {
    id: 'cma1-b4-010',
    section: 'CMA1',
    type: 'formula',
    topic: 'Budgeting',
    subtopic: 'Production Budget',
    blueprintArea: 'CMA1-B',
    front: 'How do you calculate units to produce in a Production Budget?',
    back: '**Production Budget Formula:**\n\nUnits to Produce = \n  Budgeted Sales (units)\n+ Desired Ending Finished Goods Inventory\n- Beginning Finished Goods Inventory\n\n**Example:**\nBudgeted sales: 10,000 units\nDesired ending FG: 2,000 units\nBeginning FG: 1,500 units\n\nUnits to produce = 10,000 + 2,000 - 1,500 = 10,500 units\n\n**Common Policy:** Ending inventory = % of next period\'s sales\n(e.g., 20% of next month\'s sales)',
    formula: 'Production = Sales + Ending FG - Beginning FG',
    difficulty: 'easy',
    tags: ['production budget', 'master budget', 'planning'],
  },
  {
    id: 'cma1-b4-011',
    section: 'CMA1',
    type: 'definition',
    topic: 'Budgeting',
    subtopic: 'Capital Budgeting',
    blueprintArea: 'CMA1-B',
    front: 'What is the Payback Period and what are its limitations?',
    back: '**Definition:** Time required to recover initial investment\n\n**Simple Payback (even cash flows):**\nPayback = Initial Investment / Annual Cash Flow\n\n**Uneven Cash Flows:**\nCumulative cash flows until investment recovered\n\n**Advantages:**\n- Simple to calculate and understand\n- Favors liquidity\n- Rough measure of risk\n\n**Limitations:**\n- Ignores time value of money\n- Ignores cash flows after payback\n- No objective decision rule connection to value\n\n**Discounted Payback:** Uses PV of cash flows (addresses TVM but not post-payback flows)',
    difficulty: 'easy',
    tags: ['payback', 'capital budgeting', 'investment'],
  },
  {
    id: 'cma1-b4-012',
    section: 'CMA1',
    type: 'mnemonic',
    topic: 'Budgeting',
    subtopic: 'Master Budget',
    blueprintArea: 'CMA1-B',
    front: 'What is the sequence of budgets in the Master Budget process?',
    back: '**Mnemonic: SPPDM-COB-CF-BS**\n\n**Operating Budgets (start here):**\n1. **S**ales Budget (starting point)\n2. **P**roduction Budget\n3. **P**urchasing Budget (Direct Materials)\n4. **D**irect Labor Budget\n5. **M**anufacturing Overhead Budget\n\n**Then Cost Budgets:**\n6. **C**ost of Goods Sold Budget\n7. **O**perating Expense Budget\n8. **B**udgeted Income Statement\n\n**Financial Budgets:**\n9. **C**ash Budget\n10. **F**inancial Statements (Budgeted BS)\n\n**Key:** Everything flows from sales forecast',
    mnemonic: 'SPPDM-COB-CF-BS',
    difficulty: 'medium',
    tags: ['master budget', 'sequence', 'planning'],
  },
  {
    id: 'cma1-b4-013',
    section: 'CMA1',
    type: 'formula',
    topic: 'Budgeting',
    subtopic: 'Cash Budget',
    blueprintArea: 'CMA1-B',
    front: 'How do you structure a Cash Budget?',
    back: '**Cash Budget Format:**\n\n**Beginning Cash Balance**\n\n**+ Cash Receipts:**\n- Cash sales\n- Collections from A/R\n- Other income\n\n**= Total Cash Available**\n\n**- Cash Disbursements:**\n- Payments for materials\n- Direct labor\n- Manufacturing overhead\n- Operating expenses\n- Capital expenditures\n- Debt payments\n\n**= Ending Cash Balance (Before Financing)**\n\n**+/- Financing (if below minimum):**\n- Borrowing / Repayment\n\n**= Ending Cash Balance**',
    formula: 'Ending Cash = Beginning + Receipts - Disbursements +/- Financing',
    difficulty: 'medium',
    tags: ['cash budget', 'treasury', 'planning'],
  },
  {
    id: 'cma1-b4-014',
    section: 'CMA1',
    type: 'definition',
    topic: 'Forecasting',
    subtopic: 'Regression',
    blueprintArea: 'CMA1-B',
    front: 'What does the R-squared (Coefficient of Determination) tell you in regression?',
    back: '**R² Definition:**\nThe proportion of variance in the dependent variable explained by the independent variable(s)\n\n**Range:** 0 to 1 (or 0% to 100%)\n\n**Interpretation:**\n- R² = 0.85 means 85% of the variation in Y is explained by X\n- Higher R² = Better fit\n\n**Limitations:**\n- High R² doesn\'t prove causation\n- Can be artificially inflated by adding variables\n- Doesn\'t indicate if model is correct\n\n**Adjusted R²:**\n- Penalizes for adding non-significant variables\n- Preferred for multiple regression',
    difficulty: 'medium',
    tags: ['regression', 'R-squared', 'statistics'],
  },
  {
    id: 'cma1-b4-015',
    section: 'CMA1',
    type: 'comparison',
    topic: 'Forecasting',
    subtopic: 'Methods',
    blueprintArea: 'CMA1-B',
    front: 'What is the difference between Qualitative and Quantitative forecasting?',
    back: '**Qualitative Methods:**\n- Based on judgment and opinions\n- Used when no historical data\n- Examples:\n  - Delphi method\n  - Market research\n  - Executive opinion\n  - Sales force composite\n- Better for new products, disruptive changes\n\n**Quantitative Methods:**\n- Based on historical data and math\n- Assumes patterns continue\n- Examples:\n  - Moving average\n  - Exponential smoothing\n  - Regression analysis\n  - Time series decomposition\n- Better for stable, established products\n\n**Best Practice:** Combine both approaches',
    comparison: {
      itemA: 'Qualitative',
      itemB: 'Quantitative',
      differences: ['Data source', 'Application', 'Examples'],
    },
    difficulty: 'medium',
    tags: ['forecasting', 'qualitative', 'quantitative'],
  },

  // ============================================
  // CMA1-C: Performance Management (20%)
  // ============================================
  {
    id: 'cma1-b4-016',
    section: 'CMA1',
    type: 'formula',
    topic: 'Performance Management',
    subtopic: 'Variance Analysis',
    blueprintArea: 'CMA1-C',
    front: 'What is the Direct Labor Efficiency Variance formula?',
    back: '**Direct Labor Efficiency Variance:**\nDLEV = (Actual Hours - Standard Hours Allowed) × Standard Rate\n\n**Where:**\n- Actual Hours = Hours actually worked\n- Standard Hours Allowed = Standard hours per unit × Actual units produced\n- Standard Rate = Budgeted hourly rate\n\n**Interpretation:**\n- Favorable: Used fewer hours than allowed\n- Unfavorable: Used more hours than allowed\n\n**Responsibility:** Production manager (efficiency of labor use)\n\n**Example:**\nAH = 5,200, SHA = 5,000, SR = $20\nDLEV = (5,200 - 5,000) × $20 = $4,000 U',
    formula: 'DLEV = (AH - SH) × SR',
    difficulty: 'medium',
    tags: ['variance', 'direct labor', 'efficiency'],
  },
  {
    id: 'cma1-b4-017',
    section: 'CMA1',
    type: 'formula',
    topic: 'Performance Management',
    subtopic: 'Variance Analysis',
    blueprintArea: 'CMA1-C',
    front: 'What is the Material Mix Variance and Yield Variance?',
    back: '**Material Mix Variance:**\nMMV = (Actual Mix - Standard Mix) × Actual Total Input × Standard Price\n\n**Measures:** Impact of using different proportions of materials than standard\n\n**Material Yield Variance:**\nMYV = (Actual Yield - Standard Yield) × Standard Cost per Unit of Output\n\n**Measures:** Impact of getting different output quantity from inputs than expected\n\n**Together:** Mix + Yield = Total Quantity Variance\n\n**When Used:**\n- Multiple inputs can be substituted\n- Industries: Food processing, chemicals, textiles',
    formula: 'Mix: (AM - SM) × AI × SP; Yield: (AY - SY) × Std Cost',
    difficulty: 'hard',
    tags: ['variance', 'mix', 'yield'],
  },
  {
    id: 'cma1-b4-018',
    section: 'CMA1',
    type: 'definition',
    topic: 'Performance Management',
    subtopic: 'Responsibility Centers',
    blueprintArea: 'CMA1-C',
    front: 'What are the four types of Responsibility Centers?',
    back: '**1. Cost Center:**\n- Responsible for costs only\n- No revenue accountability\n- Example: Production department, IT support\n\n**2. Revenue Center:**\n- Responsible for revenues only\n- No cost/profit accountability\n- Example: Sales region\n\n**3. Profit Center:**\n- Responsible for both revenues AND costs\n- Has profit (contribution) accountability\n- Example: Business unit, product line\n\n**4. Investment Center:**\n- Responsible for revenues, costs, AND invested capital\n- Measured by ROI, RI, EVA\n- Example: Division, subsidiary\n\n**Progression:** More autonomy and accountability as you move from cost to investment center',
    difficulty: 'easy',
    tags: ['responsibility centers', 'decentralization', 'control'],
  },
  {
    id: 'cma1-b4-019',
    section: 'CMA1',
    type: 'formula',
    topic: 'Performance Management',
    subtopic: 'Investment Centers',
    blueprintArea: 'CMA1-C',
    front: 'What is Residual Income (RI) and when is it preferred over ROI?',
    back: '**Residual Income Formula:**\nRI = Operating Income - (Required Rate × Investment)\n\nOr: RI = Operating Income - Minimum Required Return\n\n**When RI is Preferred:**\n\n**ROI Problem (dysfunctional behavior):**\nA division with 20% ROI may reject a project earning 15% even if company WACC is 10%\n\n**RI Solution:**\nProject earning 15% when required return is 10% has positive RI → Accept!\n\n**Advantages:**\n- Encourages goal congruence\n- All value-creating projects accepted\n- Can use different rates for different risk\n\n**Disadvantage:**\n- Absolute measure, hard to compare divisions of different size',
    formula: 'RI = Operating Income - (Required Rate × Investment)',
    difficulty: 'medium',
    tags: ['residual income', 'investment center', 'ROI'],
  },
  {
    id: 'cma1-b4-020',
    section: 'CMA1',
    type: 'definition',
    topic: 'Performance Management',
    subtopic: 'Balanced Scorecard',
    blueprintArea: 'CMA1-C',
    front: 'What are the four perspectives of the Balanced Scorecard?',
    back: '**1. Financial Perspective:**\n"How do we look to shareholders?"\n- ROI, EVA, revenue growth, cost reduction\n\n**2. Customer Perspective:**\n"How do customers see us?"\n- Customer satisfaction, retention, acquisition\n- Market share, on-time delivery\n\n**3. Internal Business Process Perspective:**\n"What must we excel at?"\n- Cycle time, quality, productivity\n- Innovation, operations, post-sale service\n\n**4. Learning & Growth Perspective:**\n"Can we continue to improve and create value?"\n- Employee satisfaction, retention, training\n- Information system capabilities\n\n**Key:** Lead indicators (L&G, Process, Customer) drive lag indicators (Financial)',
    mnemonic: 'FCIL (Financial, Customer, Internal, Learning)',
    difficulty: 'medium',
    tags: ['balanced scorecard', 'KPI', 'strategy'],
  },

  // ============================================
  // CMA1-D: Cost Management (15%)
  // ============================================
  {
    id: 'cma1-b4-021',
    section: 'CMA1',
    type: 'comparison',
    topic: 'Cost Management',
    subtopic: 'Costing Methods',
    blueprintArea: 'CMA1-D',
    front: 'What is the difference between Job Order and Process Costing?',
    back: '**Job Order Costing:**\n- Unique, identifiable products\n- Costs traced to specific jobs\n- Costs accumulated by job\n- Example: Custom furniture, construction, legal services\n- Work in Process: Separate account per job\n\n**Process Costing:**\n- Homogeneous products\n- Costs averaged across units\n- Costs accumulated by department/process\n- Example: Oil refining, chemicals, food processing\n- Work in Process: Average cost per equivalent unit\n\n**Hybrid: Operation Costing**\n- Combines elements of both\n- Example: Auto manufacturing (batches with customization)',
    comparison: {
      itemA: 'Job Order',
      itemB: 'Process',
      differences: ['Product type', 'Cost accumulation', 'Industries'],
    },
    difficulty: 'easy',
    tags: ['job costing', 'process costing', 'cost systems'],
  },
  {
    id: 'cma1-b4-022',
    section: 'CMA1',
    type: 'formula',
    topic: 'Cost Management',
    subtopic: 'Process Costing',
    blueprintArea: 'CMA1-D',
    front: 'How do you calculate Equivalent Units under the FIFO method?',
    back: '**FIFO Equivalent Units:**\n\nEU = Units to complete Beginning WIP\n   + Units Started AND Completed\n   + Ending WIP × % Complete\n\n**Or alternatively:**\nEU = Units Completed\n   - Beginning WIP × % Complete (prior period work)\n   + Ending WIP × % Complete\n\n**FIFO Key Points:**\n- Only counts THIS PERIOD\'s work\n- Separates layers: BWIP from current\n- More accurate for performance evaluation\n- More complex than weighted average\n\n**Compare to Weighted Average:**\nEU = Units Completed + Ending WIP × % Complete\n(Simpler but blends periods)',
    formula: 'EU(FIFO) = Complete BWIP + S&C + EWIP×%',
    difficulty: 'hard',
    tags: ['process costing', 'FIFO', 'equivalent units'],
  },
  {
    id: 'cma1-b4-023',
    section: 'CMA1',
    type: 'definition',
    topic: 'Cost Management',
    subtopic: 'Activity-Based Costing',
    blueprintArea: 'CMA1-D',
    front: 'What is the hierarchy of activities in ABC?',
    back: '**Activity Hierarchy (Low to High):**\n\n**1. Unit-Level Activities:**\n- Performed for each unit produced\n- Example: Direct materials, machine time per unit\n\n**2. Batch-Level Activities:**\n- Performed for each batch of units\n- Example: Setup, inspection per batch, purchase orders\n\n**3. Product-Level Activities:**\n- Support a specific product line\n- Example: Product design, product advertising, engineering changes\n\n**4. Facility-Level (Organization-Sustaining):**\n- Support overall operations\n- Example: Rent, plant security, general management\n\n**ABC assigns costs using appropriate drivers at each level**',
    difficulty: 'medium',
    tags: ['ABC', 'activity hierarchy', 'cost drivers'],
  },
  {
    id: 'cma1-b4-024',
    section: 'CMA1',
    type: 'formula',
    topic: 'Cost Management',
    subtopic: 'Joint Products',
    blueprintArea: 'CMA1-D',
    front: 'How do you allocate joint costs using the Net Realizable Value method?',
    back: '**NRV Method:**\n\nStep 1: Calculate NRV at split-off for each product\nNRV = Final Sales Value - Additional Processing Costs\n\nStep 2: Calculate total NRV of all products\n\nStep 3: Allocate joint costs proportionally\nAllocation = (Product NRV / Total NRV) × Joint Costs\n\n**Example:**\nJoint costs = $100,000\nProduct A: Sales $80,000, Additional costs $20,000 → NRV = $60,000\nProduct B: Sales $60,000, Additional costs $20,000 → NRV = $40,000\nTotal NRV = $100,000\n\nA allocation = (60/100) × $100,000 = $60,000\nB allocation = (40/100) × $100,000 = $40,000',
    formula: 'Allocation = (Product NRV / Total NRV) × Joint Costs',
    difficulty: 'hard',
    tags: ['joint costs', 'NRV', 'allocation'],
  },
  {
    id: 'cma1-b4-025',
    section: 'CMA1',
    type: 'definition',
    topic: 'Cost Management',
    subtopic: 'Cost Concepts',
    blueprintArea: 'CMA1-D',
    front: 'What is the difference between Product Costs and Period Costs?',
    back: '**Product Costs (Inventoriable):**\n- Attached to inventory\n- Expensed when product is sold (COGS)\n- Include:\n  - Direct materials\n  - Direct labor\n  - Manufacturing overhead\n- On Balance Sheet until sold\n\n**Period Costs:**\n- Expensed in period incurred\n- Not tied to production\n- Include:\n  - Selling expenses\n  - Administrative expenses\n  - R&D (under GAAP)\n  - Interest expense\n- Never on Balance Sheet\n\n**Key:** Product costs follow inventory; period costs follow the calendar',
    comparison: {
      itemA: 'Product Costs',
      itemB: 'Period Costs',
      differences: ['Timing of expense', 'Balance sheet treatment', 'Components'],
    },
    difficulty: 'easy',
    tags: ['product costs', 'period costs', 'cost behavior'],
  },
  {
    id: 'cma1-b4-026',
    section: 'CMA1',
    type: 'formula',
    topic: 'Cost Management',
    subtopic: 'Service Departments',
    blueprintArea: 'CMA1-D',
    front: 'What is the Step-Down (Sequential) method for allocating service department costs?',
    back: '**Step-Down Method:**\n\n**Process:**\n1. Rank service departments by services provided to other service departments\n2. Allocate first department costs to ALL users (service + production)\n3. Allocate second department (now including allocated costs) to remaining departments\n4. Continue until all service department costs are in production departments\n\n**Key Rule:** Once a service department\'s costs are allocated, it receives NO further allocations\n\n**Advantage over Direct Method:**\n- Recognizes some inter-service department usage\n\n**Disadvantage vs. Reciprocal:**\n- Doesn\'t fully recognize all reciprocal services\n\n**Example:** Allocate Maintenance first, then HR (Maintenance serves HR but not vice versa once allocated)',
    difficulty: 'hard',
    tags: ['service departments', 'step-down', 'allocation'],
  },

  // ============================================
  // CMA1-E: Internal Controls (15%)
  // ============================================
  {
    id: 'cma1-b4-027',
    section: 'CMA1',
    type: 'definition',
    topic: 'Internal Controls',
    subtopic: 'Control Activities',
    blueprintArea: 'CMA1-E',
    front: 'What is Segregation of Duties and what functions should be separated?',
    back: '**Definition:** Dividing responsibilities among different people to reduce risk of error or fraud\n\n**Three Functions to Separate:**\n\n**1. AUTHORIZATION:**\n- Approve transactions\n- Set policies\n\n**2. CUSTODY:**\n- Physical possession of assets\n- Cash, inventory, securities\n\n**3. RECORDKEEPING:**\n- Record transactions\n- Maintain accounting records\n\n**Example - Cash:**\n- Person A: Approves disbursements\n- Person B: Handles checks\n- Person C: Records in books\n- Person D: Reconciles bank statement\n\n**If one person has multiple functions, compensating controls needed**',
    mnemonic: 'ACR (Authorization, Custody, Recordkeeping)',
    difficulty: 'medium',
    tags: ['internal controls', 'segregation of duties', 'fraud prevention'],
  },
  {
    id: 'cma1-b4-028',
    section: 'CMA1',
    type: 'comparison',
    topic: 'Internal Controls',
    subtopic: 'Control Types',
    blueprintArea: 'CMA1-E',
    front: 'What is the difference between Preventive, Detective, and Corrective controls?',
    back: '**Preventive Controls:**\n- Stop errors/fraud BEFORE they occur\n- Examples:\n  - Segregation of duties\n  - Authorization requirements\n  - Physical access controls\n  - Passwords\n\n**Detective Controls:**\n- Identify errors/fraud AFTER they occur\n- Examples:\n  - Bank reconciliations\n  - Variance analysis\n  - Audit trails\n  - Exception reports\n\n**Corrective Controls:**\n- Fix errors/fraud AFTER detection\n- Examples:\n  - Error correction procedures\n  - Backup restoration\n  - Insurance claims\n  - Disciplinary action\n\n**Best:** Preventive (cheapest to fix), then Detective, then Corrective',
    comparison: {
      itemA: 'Preventive',
      itemB: 'Detective',
      differences: ['Timing', 'Purpose', 'Examples'],
    },
    difficulty: 'easy',
    tags: ['internal controls', 'control types', 'risk management'],
  },
  {
    id: 'cma1-b4-029',
    section: 'CMA1',
    type: 'definition',
    topic: 'Internal Controls',
    subtopic: 'IT Controls',
    blueprintArea: 'CMA1-E',
    front: 'What are General Controls vs. Application Controls in IT?',
    back: '**General Controls (IT General Controls - ITGC):**\n- Apply to ALL systems and applications\n- Categories:\n  - Data center/operations: Backup, disaster recovery\n  - System software: Access to OS, databases\n  - Access security: Passwords, authentication\n  - Program development: Change management, testing\n\n**Application Controls:**\n- Specific to individual applications\n- Categories:\n  - Input controls: Validation, authorization\n  - Processing controls: Completeness, accuracy\n  - Output controls: Distribution, reconciliation\n\n**Relationship:** Strong general controls support all application controls',
    comparison: {
      itemA: 'General Controls',
      itemB: 'Application Controls',
      differences: ['Scope', 'Examples', 'Focus'],
    },
    difficulty: 'medium',
    tags: ['IT controls', 'ITGC', 'application controls'],
  },
  {
    id: 'cma1-b4-030',
    section: 'CMA1',
    type: 'mnemonic',
    topic: 'Internal Controls',
    subtopic: 'Input Controls',
    blueprintArea: 'CMA1-E',
    front: 'What are common IT Input Validation controls?',
    back: '**Mnemonic: CLEVER**\n\n**C**heck digit verification:\n- Algorithm validates last digit (e.g., Luhn for credit cards)\n\n**L**imit (Range) check:\n- Values within acceptable range (hours 1-60)\n\n**E**xistence/Validity check:\n- Value exists in master file (valid customer number)\n\n**V**alidity check:\n- Data matches expected type (numeric, alpha)\n\n**E**dit check:\n- General validation of data format and content\n\n**R**easonableness test:\n- Values make sense (salary $15-$500/hour)\n\n**Also:**\n- Sequence check\n- Completeness check\n- Duplicate check',
    mnemonic: 'CLEVER (Check digit, Limit, Existence, Validity, Edit, Reasonableness)',
    difficulty: 'medium',
    tags: ['IT controls', 'input validation', 'data quality'],
  },

  // ============================================
  // CMA1-F: Technology and Analytics (15%)
  // ============================================
  {
    id: 'cma1-b4-031',
    section: 'CMA1',
    type: 'definition',
    topic: 'Technology',
    subtopic: 'Data Analytics',
    blueprintArea: 'CMA1-F',
    front: 'What is the difference between Descriptive, Diagnostic, Predictive, and Prescriptive analytics?',
    back: '**Descriptive Analytics: "What happened?"**\n- Historical data summarization\n- Reports, dashboards, KPIs\n\n**Diagnostic Analytics: "Why did it happen?"**\n- Root cause analysis\n- Drill-down, correlations\n\n**Predictive Analytics: "What will happen?"**\n- Forecasting future outcomes\n- Machine learning, regression\n\n**Prescriptive Analytics: "What should we do?"**\n- Recommends actions\n- Optimization, simulation\n\n**Progression:**\nDescriptive → Diagnostic → Predictive → Prescriptive\n(Past → Understanding → Future → Action)\n(Less complex ← → More complex)',
    difficulty: 'medium',
    tags: ['analytics', 'data analytics', 'business intelligence'],
  },
  {
    id: 'cma1-b4-032',
    section: 'CMA1',
    type: 'comparison',
    topic: 'Technology',
    subtopic: 'Systems',
    blueprintArea: 'CMA1-F',
    front: 'What is the difference between ERP and Best-of-Breed systems?',
    back: '**ERP (Enterprise Resource Planning):**\n- Single integrated system\n- One vendor, one database\n- Modules for all functions\n- Advantages:\n  - Integration, consistency\n  - Single source of truth\n  - Vendor accountability\n- Disadvantages:\n  - Expensive, complex implementation\n  - May not be best at any one function\n  - Vendor lock-in\n\n**Best-of-Breed:**\n- Select best system for each function\n- Multiple vendors, systems, databases\n- Advantages:\n  - Best functionality per area\n  - Flexibility\n- Disadvantages:\n  - Integration challenges\n  - Multiple interfaces\n  - Data inconsistency risk',
    comparison: {
      itemA: 'ERP',
      itemB: 'Best-of-Breed',
      differences: ['Integration', 'Vendor relationship', 'Functionality depth'],
    },
    difficulty: 'medium',
    tags: ['ERP', 'systems', 'IT strategy'],
  },
  {
    id: 'cma1-b4-033',
    section: 'CMA1',
    type: 'definition',
    topic: 'Technology',
    subtopic: 'Data Visualization',
    blueprintArea: 'CMA1-F',
    front: 'What are best practices for effective data visualization?',
    back: '**Key Principles:**\n\n**1. Choose the Right Chart:**\n- Comparison: Bar/column charts\n- Trends over time: Line charts\n- Composition: Pie/stacked bar\n- Relationship: Scatter plots\n\n**2. Reduce Clutter:**\n- Remove chart junk (3D, excessive gridlines)\n- Maximize data-ink ratio (Tufte)\n\n**3. Use Color Purposefully:**\n- Highlight key data\n- Ensure accessibility (colorblind-friendly)\n- Consistent color coding\n\n**4. Tell a Story:**\n- Clear title and labels\n- Logical flow\n- Actionable insights\n\n**5. Know Your Audience:**\n- Level of detail\n- Technical sophistication',
    difficulty: 'easy',
    tags: ['visualization', 'dashboards', 'communication'],
  },
  {
    id: 'cma1-b4-034',
    section: 'CMA1',
    type: 'definition',
    topic: 'Technology',
    subtopic: 'Emerging Tech',
    blueprintArea: 'CMA1-F',
    front: 'How can Robotic Process Automation (RPA) be used in accounting?',
    back: '**RPA Definition:** Software robots that mimic human actions to automate repetitive tasks\n\n**Accounting Applications:**\n\n**1. Accounts Payable:**\n- Invoice processing\n- Three-way matching\n- Payment execution\n\n**2. Accounts Receivable:**\n- Cash application\n- Collection reminders\n\n**3. Reconciliations:**\n- Bank reconciliations\n- Intercompany reconciliations\n\n**4. Reporting:**\n- Data extraction\n- Report generation and distribution\n\n**5. Close Process:**\n- Journal entry posting\n- Variance calculation\n\n**Benefits:** Speed, accuracy, 24/7 operation, audit trail\n**Limitations:** Rule-based only, requires structured data',
    difficulty: 'medium',
    tags: ['RPA', 'automation', 'technology'],
  },
  {
    id: 'cma1-b4-035',
    section: 'CMA1',
    type: 'formula',
    topic: 'Technology',
    subtopic: 'Data Analysis',
    blueprintArea: 'CMA1-F',
    front: 'What is Benford\'s Law and how is it used in fraud detection?',
    back: '**Benford\'s Law:**\nFirst digits of naturally occurring numbers follow predictable distribution\n\n**Expected Frequency:**\nP(d) = log₁₀(1 + 1/d)\n\n**Distribution:**\n- 1: 30.1%\n- 2: 17.6%\n- 3: 12.5%\n- 4: 9.7%\n- 5: 7.9%\n- 6: 6.7%\n- 7: 5.8%\n- 8: 5.1%\n- 9: 4.6%\n\n**Fraud Detection:**\n- Compare actual first-digit distribution to expected\n- Significant deviation may indicate fabricated data\n- Used for expense reports, invoices, journal entries\n\n**Limitations:**\n- Doesn\'t work for assigned numbers (IDs, prices)\n- Requires large dataset',
    formula: 'P(d) = log₁₀(1 + 1/d)',
    difficulty: 'medium',
    tags: ['Benford', 'fraud detection', 'data analytics'],
  },

  // ============================================
  // Additional Mixed Topics
  // ============================================
  {
    id: 'cma1-b4-036',
    section: 'CMA1',
    type: 'formula',
    topic: 'Performance Management',
    subtopic: 'Overhead',
    blueprintArea: 'CMA1-C',
    front: 'How do you calculate the Overhead Spending and Efficiency Variances?',
    back: '**Variable Overhead Spending Variance:**\nVOSV = (Actual Rate - Standard Rate) × Actual Hours\n= Actual VOH - (Actual Hours × Standard Rate)\n\n**Variable Overhead Efficiency Variance:**\nVOEV = (Actual Hours - Standard Hours) × Standard Rate\n\n**Fixed Overhead Budget (Spending) Variance:**\nFOBV = Actual FOH - Budgeted FOH\n\n**Fixed Overhead Volume Variance:**\nFOVV = Budgeted FOH - (Standard Hours × Standard FOH Rate)\n= (Budgeted Hours - Standard Hours Allowed) × Std FOH Rate\n\n**Interpretation:**\n- Spending: Were we efficient with the rate?\n- Efficiency: Were we efficient with time?\n- Volume: Did we produce at budgeted capacity?',
    formula: 'VOSV = (AR-SR)×AH; VOEV = (AH-SH)×SR',
    difficulty: 'hard',
    tags: ['overhead variance', 'spending', 'efficiency'],
  },
  {
    id: 'cma1-b4-037',
    section: 'CMA1',
    type: 'definition',
    topic: 'Cost Management',
    subtopic: 'Quality Costs',
    blueprintArea: 'CMA1-D',
    front: 'What are the four categories of Quality Costs (Cost of Quality)?',
    back: '**Prevention Costs:**\n- Costs to prevent defects\n- Training, quality engineering, process control\n- Design reviews, supplier qualification\n\n**Appraisal Costs:**\n- Costs to detect defects\n- Inspection, testing, quality audits\n- Supplier monitoring\n\n**Internal Failure Costs:**\n- Defects found BEFORE shipping\n- Scrap, rework, retesting\n- Downtime from quality problems\n\n**External Failure Costs:**\n- Defects found AFTER shipping\n- Warranty, returns, recalls\n- Customer complaints, lawsuits\n- Lost reputation (hardest to measure)\n\n**Goal:** Spend more on Prevention to reduce total quality cost',
    mnemonic: 'PAIE (Prevention, Appraisal, Internal, External)',
    difficulty: 'medium',
    tags: ['quality costs', 'COQ', 'TQM'],
  },
  {
    id: 'cma1-b4-038',
    section: 'CMA1',
    type: 'formula',
    topic: 'External Reporting',
    subtopic: 'Bonds',
    blueprintArea: 'CMA1-A',
    front: 'How do you account for bonds issued at a premium using the Effective Interest Method?',
    back: '**At Issuance (Premium):**\nDr. Cash (proceeds)\n    Cr. Bonds Payable (face value)\n    Cr. Premium on Bonds (excess)\n\n**Each Interest Payment:**\nInterest Expense = Carrying Value × Market Rate\nCash Payment = Face Value × Stated Rate\nPremium Amortization = Cash - Interest Expense\n\nDr. Interest Expense (carrying × market rate)\nDr. Premium on Bonds (amortization)\n    Cr. Cash (face × stated rate)\n\n**Key Points:**\n- Premium: Stated Rate > Market Rate\n- Interest expense DECREASES over time\n- Carrying value DECREASES toward face at maturity\n\n**Premium = Present Value benefit the company received**',
    formula: 'Int Exp = CV × Market Rate; Amort = Cash - Int Exp',
    difficulty: 'hard',
    tags: ['bonds', 'premium', 'effective interest'],
  },
  {
    id: 'cma1-b4-039',
    section: 'CMA1',
    type: 'comparison',
    topic: 'Budgeting',
    subtopic: 'Approaches',
    blueprintArea: 'CMA1-B',
    front: 'What is the difference between Top-Down and Bottom-Up budgeting?',
    back: '**Top-Down (Authoritative):**\n- Senior management sets budget targets\n- Pushed down to departments\n- Advantages:\n  - Strategic alignment\n  - Faster process\n  - Cost control\n- Disadvantages:\n  - Less buy-in from lower levels\n  - May be unrealistic\n  - Gaming to meet targets\n\n**Bottom-Up (Participative):**\n- Individual departments create budgets\n- Rolled up to company level\n- Advantages:\n  - Greater buy-in and motivation\n  - More accurate estimates\n  - Better local knowledge\n- Disadvantages:\n  - Budgetary slack\n  - Time-consuming\n  - May lack strategic focus\n\n**Best Practice:** Combination (iterative negotiation)',
    comparison: {
      itemA: 'Top-Down',
      itemB: 'Bottom-Up',
      differences: ['Direction of flow', 'Participation level', 'Accuracy vs. speed'],
    },
    difficulty: 'easy',
    tags: ['budgeting', 'participative', 'authoritative'],
  },
  {
    id: 'cma1-b4-040',
    section: 'CMA1',
    type: 'formula',
    topic: 'Performance Management',
    subtopic: 'Transfer Pricing',
    blueprintArea: 'CMA1-C',
    front: 'What are the pros and cons of different Transfer Pricing methods?',
    back: '**Market-Based:**\n+ Promotes efficiency, market discipline\n+ Objective, fair\n- May not exist for internal products\n- Ignores synergies\n\n**Cost-Based:**\n+ Simple, available data\n+ Useful when no market\n- No profit incentive for seller\n- Disputes over cost allocation\n\n**Negotiated:**\n+ Preserves divisional autonomy\n+ Can reflect unique circumstances\n- Time-consuming\n- May not optimize company profit\n- Depends on negotiating power\n\n**Variable Cost:**\n+ Encourages optimal short-term decisions\n+ Buyer sees true incremental cost\n- No profit for seller (motivation issue)\n- May distort long-term decisions\n\n**Best:** Market if available; else negotiated within a range',
    difficulty: 'hard',
    tags: ['transfer pricing', 'divisional', 'methods'],
  },
  {
    id: 'cma1-b4-041',
    section: 'CMA1',
    type: 'definition',
    topic: 'Cost Management',
    subtopic: 'Lean/JIT',
    blueprintArea: 'CMA1-D',
    front: 'What are the key principles of Just-in-Time (JIT) manufacturing?',
    back: '**Core Concept:** Produce only what is needed, when needed, in amount needed\n\n**Key Principles:**\n\n**1. Pull System:**\n- Production triggered by customer demand\n- Kanban cards signal production\n\n**2. Continuous Flow:**\n- Move single pieces through process\n- Minimize batch sizes\n\n**3. Takt Time:**\n- Match production rate to customer demand rate\n\n**4. Zero Inventory Goal:**\n- Eliminate work-in-process\n- Expose problems hidden by inventory\n\n**5. Quality at Source:**\n- Workers responsible for quality\n- Stop production for defects\n\n**Benefits:** Lower inventory costs, shorter lead times, higher quality\n**Risks:** Supply disruption vulnerability',
    difficulty: 'medium',
    tags: ['JIT', 'lean', 'inventory'],
  },
  {
    id: 'cma1-b4-042',
    section: 'CMA1',
    type: 'formula',
    topic: 'Budgeting',
    subtopic: 'Forecasting',
    blueprintArea: 'CMA1-B',
    front: 'What is Exponential Smoothing and how is it calculated?',
    back: '**Exponential Smoothing Formula:**\nFt+1 = α × At + (1 - α) × Ft\n\nWhere:\n- Ft+1 = Forecast for next period\n- α = Smoothing constant (0 to 1)\n- At = Actual value this period\n- Ft = Forecast for this period\n\n**Interpretation:**\n- α close to 1: More weight on recent data (responsive)\n- α close to 0: More weight on historical data (stable)\n\n**Choosing α:**\n- Stable demand: Lower α (0.1-0.3)\n- Volatile demand: Higher α (0.4-0.5)\n- Can optimize α to minimize forecast error\n\n**Advantages:**\n- Simple, one parameter\n- Self-correcting\n- Minimal data storage needed',
    formula: 'Ft+1 = αAt + (1-α)Ft',
    difficulty: 'medium',
    tags: ['forecasting', 'exponential smoothing', 'time series'],
  },
  {
    id: 'cma1-b4-043',
    section: 'CMA1',
    type: 'definition',
    topic: 'Internal Controls',
    subtopic: 'Risk Assessment',
    blueprintArea: 'CMA1-E',
    front: 'What is Inherent Risk vs. Control Risk vs. Detection Risk?',
    back: '**Inherent Risk:**\n- Risk of material misstatement BEFORE considering controls\n- Susceptibility of account/disclosure to error\n- Example: Complex estimates, high-volume transactions\n- Cannot be changed by auditor\n\n**Control Risk:**\n- Risk that controls FAIL to prevent/detect misstatement\n- Effectiveness of internal controls\n- Example: Weak segregation of duties\n- Cannot be changed by auditor (can only assess)\n\n**Detection Risk:**\n- Risk that auditor fails to detect misstatement\n- Auditor\'s testing and procedures\n- Example: Inadequate sample size\n- CAN be changed by auditor\n\n**Audit Risk = IR × CR × DR**\n(Auditor manages DR to achieve acceptable audit risk)',
    difficulty: 'medium',
    tags: ['audit risk', 'inherent risk', 'control risk'],
  },
  {
    id: 'cma1-b4-044',
    section: 'CMA1',
    type: 'formula',
    topic: 'External Reporting',
    subtopic: 'Cash Flow',
    blueprintArea: 'CMA1-A',
    front: 'How do you convert Net Income to Operating Cash Flow (Indirect Method)?',
    back: '**Cash Flow from Operations (Indirect):**\n\n**Start with Net Income**\n\n**Add Back Non-Cash Expenses:**\n+ Depreciation & Amortization\n+ Losses on asset sales\n+ Deferred tax expense\n\n**Subtract Non-Cash Gains:**\n- Gains on asset sales\n- Equity income (in excess of dividends)\n\n**Adjust for Working Capital Changes:**\n- Decrease in A/R, Inventory = Add\n- Increase in A/R, Inventory = Subtract\n- Decrease in A/P, Accruals = Subtract\n- Increase in A/P, Accruals = Add\n\n**Mnemonic for Current Assets:**\n"If asset goes up, cash goes down"',
    formula: 'CFO = NI + Non-Cash Exp - Non-Cash Gains ± ΔWC',
    difficulty: 'medium',
    tags: ['cash flow', 'indirect method', 'operating'],
  },
  {
    id: 'cma1-b4-045',
    section: 'CMA1',
    type: 'definition',
    topic: 'Performance Management',
    subtopic: 'Strategy',
    blueprintArea: 'CMA1-C',
    front: 'What is a Strategy Map and how does it relate to the Balanced Scorecard?',
    back: '**Strategy Map Definition:**\nVisual diagram showing cause-and-effect links between strategic objectives across BSC perspectives\n\n**Structure (bottom to top):**\n\n**Learning & Growth →**\n- Train employees, invest in systems\n↓ Leads to\n**Internal Process →**\n- Improve quality, reduce cycle time\n↓ Leads to\n**Customer →**\n- Higher satisfaction, loyalty\n↓ Leads to\n**Financial**\n- Revenue growth, profitability\n\n**Purpose:**\n- Shows HOW strategy creates value\n- Clarifies cause-and-effect relationships\n- Aligns organization around strategy\n- Communication tool\n\n**Key:** Arrows show hypothesized cause-effect links that can be tested',
    difficulty: 'medium',
    tags: ['strategy map', 'balanced scorecard', 'strategy'],
  },
  {
    id: 'cma1-b4-046',
    section: 'CMA1',
    type: 'comparison',
    topic: 'Cost Management',
    subtopic: 'Costing Methods',
    blueprintArea: 'CMA1-D',
    front: 'What is the difference between Absorption and Variable Costing income when inventory changes?',
    back: '**Absorption Costing:**\n- Includes ALL manufacturing costs in product cost\n- Fixed MOH is inventoried\n- Required for external reporting (GAAP)\n\n**Variable Costing:**\n- Only variable manufacturing costs in product cost\n- Fixed MOH is period expense\n- Used for internal decision-making\n\n**Income Difference:**\n\n**If Production > Sales (Inventory ↑):**\nAbsorption Income > Variable Income\n(Fixed OH deferred in inventory)\n\n**If Production < Sales (Inventory ↓):**\nVariable Income > Absorption Income\n(Prior period Fixed OH expensed)\n\n**If Production = Sales:**\nBoth methods give same income\n\n**Difference = ΔInventory × Fixed OH per unit**',
    comparison: {
      itemA: 'Absorption',
      itemB: 'Variable',
      differences: ['Fixed OH treatment', 'External vs. internal use', 'Income timing'],
    },
    difficulty: 'hard',
    tags: ['absorption', 'variable costing', 'income'],
  },
  {
    id: 'cma1-b4-047',
    section: 'CMA1',
    type: 'formula',
    topic: 'Technology',
    subtopic: 'Project Management',
    blueprintArea: 'CMA1-F',
    front: 'What is the Critical Path in project management?',
    back: '**Critical Path Definition:**\nThe longest path through a project network; determines minimum project duration\n\n**Characteristics:**\n- Activities on critical path have ZERO slack/float\n- Delay in critical activity = Delay in project\n- May be multiple critical paths\n\n**Calculation:**\n1. Forward Pass: Calculate Early Start (ES) and Early Finish (EF)\n   EF = ES + Duration\n\n2. Backward Pass: Calculate Late Start (LS) and Late Finish (LF)\n   LS = LF - Duration\n\n3. Slack = LS - ES or LF - EF\n   Activities with Slack = 0 are critical\n\n**CPM vs. PERT:**\n- CPM: Deterministic durations\n- PERT: Probabilistic (uses expected time)',
    formula: 'Slack = LS - ES = LF - EF; Critical Path: Slack = 0',
    difficulty: 'medium',
    tags: ['critical path', 'CPM', 'project management'],
  },
  {
    id: 'cma1-b4-048',
    section: 'CMA1',
    type: 'definition',
    topic: 'Internal Controls',
    subtopic: 'Audit',
    blueprintArea: 'CMA1-E',
    front: 'What is the role of Internal Audit vs. External Audit?',
    back: '**Internal Audit:**\n- Employed by the company\n- Reports to Audit Committee / Management\n- Scope: Broad (operations, compliance, risk, finance)\n- Focus: Improving operations, adding value\n- Standards: IIA Standards\n- Independence: From management, not company\n\n**External Audit:**\n- Independent CPA firm\n- Reports to shareholders (through Audit Committee)\n- Scope: Financial statements\n- Focus: Opinion on fair presentation\n- Standards: GAAS, PCAOB\n- Independence: From the company entirely\n\n**Relationship:**\n- External auditor may rely on internal audit work\n- Must assess internal audit competence and objectivity',
    comparison: {
      itemA: 'Internal Audit',
      itemB: 'External Audit',
      differences: ['Employment', 'Reporting', 'Primary focus'],
    },
    difficulty: 'easy',
    tags: ['internal audit', 'external audit', 'assurance'],
  },
  {
    id: 'cma1-b4-049',
    section: 'CMA1',
    type: 'formula',
    topic: 'Performance Management',
    subtopic: 'CVP Analysis',
    blueprintArea: 'CMA1-C',
    front: 'How do you calculate the Margin of Safety?',
    back: '**Margin of Safety:**\nMOS = Actual/Expected Sales - Breakeven Sales\n\n**Margin of Safety Ratio:**\nMOS% = (Actual Sales - BE Sales) / Actual Sales\n\n**Interpretation:**\n- MOS shows how much sales can drop before incurring a loss\n- Higher MOS = Lower risk\n- MOS% is comparable across companies\n\n**Example:**\nActual Sales: $500,000\nBreakeven Sales: $400,000\n\nMOS = $500,000 - $400,000 = $100,000\nMOS% = $100,000 / $500,000 = 20%\n\n→ Sales can decline 20% before company breaks even\n\n**Related:** Operating Leverage = CM / Operating Income = 1 / MOS%',
    formula: 'MOS = Actual - BE; MOS% = MOS / Actual Sales',
    difficulty: 'easy',
    tags: ['margin of safety', 'CVP', 'risk'],
  },
  {
    id: 'cma1-b4-050',
    section: 'CMA1',
    type: 'definition',
    topic: 'External Reporting',
    subtopic: 'Revenue Recognition',
    blueprintArea: 'CMA1-A',
    front: 'What is a Variable Consideration constraint under ASC 606?',
    back: '**Variable Consideration:**\nTransaction price that can vary due to discounts, rebates, refunds, incentives, bonuses, penalties, etc.\n\n**Estimation Methods:**\n1. **Expected Value:** Probability-weighted amounts (many similar contracts)\n2. **Most Likely Amount:** Single most likely outcome (binary outcomes)\n\n**Constraint:**\nInclude variable consideration in transaction price ONLY to the extent it is PROBABLE that a significant revenue reversal will NOT occur\n\n**Factors indicating constraint:**\n- Highly susceptible to external factors\n- Long time before resolved\n- Limited experience with similar contracts\n- Practice of offering concessions\n- Broad range of possible amounts\n\n**Update each reporting period**',
    difficulty: 'hard',
    tags: ['revenue recognition', 'variable consideration', 'ASC 606'],
    reference: 'ASC 606',
  },
  {
    id: 'cma1-b4-051',
    section: 'CMA1',
    type: 'formula',
    topic: 'Cost Management',
    subtopic: 'Spoilage',
    blueprintArea: 'CMA1-D',
    front: 'How do you account for Normal vs. Abnormal Spoilage?',
    back: '**Normal Spoilage:**\n- Inherent in production process\n- Within acceptable limits\n- PRODUCT COST: Allocated to good units\n- Reduces equivalent units for good output\n\n**Abnormal Spoilage:**\n- Exceeds normal limits\n- Controllable, should not occur\n- PERIOD COST: Expensed as loss\n- Separately identified on income statement\n\n**Calculation (Process Costing):**\n1. Determine spoilage inspection point\n2. Calculate equivalent units at inspection point\n3. Normal spoilage = Normal rate × Units inspected\n4. Abnormal spoilage = Total spoilage - Normal spoilage\n\n**Entry for Abnormal:**\nDr. Loss from Abnormal Spoilage\n    Cr. Work in Process',
    formula: 'Normal: Product cost; Abnormal: Period cost/loss',
    difficulty: 'hard',
    tags: ['spoilage', 'process costing', 'cost allocation'],
  },
  {
    id: 'cma1-b4-052',
    section: 'CMA1',
    type: 'comparison',
    topic: 'External Reporting',
    subtopic: 'Investments',
    blueprintArea: 'CMA1-A',
    front: 'How are investments in equity securities classified and accounted for?',
    back: '**Level of Influence:**\n\n**<20% Ownership: Fair Value (FV)**\n- No significant influence\n- Trading: FV through NI\n- Available-for-sale: FV through OCI (debt only now)\n- For equity: FV-NI (or practical expedient)\n\n**20-50% Ownership: Equity Method**\n- Significant influence\n- Initial: Investment at cost\n- Each period: + Share of NI, - Dividends received\n- "One-line consolidation"\n\n**>50% Ownership: Consolidation**\n- Control\n- Combine all assets, liabilities, revenues, expenses\n- Eliminate intercompany transactions\n- Non-controlling interest shown\n\n**Note:** 20% is guideline, not absolute rule; look at actual influence factors',
    comparison: {
      itemA: 'Equity Method (20-50%)',
      itemB: 'Consolidation (>50%)',
      differences: ['Presentation', 'Investment account', 'Income statement'],
    },
    difficulty: 'hard',
    tags: ['investments', 'equity method', 'consolidation'],
  },
  {
    id: 'cma1-b4-053',
    section: 'CMA1',
    type: 'definition',
    topic: 'Budgeting',
    subtopic: 'Standards',
    blueprintArea: 'CMA1-B',
    front: 'What are the different types of standard costs and when are they used?',
    back: '**Ideal (Theoretical) Standards:**\n- Maximum efficiency, no waste\n- Perfect conditions, no downtime\n- Rarely achievable\n- Use: Benchmarking, motivation (controversial)\n\n**Attainable (Practical) Standards:**\n- Challenging but achievable\n- Allows for normal inefficiencies\n- Tight but realistic\n- Use: Budgeting, performance evaluation (recommended)\n\n**Currently Attainable:**\n- Based on current conditions\n- Easily achievable with normal effort\n- May not drive improvement\n\n**Basic Standards:**\n- Set once, not revised\n- Show trends over time\n- Become outdated\n\n**Best Practice:** Attainable standards - motivating but realistic',
    difficulty: 'medium',
    tags: ['standard costs', 'budgeting', 'performance'],
  },
  {
    id: 'cma1-b4-054',
    section: 'CMA1',
    type: 'mnemonic',
    topic: 'Technology',
    subtopic: 'Cybersecurity',
    blueprintArea: 'CMA1-F',
    front: 'What is the NIST Cybersecurity Framework and its five core functions?',
    back: '**NIST CSF - Five Core Functions:**\n\n**Mnemonic: I.P.D.R.R.**\n\n**1. IDENTIFY:**\n- Asset management\n- Risk assessment\n- Governance\n\n**2. PROTECT:**\n- Access control\n- Data security\n- Training\n\n**3. DETECT:**\n- Continuous monitoring\n- Detection processes\n- Anomaly detection\n\n**4. RESPOND:**\n- Response planning\n- Communications\n- Mitigation\n\n**5. RECOVER:**\n- Recovery planning\n- Improvements\n- Communications\n\n**Use:** Framework for managing and reducing cybersecurity risk; widely adopted by organizations of all sizes',
    mnemonic: 'IPDRR (Identify, Protect, Detect, Respond, Recover)',
    difficulty: 'medium',
    tags: ['NIST', 'cybersecurity', 'framework'],
    reference: 'NIST CSF',
  },
  {
    id: 'cma1-b4-055',
    section: 'CMA1',
    type: 'formula',
    topic: 'Performance Management',
    subtopic: 'Productivity',
    blueprintArea: 'CMA1-C',
    front: 'How do you measure Total Factor Productivity (TFP)?',
    back: '**Total Factor Productivity:**\nTFP = Output / (Weighted Sum of All Inputs)\n\nOr: TFP = Output / (Labor Input + Capital Input + Material Input)\n\n**Partial Productivity Measures:**\n- Labor Productivity = Output / Labor Hours\n- Capital Productivity = Output / Capital Employed\n- Material Productivity = Output / Material Cost\n\n**TFP Advantages:**\n- Considers all inputs together\n- Shows overall efficiency\n- Useful for trend analysis\n\n**TFP Challenges:**\n- How to weight different inputs\n- How to measure output (units vs. $)\n- Quality adjustments\n\n**Productivity Change:**\nΔTFP = (TFP₁ / TFP₀) - 1',
    formula: 'TFP = Output / (Labor + Capital + Materials)',
    difficulty: 'medium',
    tags: ['productivity', 'efficiency', 'performance'],
  },
];
