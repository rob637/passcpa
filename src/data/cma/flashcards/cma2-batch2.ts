/**
 * CMA Part 2: Expanded Flashcards Batch 2
 * Strategic Financial Management - Additional Coverage
 * 60 additional flashcards covering all CMA2 blueprint areas
 */

import { CMAFlashcard } from './types';

export const CMA2_BATCH2: CMAFlashcard[] = [
  // ============================================
  // A: Financial Statement Analysis (20%)
  // ============================================
  {
    id: 'cma2-b2-008',
    section: 'CMA2',
    type: 'definition',
    topic: 'Financial Analysis',
    subtopic: 'Horizontal Analysis',
    blueprintArea: 'CMA2-A',
    front: 'What is Horizontal Analysis vs Vertical Analysis?',
    back: '**Horizontal (Trend) Analysis:**\n• Compares same items over time\n• Shows growth/decline trends\n• Uses base year (= 100%)\n\n**Vertical (Common-Size) Analysis:**\n• Each item as % of base\n• IS: % of Sales\n• BS: % of Total Assets\n• Facilitates cross-company comparison',
    difficulty: 'easy',
    tags: ['horizontal', 'vertical', 'common-size'],
  },
  {
    id: 'cma2-b2-009',
    section: 'CMA2',
    type: 'definition',
    topic: 'Financial Analysis',
    subtopic: 'Earnings Quality',
    blueprintArea: 'CMA2-A',
    front: 'What factors indicate high quality earnings?',
    back: '**High Quality Indicators:**\n• Cash flow > Net income\n• Recurring from operations\n• Conservative accounting choices\n• Low accruals ratio\n• Consistent with industry\n\n**Red Flags:**\n• Large gap between NI and CFO\n• Frequent non-recurring items\n• Complex related party transactions\n• Frequent accounting changes',
    difficulty: 'medium',
    tags: ['earnings quality', 'analysis'],
  },
  {
    id: 'cma2-b2-010',
    section: 'CMA2',
    type: 'formula',
    topic: 'Financial Analysis',
    subtopic: 'Market Ratios',
    blueprintArea: 'CMA2-A',
    front: 'What are key Market Value Ratios?',
    back: '**P/E Ratio:**\nStock Price ÷ EPS\n\n**P/B Ratio:**\nStock Price ÷ Book Value per Share\n\n**Dividend Yield:**\nAnnual Dividend ÷ Stock Price\n\n**Dividend Payout:**\nDividends ÷ Net Income\n\n**Market-to-Book:**\nMarket Cap ÷ Book Value of Equity',
    formula: 'P/E = Price / EPS\nDividend Yield = Div / Price',
    difficulty: 'easy',
    tags: ['market ratios', 'valuation'],
  },

  // ============================================
  // B: Corporate Finance (20%)
  // ============================================
  {
    id: 'cma2-b2-011',
    section: 'CMA2',
    type: 'formula',
    topic: 'Corporate Finance',
    subtopic: 'Time Value of Money',
    blueprintArea: 'CMA2-B',
    front: 'What are the key Time Value of Money formulas?',
    back: '**Future Value:**\nFV = PV × (1 + r)ⁿ\n\n**Present Value:**\nPV = FV ÷ (1 + r)ⁿ\n\n**Annuity PV:**\nPV = PMT × [(1 - (1+r)⁻ⁿ) / r]\n\n**Annuity FV:**\nFV = PMT × [((1+r)ⁿ - 1) / r]\n\n**Rule of 72:** Years to double ≈ 72 ÷ r%',
    formula: 'FV = PV(1+r)ⁿ\nPV = FV/(1+r)ⁿ',
    difficulty: 'medium',
    tags: ['TVM', 'present value', 'future value'],
  },
  {
    id: 'cma2-b2-013',
    section: 'CMA2',
    type: 'formula',
    topic: 'Corporate Finance',
    subtopic: 'Cost of Equity',
    blueprintArea: 'CMA2-B',
    front: 'What methods are used to calculate Cost of Equity?',
    back: '**1. CAPM:**\nRe = Rf + β(Rm - Rf)\n\n**2. Dividend Growth Model:**\nRe = (D₁ / P₀) + g\n\n**3. Bond Yield + Risk Premium:**\nRe = Bond yield + 3-5%\n\n**CAPM most common:**\n• Rf = Risk-free rate (T-bonds)\n• β = Stock beta\n• (Rm - Rf) = Market risk premium',
    formula: 'CAPM: Re = Rf + β(Rm - Rf)\nDGM: Re = D₁/P₀ + g',
    difficulty: 'hard',
    tags: ['cost of equity', 'CAPM'],
  },  // ============================================
  // C: Decision Analysis (25%)
  // ============================================
  {
    id: 'cma2-b2-023',
    section: 'CMA2',
    type: 'definition',
    topic: 'Decision Analysis',
    subtopic: 'Keep or Drop',
    blueprintArea: 'CMA2-C',
    front: 'How do you analyze a Keep or Drop Segment decision?',
    back: '**Keep if:**\nSegment CM > Avoidable Fixed Costs\n\n**Relevant Costs:**\n• Lost contribution margin\n• Avoidable fixed costs\n• Unavoidable fixed costs (excluded)\n\n**Consider:**\n• Impact on other segments\n• Customer perception\n• Employee/community impact\n• Barriers to exit',
    difficulty: 'medium',
    tags: ['keep or drop', 'segment'],
  },
  {
    id: 'cma2-b2-024',
    section: 'CMA2',
    type: 'definition',
    topic: 'Decision Analysis',
    subtopic: 'Sell or Process Further',
    blueprintArea: 'CMA2-C',
    front: 'How do you analyze a Sell or Process Further decision?',
    back: '**Process Further if:**\nIncremental Revenue > Incremental Cost\n\n**Key Point:**\nJoint costs are SUNK (irrelevant)\n\n**Compare:**\n• Revenue at split-off vs revenue after further processing\n• Costs incurred after split-off\n\n**Joint cost allocation never affects this decision**',
    difficulty: 'medium',
    tags: ['sell or process', 'joint costs'],
  },
  {
    id: 'cma2-b2-025',
    section: 'CMA2',
    type: 'definition',
    topic: 'Decision Analysis',
    subtopic: 'Constraint Analysis',
    blueprintArea: 'CMA2-C',
    front: 'How do you maximize profit with a scarce resource?',
    back: '**Rank products by CM per unit of constraint**\n\n**Steps:**\n1. Identify the binding constraint\n2. Calculate CM per unit of constraint\n3. Produce highest CM/constraint first\n4. Continue until constraint exhausted\n\n**Example constraint:** Machine hours, labor hours, raw materials',
    formula: 'CM per constraint = CM per unit / Units of constraint per unit',
    difficulty: 'hard',
    tags: ['constraint', 'scarce resource', 'TOC'],
  },
  {
    id: 'cma2-b2-027',
    section: 'CMA2',
    type: 'definition',
    topic: 'Decision Analysis',
    subtopic: 'Pricing Methods',
    blueprintArea: 'CMA2-C',
    front: 'What are the main pricing strategies?',
    back: '**Cost-Based:**\n• Cost-plus pricing\n• Target return pricing\n• Variable cost pricing\n\n**Market-Based:**\n• Competitive pricing\n• Target costing\n• Value-based pricing\n\n**Strategic:**\n• Penetration (low price, gain share)\n• Skimming (high price, new product)\n• Premium pricing',
    difficulty: 'medium',
    tags: ['pricing', 'strategy'],
  },
  {
    id: 'cma2-b2-028',
    section: 'CMA2',
    type: 'formula',
    topic: 'Decision Analysis',
    subtopic: 'Cost-Plus Pricing',
    blueprintArea: 'CMA2-C',
    front: 'How do you calculate Cost-Plus and Target Return prices?',
    back: '**Cost-Plus Pricing:**\nPrice = Total Cost × (1 + Markup %)\n\n**Target Return Pricing:**\nPrice = Total Cost + (Target Return × Investment) ÷ Units\n\n**Markup on Variable Cost:**\nMarkup = (Fixed Costs + Profit) ÷ Variable Costs',
    formula: 'Price = Cost × (1 + Markup)\nMarkup = (FC + Profit) / VC',
    difficulty: 'medium',
    tags: ['pricing', 'cost-plus'],
  },
  {
    id: 'cma2-b2-029',
    section: 'CMA2',
    type: 'definition',
    topic: 'Decision Analysis',
    subtopic: 'Decision Trees',
    blueprintArea: 'CMA2-C',
    front: 'How do you use Decision Trees for analysis?',
    back: '**Components:**\n• Decision nodes (squares)\n• Chance nodes (circles)\n• Branches (alternatives/outcomes)\n• End nodes (payoffs)\n\n**Solve backwards:**\n1. Calculate expected values at chance nodes\n2. Choose best option at decision nodes\n\n**Expected Value = Σ(Probability × Payoff)**',
    difficulty: 'medium',
    tags: ['decision tree', 'expected value'],
  },  // ============================================
  // D: Risk Management (10%)
  // ============================================
  {
    id: 'cma2-b2-033',
    section: 'CMA2',
    type: 'definition',
    topic: 'Risk Management',
    subtopic: 'Currency Risk',
    blueprintArea: 'CMA2-D',
    front: 'What are the types of currency exposure?',
    back: '**Transaction Exposure:**\nRisk on outstanding contracts in foreign currency\nHedge: Forwards, options\n\n**Translation Exposure:**\nRisk from converting subsidiary financials\nHedge: Balance sheet hedging\n\n**Economic Exposure:**\nLong-term competitive position risk\nHedge: Operational adjustments',
    difficulty: 'hard',
    tags: ['currency', 'foreign exchange'],
  },
  {
    id: 'cma2-b2-034',
    section: 'CMA2',
    type: 'definition',
    topic: 'Risk Management',
    subtopic: 'Interest Rate Risk',
    blueprintArea: 'CMA2-D',
    front: 'How can companies manage Interest Rate Risk?',
    back: '**Tools:**\n• Interest rate swaps (fixed ↔ floating)\n• Interest rate caps and floors\n• Forward rate agreements (FRAs)\n\n**Strategies:**\n• Match asset/liability durations\n• Ladder maturities\n• Diversify debt structure\n\n**Duration gap analysis** measures sensitivity',
    difficulty: 'hard',
    tags: ['interest rate', 'swaps'],
  },
  {
    id: 'cma2-b2-035',
    section: 'CMA2',
    type: 'definition',
    topic: 'Risk Management',
    subtopic: 'Credit Risk',
    blueprintArea: 'CMA2-D',
    front: 'How is Credit Risk managed?',
    back: '**Credit Analysis:**\n• 5 Cs: Character, Capacity, Capital, Collateral, Conditions\n• Credit scoring models\n• Financial statement analysis\n\n**Mitigation:**\n• Credit limits\n• Letters of credit\n• Credit insurance\n• Factoring\n• Collateral requirements\n\n**Monitor: Aging reports, DSO trends**',
    mnemonic: '5 Cs',
    difficulty: 'medium',
    tags: ['credit risk', '5 Cs'],
  },

  // ============================================
  // E: Investment Decisions (10%)
  // ============================================
  {
    id: 'cma2-b2-037',
    section: 'CMA2',
    type: 'definition',
    topic: 'Investment',
    subtopic: 'Capital Rationing',
    blueprintArea: 'CMA2-E',
    front: 'What is Capital Rationing and how is it addressed?',
    back: '**Definition:** Limited capital prevents accepting all positive NPV projects\n\n**Solutions:**\n1. Rank by Profitability Index\n2. Select combination maximizing total NPV\n3. Consider project dependencies\n\n**Hard rationing:** External limits\n**Soft rationing:** Internal budget constraints\n\nGoal: Maximize NPV given constraint',
    difficulty: 'medium',
    tags: ['capital rationing', 'NPV'],
  },
  {
    id: 'cma2-b2-038',
    section: 'CMA2',
    type: 'formula',
    topic: 'Investment',
    subtopic: 'Accounting Rate of Return',
    blueprintArea: 'CMA2-E',
    front: 'What is Accounting Rate of Return (ARR)?',
    back: '**ARR = Average Annual Accounting Income ÷ Average Investment**\n\nAverage Investment = (Initial + Ending) ÷ 2\n\n**Advantages:**\n• Simple to calculate\n• Uses familiar accounting numbers\n\n**Disadvantages:**\n• Ignores time value of money\n• Uses accounting income (not cash flow)\n• Ignores project life differences',
    formula: 'ARR = Avg Annual Income / Avg Investment',
    difficulty: 'easy',
    tags: ['ARR', 'accounting return'],
  },
  {
    id: 'cma2-b2-040',
    section: 'CMA2',
    type: 'formula',
    topic: 'Investment',
    subtopic: 'Lease vs Buy',
    blueprintArea: 'CMA2-E',
    front: 'How do you analyze a Lease vs Buy decision?',
    back: '**Compare After-Tax Present Values:**\n\n**Buy:**\n- Purchase price\n+ PV of depreciation tax shield\n- PV of after-tax operating costs\n+ PV of salvage value\n\n**Lease:**\n- PV of after-tax lease payments\n- PV of after-tax operating costs (if any)\n\n**Choose lower PV cost**',
    difficulty: 'hard',
    tags: ['lease', 'buy', 'finance lease'],
  },

  // ============================================
  // F: Professional Ethics (15%)
  // ============================================
  {
    id: 'cma2-b2-045',
    section: 'CMA2',
    type: 'definition',
    topic: 'Ethics',
    subtopic: 'Whistleblowing',
    blueprintArea: 'CMA2-F',
    front: 'What are key aspects of Whistleblower protections?',
    back: '**SOX Whistleblower Protection:**\n• Protects employees of public companies\n• Prohibits retaliation\n• Covers fraud reporting\n\n**Dodd-Frank:**\n• SEC bounty program (10-30% of sanctions)\n• Extended protections\n\n**Best Practice:**\n• Anonymous hotlines\n• Clear reporting channels\n• Non-retaliation policy',
    difficulty: 'medium',
    tags: ['whistleblower', 'SOX'],
  },

  // ============================================
  // Additional Finance/Valuation Cards
  // ============================================
  {
    id: 'cma2-b2-049',
    section: 'CMA2',
    type: 'definition',
    topic: 'Corporate Finance',
    subtopic: 'M&A',
    blueprintArea: 'CMA2-B',
    front: 'What are reasons for Mergers and Acquisitions?',
    back: '**Strategic Reasons:**\n• Synergies (cost savings, revenue enhancement)\n• Market share/power\n• Diversification\n• Vertical integration\n• Geographic expansion\n\n**Financial Reasons:**\n• Tax benefits\n• Undervalued target\n• Improved financing capacity\n\n**Value Creation: Synergy > Premium Paid**',
    difficulty: 'medium',
    tags: ['M&A', 'mergers', 'acquisitions'],
  },
  {
    id: 'cma2-b2-050',
    section: 'CMA2',
    type: 'definition',
    topic: 'Corporate Finance',
    subtopic: 'Valuation Methods',
    blueprintArea: 'CMA2-B',
    front: 'What are the main business Valuation Methods?',
    back: '**1. Income Approach:**\n• DCF (discounted cash flow)\n• Capitalized earnings\n\n**2. Market Approach:**\n• Comparable companies (trading multiples)\n• Comparable transactions (M&A multiples)\n\n**3. Asset Approach:**\n• Adjusted book value\n• Liquidation value\n\n**Best practice:** Use multiple methods',
    difficulty: 'medium',
    tags: ['valuation', 'DCF', 'comparables'],
  },

  // ============================================
  // Additional Analysis Cards
  // ============================================  // ============================================
  // Additional Strategy/Risk Cards
  // ============================================
  {
    id: 'cma2-b2-056',
    section: 'CMA2',
    type: 'definition',
    topic: 'Strategy',
    subtopic: 'SWOT Analysis',
    blueprintArea: 'CMA2-D',
    front: 'What is SWOT Analysis?',
    back: '**Internal Factors:**\n• **S**trengths - Competitive advantages\n• **W**eaknesses - Areas for improvement\n\n**External Factors:**\n• **O**pportunities - Market potential\n• **T**hreats - Competitive/market risks\n\n**Use:** Strategic planning, competitive analysis\n\nMatch strengths to opportunities; address weaknesses/threats',
    mnemonic: 'SWOT',
    difficulty: 'easy',
    tags: ['SWOT', 'strategic analysis'],
  },
  {
    id: 'cma2-b2-057',
    section: 'CMA2',
    type: 'definition',
    topic: 'Strategy',
    subtopic: 'Porter\'s 5 Forces',
    blueprintArea: 'CMA2-D',
    front: 'What are Porter\'s Five Forces?',
    back: '**Industry Competitive Forces:**\n\n1. **Rivalry** among existing competitors\n2. **Threat of new entrants**\n3. **Threat of substitutes**\n4. **Bargaining power of suppliers**\n5. **Bargaining power of buyers**\n\n**Use:** Industry attractiveness analysis\n\nMore forces = Lower profitability potential',
    difficulty: 'easy',
    tags: ['Porter', 'five forces', 'industry analysis'],
  },
  {
    id: 'cma2-b2-058',
    section: 'CMA2',
    type: 'definition',
    topic: 'Strategy',
    subtopic: 'Generic Strategies',
    blueprintArea: 'CMA2-D',
    front: 'What are Porter\'s Generic Competitive Strategies?',
    back: '**1. Cost Leadership**\nLowest cost producer; broad market\n\n**2. Differentiation**\nUnique products/services; premium pricing\n\n**3. Focus (Cost or Differentiation)**\nNarrow market segment\n\n**Stuck in the Middle:**\nNo clear strategy = Below-average returns\n\nChoose ONE primary strategy',
    difficulty: 'medium',
    tags: ['strategy', 'Porter', 'differentiation'],
  },
  {
    id: 'cma2-b2-059',
    section: 'CMA2',
    type: 'definition',
    topic: 'Risk',
    subtopic: 'Scenario Planning',
    blueprintArea: 'CMA2-D',
    front: 'What is Scenario Planning for risk management?',
    back: '**Process:**\n1. Identify key uncertainties\n2. Develop multiple plausible scenarios\n3. Analyze implications of each\n4. Develop contingency plans\n5. Monitor for scenario triggers\n\n**Common Scenarios:**\n• Best case / Worst case / Most likely\n• Specific event scenarios (recession, disruption)\n\nDevelops organizational resilience',
    difficulty: 'medium',
    tags: ['scenario planning', 'risk'],
  },
  {
    id: 'cma2-b2-060',
    section: 'CMA2',
    type: 'definition',
    topic: 'Ethics',
    subtopic: 'Sustainability',
    blueprintArea: 'CMA2-F',
    front: 'What is ESG and Sustainability Reporting?',
    back: '**ESG = Environmental, Social, Governance**\n\n**Environmental:**\nCarbon emissions, energy, waste, water\n\n**Social:**\nLabor practices, diversity, community\n\n**Governance:**\nBoard diversity, ethics, executive pay\n\n**Frameworks:**\n• GRI (Global Reporting Initiative)\n• SASB\n• TCFD (climate)\n\nIncreasing investor and stakeholder focus',
    difficulty: 'medium',
    tags: ['ESG', 'sustainability', 'CSR'],
  },
];
