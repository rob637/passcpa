// AUD - Auditing and Attestation Additional Questions
// 2026 CPA Exam Blueprint Compliant
// Extended question bank for comprehensive coverage

import { Question } from '../../../types';

export const AUD_QUESTIONS_ADDITIONAL: Question[] = [
  // ==========================================
  // AREA I: Professional Responsibilities and Ethics
  // ==========================================

  {
    id: 'aud-add-001',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-ethics',
    topic: 'Professional Ethics',
    subtopic: 'Independence',
    difficulty: 'medium',
    blueprintArea: 'AUD-I',
    skillLevel: 'Application',
    question: 'Under the AICPA Code of Professional Conduct, independence is impaired if a covered member:',
    options: [
      'Owns stock in a mutual fund that invests in the client',
      'Has a family member employed in a non-influential position at the client',
      'Provides tax services to the client',
      'Has a direct financial interest of any amount in an attest client',
    ],
    correctAnswer: 3,
    explanation: 'Any direct financial interest, regardless of amount, impairs independence. Indirect interests through mutual funds are generally allowed if not material. Certain services and family relationships may be permissible depending on the role.',
    reference: 'AICPA Code ET §1.240',
  },
  {
    id: 'aud-add-002',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-ethics',
    topic: 'Professional Ethics',
    subtopic: 'Confidentiality',
    difficulty: 'easy',
    blueprintArea: 'AUD-I',
    skillLevel: 'Remembering and Understanding',
    question: 'The confidentiality principle prohibits disclosure of client information EXCEPT:',
    options: [
      'When compelled by legal process or permitted by professional standards',
      'To competitors of the client',
      'To the press for newsworthy matters',
      'To any interested third party',
    ],
    correctAnswer: 0,
    explanation: 'Confidentiality exceptions include: client consent, legal subpoena/summons, professional body quality review, AICPA/state board ethics investigations, and certain successor auditor inquiries.',
    reference: 'AICPA Code ET §1.700',
  },
  {
    id: 'aud-add-003',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-ethics',
    topic: 'Quality Management',
    subtopic: 'SQMS',
    difficulty: 'hard',
    blueprintArea: 'AUD-I',
    skillLevel: 'Analysis',
    question: 'Under SQMS No. 1, a firm\'s system of quality management must include:',
    options: [
      'Client acceptance procedures only',
      'Annual peer review only',
      'Eight interrelated components including governance, risk assessment, and monitoring',
      'Only engagement performance policies',
    ],
    correctAnswer: 2,
    explanation: 'SQMS 1 requires eight components: (1) governance/leadership, (2) ethical requirements, (3) acceptance/continuance, (4) engagement performance, (5) resources, (6) information/communication, (7) monitoring/remediation, (8) risk assessment process.',
    reference: 'SQMS No. 1',
  },

  // ==========================================
  // AREA II: Risk Assessment and Planning
  // ==========================================

  {
    id: 'aud-add-004',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-risk',
    topic: 'Risk Assessment',
    subtopic: 'Audit Risk Model',
    difficulty: 'medium',
    blueprintArea: 'AUD-II',
    skillLevel: 'Application',
    question: 'The audit risk model states that Audit Risk equals:',
    options: [
      'Material Misstatement Risk × Detection Risk',
      'Business Risk × Engagement Risk',
      'Inherent Risk × Control Risk × Detection Risk',
      'Inherent Risk + Control Risk + Detection Risk',
    ],
    correctAnswer: 2,
    explanation: 'AR = IR × CR × DR. Inherent and control risk are combined as "risk of material misstatement" (RMM). The auditor assesses RMM and then sets detection risk to achieve an acceptably low audit risk.',
    reference: 'AU-C 200.A43',
  },
  {
    id: 'aud-add-005',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-risk',
    topic: 'Risk Assessment',
    subtopic: 'Understanding the Entity',
    difficulty: 'medium',
    blueprintArea: 'AUD-II',
    skillLevel: 'Application',
    question: 'Risk assessment procedures include:',
    options: [
      'Physical examination only',
      'Confirmation and recalculation',
      'Inquiries, analytical procedures, and observation/inspection',
      'Tests of controls and substantive procedures',
    ],
    correctAnswer: 2,
    explanation: 'Risk assessment procedures are performed to understand the entity and assess RMM. They include: inquiries of management/others, analytical procedures, and observation/inspection. These are distinct from tests of controls or substantive tests.',
    reference: 'AU-C 315',
  },
  {
    id: 'aud-add-006',
    courseId: 'cpa',
    section: 'AUD',
    blueprintArea: 'AUD-II',
    topic: 'Planning',
    subtopic: 'Materiality',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An auditor is assessing materiality for a mining company that has been profitable for 3 years but is expected to report a loss this year. What is the most appropriate benchmark for determining overall materiality?',
    options: [
      '5% of expected pretax loss',
      '5% of pretax income from normal operations averaged over 3 years',
      '1% of total revenues',
      'Materiality cannot be determined for a loss-making entity',
    ],
    correctAnswer: 2,
    explanation: 'When income is volatile or a loss is expected, income-based benchmarks become unreliable. Auditors typically use alternative benchmarks such as total revenue (0.5%–1%), total assets (0.5%–1%), or normalized earnings. Using a percentage of the loss could produce an unreasonable materiality amount. Revenue provides a more stable base for entities with fluctuating or negative earnings.',
    reference: 'AU-C 320.A12',
  },

  // ==========================================
  // AREA III: Evidence and Procedures
  // ==========================================

  {
    id: 'aud-add-007',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-evidence',
    topic: 'Audit Evidence',
    subtopic: 'Relevance and Reliability',
    difficulty: 'medium',
    blueprintArea: 'AUD-III',
    skillLevel: 'Application',
    question: 'Audit evidence is generally more reliable when:',
    options: [
      'It is obtained from internal sources in a strong control environment',
      'It is obtained directly from independent external sources',
      'It is generated by the client\'s IT system without controls',
      'It is obtained orally from management',
    ],
    correctAnswer: 1,
    explanation: 'Reliability hierarchy: (1) external evidence > internal, (2) effective controls increase internal reliability, (3) auditor-obtained > client-provided, (4) documentary > oral, (5) original > copies.',
    reference: 'AU-C 500.A31',
  },
  {
    id: 'aud-add-008',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-evidence',
    topic: 'Audit Evidence',
    subtopic: 'Confirmation',
    difficulty: 'hard',
    blueprintArea: 'AUD-III',
    skillLevel: 'Analysis',
    question: 'When using negative confirmations:',
    options: [
      'All accounts must be confirmed',
      'They are appropriate only when inherent risk is high',
      'Non-response indicates agreement with the stated balance',
      'Responses provide the same level of evidence as positive confirmations',
    ],
    correctAnswer: 2,
    explanation: 'Negative confirmations ask respondents to reply only if they disagree. Non-response is treated as implicit confirmation. They provide less evidence than positive and are appropriate when: (1) RMM is low, (2) many small balances, (3) no reason to expect recipients to ignore them.',
    reference: 'AU-C 505',
  },
  {
    id: 'aud-add-009',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-evidence',
    topic: 'Substantive Procedures',
    subtopic: 'Substantive Analytics',
    difficulty: 'hard',
    blueprintArea: 'AUD-III',
    skillLevel: 'Analysis',
    question: 'Substantive analytical procedures are most effective when:',
    options: [
      'The account balance is immaterial',
      'A plausible and predictable relationship exists in the data',
      'Control risk is assessed at maximum',
      'The relationship tested is unpredictable',
    ],
    correctAnswer: 1,
    explanation: 'Substantive analytics work best when: (1) plausible, predictable relationships exist, (2) reliable data is used, (3) the expectation is precise enough to identify misstatements. Examples: interest expense based on debt, depreciation based on assets.',
    reference: 'AU-C 520',
  },

  // ==========================================
  // AREA IV: Internal Control
  // ==========================================

  {
    id: 'aud-add-010',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-controls',
    topic: 'Internal Control',
    subtopic: 'COSO Framework',
    difficulty: 'medium',
    blueprintArea: 'AUD-IV',
    skillLevel: 'Application',
    question: 'The five components of internal control under the COSO framework are:',
    options: [
      'Control Environment, Risk Assessment, Control Activities, Information/Communication, Monitoring',
      'Authorization, Recording, Custody, Reconciliation, Verification',
      'Ethics, Governance, Compliance, Operations, Reporting',
      'Planning, Risk, Testing, Reporting, Communication',
    ],
    correctAnswer: 0,
    explanation: 'COSO\'s five components: (1) Control Environment (tone at top), (2) Risk Assessment, (3) Control Activities, (4) Information & Communication, (5) Monitoring Activities. All five must be present and functioning for effective internal control.',
    reference: 'COSO Internal Control Framework',
  },
  {
    id: 'aud-add-011',
    courseId: 'cpa',
    section: 'AUD',
    blueprintArea: 'AUD-IV',
    topic: 'Internal Control',
    subtopic: 'Control Deficiencies',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An auditor discovers that the controller can both record journal entries and approve them without independent review. During testing, the auditor finds $300,000 in unusual year-end entries. If overall materiality is $250,000, how should the auditor report this internal control issue?',
    options: [
      'Significant deficiency — the segregation issue creates risk but doesn\'t guarantee misstatement',
      'Material weakness — the combination of a control gap and material unusual entries indicates a reasonable possibility that a material misstatement would not be detected',
      'No reportable condition because the entries were recorded correctly',
      'Management letter comment only',
    ],
    correctAnswer: 1,
    explanation: 'A material weakness exists when a reasonable possibility exists that a material misstatement would not be prevented or detected on a timely basis. Here, the lack of segregation (controller approving own entries) combined with $300,000 in unusual entries exceeding materiality creates this condition. Both the control deficiency and evidence of its exploitation elevate this beyond a significant deficiency.',
    reference: 'AU-C 265',
  },
  {
    id: 'aud-add-012',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-controls',
    topic: 'Tests of Controls',
    subtopic: 'Dual-Purpose Tests',
    difficulty: 'medium',
    blueprintArea: 'AUD-IV',
    skillLevel: 'Application',
    question: 'An auditor performs a dual-purpose test on sales transactions: testing the control over proper authorization of credit sales AND testing the accuracy of recorded sales amounts. If the auditor finds an unauthorized credit sale where the amount is correctly recorded, what does this affect?',
    options: [
      'Both the control test and the substantive test yield exceptions',
      'Only the control test yields an exception; the substantive test does not because the amount is correct',
      'Only the substantive test yields an exception',
      'Neither test yields an exception because the sale was legitimate',
    ],
    correctAnswer: 1,
    explanation: 'A dual-purpose test simultaneously evaluates a control (authorization) and a substantive assertion (accuracy). An unauthorized sale is a control deviation — the authorization control failed. However, since the amount was recorded correctly, the substantive test of accuracy shows no misstatement. The results are evaluated separately.',
    reference: 'AU-C 330.A26',
  },

  // ==========================================
  // AREA V: Reporting
  // ==========================================

  {
    id: 'aud-add-013',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-reporting',
    topic: 'Audit Reports',
    subtopic: 'Unmodified Opinion',
    difficulty: 'easy',
    blueprintArea: 'AUD-IV',
    skillLevel: 'Remembering and Understanding',
    question: 'An unmodified audit opinion states that the financial statements are:',
    options: [
      'Guaranteed to be accurate',
      'Free from all misstatements',
      'Completely free from error',
      'Presented fairly, in all material respects, in accordance with the applicable framework',
    ],
    correctAnswer: 3,
    explanation: 'An unmodified opinion provides reasonable (not absolute) assurance that statements are free from material misstatement. "Present fairly, in all material respects" is the key phrase - materiality is inherent in the opinion.',
    reference: 'AU-C 700',
  },
  {
    id: 'aud-add-014',
    courseId: 'cpa',
    section: 'AUD',
    blueprintArea: 'AUD-IV',
    topic: 'Audit Reports',
    subtopic: 'Modified Opinions',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A company refuses to disclose a material related-party transaction in the notes. The financial statements are otherwise fairly presented. What type of audit opinion should the auditor issue?',
    options: [
      'Unqualified with an emphasis-of-matter paragraph',
      'Qualified opinion due to a departure from GAAP',
      'Adverse opinion because the missing disclosure is pervasive',
      'Disclaimer of opinion due to scope limitation',
    ],
    correctAnswer: 1,
    explanation: 'Failure to disclose a material related-party transaction is a departure from GAAP (ASC 850 requires disclosure). If the auditor determines the omission is material but not pervasive, a qualified opinion is appropriate. If pervasive (e.g., the transaction fundamentally affects the user\'s understanding), an adverse opinion would be required. A scope limitation would be inappropriate because the auditor has the information—the issue is the client\'s refusal to disclose.',
    reference: 'AU-C 705',
  },
  {
    id: 'aud-add-015',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-reporting',
    topic: 'Audit Reports',
    subtopic: 'Going Concern',
    difficulty: 'hard',
    blueprintArea: 'AUD-IV',
    skillLevel: 'Evaluation',
    question: 'When substantial doubt about going concern exists and is adequately disclosed:',
    options: [
      'A qualified opinion is always required',
      'An adverse opinion is required',
      'The auditor must withdraw from the engagement',
      'An unmodified opinion with an emphasis-of-matter paragraph may be issued',
    ],
    correctAnswer: 3,
    explanation: 'If management\'s plans alleviate the doubt, no modification is needed. If substantial doubt remains after considering management\'s plans, an unmodified opinion with an emphasis-of-matter paragraph is appropriate if disclosure is adequate. Inadequate disclosure = qualified or adverse.',
    reference: 'AU-C 570',
  },

  // ==========================================
  // Additional Comprehensive Coverage
  // ==========================================

  {
    id: 'aud-add-016',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-evidence',
    topic: 'Sampling',
    subtopic: 'Attribute Sampling',
    difficulty: 'hard',
    blueprintArea: 'AUD-III',
    skillLevel: 'Analysis',
    question: 'In attribute sampling for tests of controls, the primary objective is to:',
    options: [
      'Calculate the misstatement in the account',
      'Identify all errors',
      'Estimate the rate of deviation from a prescribed control',
      'Estimate a dollar amount',
    ],
    correctAnswer: 2,
    explanation: 'Attribute sampling tests compliance with controls and estimates the deviation rate. If sample deviation rate exceeds tolerable deviation rate, the auditor may not rely on the control. Variables sampling is used for dollar amounts.',
    reference: 'AU-C 530',
  },
  {
    id: 'aud-add-017',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-evidence',
    topic: 'Sampling',
    subtopic: 'Nonstatistical Sampling',
    difficulty: 'medium',
    blueprintArea: 'AUD-III',
    skillLevel: 'Application',
    question: 'Nonstatistical sampling differs from statistical sampling primarily in:',
    options: [
      'Requiring a larger sample size',
      'Not allowing any professional judgment',
      'Being less acceptable under auditing standards',
      'Not allowing the auditor to quantify sampling risk',
    ],
    correctAnswer: 3,
    explanation: 'Both statistical and nonstatistical sampling are acceptable. The key difference is that nonstatistical sampling doesn\'t allow mathematical quantification of sampling risk. Professional judgment is used instead.',
    reference: 'AU-C 530.05',
  },
  {
    id: 'aud-add-018',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-fraud',
    topic: 'Fraud',
    subtopic: 'Fraud Risk Factors',
    difficulty: 'medium',
    blueprintArea: 'AUD-II',
    skillLevel: 'Application',
    question: 'An auditor assessing fraud risk identifies the following conditions at a retail client: declining industry sales, high executive compensation tied to revenue targets, and the CFO was recently denied a request for additional finance staff. Which elements of the fraud triangle do these conditions represent?',
    options: [
      'All three represent pressure/incentive only',
      'Pressure (compensation tied to targets), opportunity (understaffed finance department), but no rationalization factor',
      'Incentive (revenue-based compensation, declining sales), opportunity (understaffing in finance), but rationalization must be inferred from other evidence',
      'These are not fraud risk factors',
    ],
    correctAnswer: 2,
    explanation: 'The fraud triangle requires incentive/pressure, opportunity, and rationalization. Declining industry + revenue-tied compensation = strong incentive. Understaffed finance = opportunity (fewer people reviewing transactions). Rationalization is typically the hardest element to observe directly — it exists in the mind of the perpetrator and is often inferred from circumstances.',
    reference: 'AU-C 240',
  },
  {
    id: 'aud-add-019',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-fraud',
    topic: 'Fraud',
    subtopic: 'Revenue Recognition',
    difficulty: 'hard',
    blueprintArea: 'AUD-II',
    skillLevel: 'Analysis',
    question: 'Under AU-C 240, the auditor must:',
    options: [
      'Test every revenue transaction',
      'Assume revenue recognition is never a fraud risk',
      'Only consider fraud if management admits to it',
      'Presume there are fraud risks related to revenue recognition unless rebutted',
    ],
    correctAnswer: 3,
    explanation: 'There is a presumed fraud risk related to revenue recognition. The auditor must document how this presumption was addressed - either the specific response or why the presumption was overcome (rebutted) in the circumstances.',
    reference: 'AU-C 240.27',
  },
  {
    id: 'aud-add-020',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-special',
    topic: 'Special Considerations',
    subtopic: 'Related Parties',
    difficulty: 'hard',
    blueprintArea: 'AUD-III',
    skillLevel: 'Analysis',
    question: 'When auditing related party transactions, the auditor should:',
    options: [
      'Evaluate whether they are properly accounted for and disclosed',
      'Ignore transactions with subsidiaries',
      'Only consider transactions over $1 million',
      'Accept management\'s assertions without testing',
    ],
    correctAnswer: 0,
    explanation: 'The auditor must: (1) understand the entity\'s related party relationships/transactions, (2) evaluate if they\'re appropriately accounted for, (3) assess if disclosures are complete and accurate.',
    reference: 'AU-C 550',
  },
  {
    id: 'aud-add-021',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-special',
    topic: 'Special Considerations',
    subtopic: 'Estimates',
    difficulty: 'hard',
    blueprintArea: 'AUD-III',
    skillLevel: 'Analysis',
    question: 'When auditing accounting estimates, the auditor should focus on:',
    options: [
      'Historical accuracy of prior estimates',
      'Estimation uncertainty, management bias, and how the estimate was developed',
      'Only estimates over materiality',
      'Whether management used the most conservative estimate',
    ],
    correctAnswer: 1,
    explanation: 'The auditor evaluates: (1) how management developed the estimate (methods, data, assumptions), (2) potential management bias, (3) estimation uncertainty. Retrospective review of prior estimates may indicate bias.',
    reference: 'AU-C 540',
  },
  {
    id: 'aud-add-022',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-special',
    topic: 'Special Considerations',
    subtopic: 'Using Specialists',
    difficulty: 'medium',
    blueprintArea: 'AUD-III',
    skillLevel: 'Application',
    question: 'When using the work of an auditor\'s specialist:',
    options: [
      'Specialist work cannot be used for complex areas',
      'The auditor remains responsible for the opinion but evaluates the adequacy of the specialist\'s work',
      'The specialist must be an employee of the firm',
      'The auditor may shift responsibility for the opinion to the specialist',
    ],
    correctAnswer: 1,
    explanation: 'The auditor retains full responsibility for the opinion. The auditor must: evaluate the specialist\'s competence/objectivity, understand the field, and evaluate if the work is adequate for the auditor\'s purposes.',
    reference: 'AU-C 620',
  },
  {
    id: 'aud-add-023',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-reporting',
    topic: 'Other Reporting',
    subtopic: 'Review Engagements',
    difficulty: 'medium',
    blueprintArea: 'AUD-IV',
    skillLevel: 'Application',
    question: 'An auditor observes that a client recognizes revenue from a long-term construction contract using the percentage-of-completion method. The project is 60% complete based on costs incurred. Which assertion is the auditor primarily testing when verifying the percentage of completion?',
    options: [
      'Existence of the construction contract',
      'Valuation and allocation — whether the percentage complete and resulting revenue recognition are accurately measured',
      'Presentation and disclosure of the contract',
      'Rights and obligations under the contract',
    ],
    correctAnswer: 1,
    explanation: 'When testing percentage-of-completion revenue recognition, the primary assertion is valuation and allocation — whether costs incurred to date, total estimated costs, and the resulting completion percentage are accurately measured. This directly determines the amount of revenue and profit recognized.',
    reference: 'AR-C 90',
  },
  {
    id: 'aud-add-024',
    courseId: 'cpa',
    section: 'AUD',
    blueprintArea: 'AUD-IV',
    topic: 'Other Reporting',
    subtopic: 'Compilation Engagements',
    difficulty: 'easy',
    skillLevel: 'Remembering and Understanding',
    question: 'A CPA performs a compilation engagement and discovers that the client\'s financial statements omit substantially all disclosures required by GAAP. The client does not want to add disclosures. What should the CPA do?',
    options: [
      'Withdraw from the engagement',
      'Issue the compilation report with a paragraph noting the omission, provided the omission is not intended to mislead users',
      'Issue a qualified opinion on the financial statements',
      'Add the disclosures without the client\'s permission',
    ],
    correctAnswer: 1,
    explanation: 'AR-C 80.21 permits a CPA to compile financial statements that omit substantially all disclosures provided: (1) the omission is clearly indicated in the report, (2) the omission is not, to the CPA\'s knowledge, undertaken to mislead users, and (3) the report includes a paragraph stating that substantially all disclosures have been omitted.',
    reference: 'AR-C 80',
  },
  {
    id: 'aud-add-025',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-reporting',
    topic: 'Other Reporting',
    subtopic: 'Attestation',
    difficulty: 'hard',
    blueprintArea: 'AUD-IV',
    skillLevel: 'Analysis',
    question: 'Under the attestation standards (AT-C), which service provides reasonable assurance?',
    options: [
      'Review',
      'Examination',
      'Compilation',
      'Agreed-upon procedures',
    ],
    correctAnswer: 1,
    explanation: 'Examination = reasonable assurance (like an audit). Review = limited assurance. Agreed-upon procedures = no assurance, just report findings. Attestation applies to subject matter beyond financial statements (compliance, internal control, etc.).',
    reference: 'AT-C 105',
  },

  // More coverage
  {
    id: 'aud-add-026',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-risk',
    topic: 'Planning',
    subtopic: 'Engagement Quality',
    difficulty: 'medium',
    blueprintArea: 'AUD-II',
    skillLevel: 'Application',
    question: 'An engagement quality reviewer:',
    options: [
      'Is required for all engagements',
      'Replaces the engagement partner',
      'Reviews the engagement team\'s significant judgments before report issuance',
      'Prepares all audit documentation',
    ],
    correctAnswer: 2,
    explanation: 'EQR is required for certain engagements (audits of public companies, high-risk engagements). The EQR evaluates significant judgments, conclusions, and the proposed report. Report cannot be dated until EQR is complete.',
    reference: 'SQMS No. 2',
  },
  {
    id: 'aud-add-027',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-controls',
    topic: 'IT Controls',
    subtopic: 'General Controls',
    difficulty: 'hard',
    blueprintArea: 'AUD-IV',
    skillLevel: 'Analysis',
    question: 'IT general controls (ITGCs) typically include:',
    options: [
      'Manual approval controls',
      'Controls over access security, change management, and operations',
      'Application-specific edit checks',
      'Input validation controls only',
    ],
    correctAnswer: 1,
    explanation: 'ITGCs are pervasive controls supporting IT-dependent controls. They include: logical access, change management, program development, system operations, and backup/recovery. They affect all applications on that system.',
    reference: 'AU-C 315 Appendix',
  },
  {
    id: 'aud-add-028',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-evidence',
    topic: 'Documentation',
    subtopic: 'Audit Documentation',
    difficulty: 'medium',
    blueprintArea: 'AUD-III',
    skillLevel: 'Application',
    question: 'Audit documentation should be:',
    options: [
      'As brief as possible',
      'Sufficient to enable an experienced auditor to understand the work performed and conclusions reached',
      'Prepared only for high-risk areas',
      'Destroyed immediately after report issuance',
    ],
    correctAnswer: 1,
    explanation: 'Documentation must enable an experienced auditor with no connection to the engagement to understand: procedures performed, evidence obtained, conclusions reached. Retention is 5 years (SEC) or per state board (others).',
    reference: 'AU-C 230',
  },
  {
    id: 'aud-add-029',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-special',
    topic: 'Group Audits',
    subtopic: 'Component Auditors',
    difficulty: 'hard',
    blueprintArea: 'AUD-III',
    skillLevel: 'Analysis',
    question: 'When using the work of component auditors, the group auditor:',
    options: [
      'Remains solely responsible but determines the extent of involvement in component auditors\' work',
      'Has no responsibility for component financial information',
      'Must re-perform all component auditor work',
      'Shares responsibility equally with component auditors',
    ],
    correctAnswer: 0,
    explanation: 'The group auditor is solely responsible for the opinion but determines involvement based on: significance of components, component auditor independence/competence, and group-level risks.',
    reference: 'AU-C 600',
  },
  {
    id: 'aud-add-030',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-reporting',
    topic: 'Audit Reports',
    subtopic: 'Comparative Statements',
    difficulty: 'medium',
    blueprintArea: 'AUD-IV',
    skillLevel: 'Application',
    question: 'When comparative financial statements are presented and the prior period was audited by a predecessor:',
    options: [
      'The current auditor may indicate the predecessor audited the prior period in an other-matter paragraph',
      'The current auditor must re-audit the prior period',
      'Comparative statements cannot be presented',
      'The predecessor\'s report must be reissued',
    ],
    correctAnswer: 0,
    explanation: 'Options: (1) predecessor reissues their report, or (2) current auditor mentions in an other-matter paragraph that the prior period was audited by another auditor, the date of that report, the opinion type, and any modifications.',
    reference: 'AU-C 700.A58',
  },

  // Additional questions for comprehensive coverage
  {
    id: 'aud-add-031',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-evidence',
    topic: 'Audit Evidence',
    subtopic: 'External Confirmation',
    difficulty: 'medium',
    blueprintArea: 'AUD-III',
    skillLevel: 'Application',
    question: 'Maintaining control over external confirmations means:',
    options: [
      'Letting the client prepare and send them',
      'Using only electronic confirmations',
      'Selecting the items to confirm, sending the request, and receiving responses directly',
      'Sending them through the client',
    ],
    correctAnswer: 2,
    explanation: 'The auditor must control the confirmation process: determine what to confirm, prepare and send requests, and receive responses directly. This minimizes client interception or alteration.',
    reference: 'AU-C 505',
  },
  {
    id: 'aud-add-032',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-ethics',
    topic: 'Professional Ethics',
    subtopic: 'Non-Audit Services',
    difficulty: 'hard',
    blueprintArea: 'AUD-I',
    skillLevel: 'Analysis',
    question: 'Under SEC rules, an auditor providing non-audit services to an audit client:',
    options: [
      'Has no restrictions',
      'Is prohibited from certain services and must have audit committee pre-approval for permitted services',
      'Must only obtain management approval',
      'Can provide any service with audit committee approval',
    ],
    correctAnswer: 1,
    explanation: 'SOX prohibits certain services (bookkeeping, financial system design, certain valuations, internal audit outsourcing, management functions). Permitted non-audit services require audit committee pre-approval.',
    reference: 'SOX Section 201',
  },
  {
    id: 'aud-add-033',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-reporting',
    topic: 'Communications',
    subtopic: 'Management Letter',
    difficulty: 'medium',
    blueprintArea: 'AUD-IV',
    skillLevel: 'Application',
    question: 'The auditor is required to communicate in writing to those charged with governance:',
    options: [
      'All control deficiencies regardless of significance',
      'Only material weaknesses',
      'Significant deficiencies and material weaknesses in internal control',
      'Only positive findings',
    ],
    correctAnswer: 2,
    explanation: 'Significant deficiencies and material weaknesses must be communicated in writing to those charged with governance. Material weaknesses must also be communicated to management. Other deficiencies may be communicated orally or in writing.',
    reference: 'AU-C 265',
  },
  {
    id: 'aud-add-034',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-reporting',
    topic: 'Communications',
    subtopic: 'Audit Committee',
    difficulty: 'hard',
    blueprintArea: 'AUD-IV',
    skillLevel: 'Analysis',
    question: 'Required communications to those charged with governance include:',
    options: [
      'Auditor responsibilities, planned scope, significant findings, and independence matters',
      'Only material misstatements found',
      'Only changes in accounting principles',
      'Only the audit opinion',
    ],
    correctAnswer: 0,
    explanation: 'Required communications: auditor responsibilities, planned scope/timing, significant findings (misstatements, disagreements, difficulties), significant accounting policies, estimates, independence matters.',
    reference: 'AU-C 260',
  },
  {
    id: 'aud-add-035',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-controls',
    topic: 'Internal Control',
    subtopic: 'Service Organizations',
    difficulty: 'hard',
    blueprintArea: 'AUD-IV',
    skillLevel: 'Analysis',
    question: 'A SOC 1 Type 2 report:',
    options: [
      'Describes controls without testing effectiveness',
      'Reports on cybersecurity only',
      'Provides negative assurance',
      'Describes controls and provides evidence of operating effectiveness over a period',
    ],
    correctAnswer: 3,
    explanation: 'SOC 1 relates to controls relevant to user entities\' financial reporting. Type 1 = description and design at a point in time. Type 2 = adds testing of operating effectiveness over a period (typically 6-12 months).',
    reference: 'SSAE 18 - SOC 1',
  },

  // Final batch
  {
    id: 'aud-add-036',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-risk',
    topic: 'Risk Assessment',
    subtopic: 'Significant Risks',
    difficulty: 'hard',
    blueprintArea: 'AUD-II',
    skillLevel: 'Analysis',
    question: 'When the auditor identifies a significant risk, the auditor must:',
    options: [
      'Obtain an understanding of related controls and perform substantive procedures specifically responsive to the risk',
      'Increase the tolerable misstatement',
      'Only document the risk',
      'Automatically withdraw from the engagement',
    ],
    correctAnswer: 0,
    explanation: 'For significant risks: (1) understand related controls, (2) substantive procedures must be specifically responsive to the risk, (3) cannot rely solely on substantive analytics, (4) tests of details are usually necessary.',
    reference: 'AU-C 330.21',
  },
  {
    id: 'aud-add-037',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-evidence',
    topic: 'Substantive Procedures',
    subtopic: 'Inventory Observation',
    difficulty: 'medium',
    blueprintArea: 'AUD-III',
    skillLevel: 'Application',
    question: 'If physical inventory is taken at a date other than year-end, the auditor must:',
    options: [
      'Rely entirely on management representations',
      'Issue a qualified opinion',
      'Re-count at year-end',
      'Perform additional procedures to gain assurance about changes in inventory between count date and year-end',
    ],
    correctAnswer: 3,
    explanation: 'When inventory count is not at year-end, the auditor performs roll-forward or roll-back procedures to test changes between count date and balance sheet date. This includes testing purchases, sales, and adjustments.',
    reference: 'AU-C 501',
  },
  {
    id: 'aud-add-038',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-reporting',
    topic: 'Audit Reports',
    subtopic: 'Key Audit Matters',
    difficulty: 'hard',
    blueprintArea: 'AUD-IV',
    skillLevel: 'Analysis',
    question: 'Key Audit Matters (KAMs) are:',
    options: [
      'Matters that result in qualified opinions',
      'Only disclosed when there are material weaknesses',
      'Required for all audits',
      'Matters communicated to those charged with governance that required significant auditor attention (required for public company audits)',
    ],
    correctAnswer: 3,
    explanation: 'KAMs (CAMs under PCAOB) highlight matters that required significant auditor judgment or attention. Required for public company audits. Selected from matters communicated to audit committee.',
    reference: 'AU-C 701, AS 3101',
  },
  {
    id: 'aud-add-039',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-special',
    topic: 'Special Considerations',
    subtopic: 'Subsequent Events',
    difficulty: 'medium',
    blueprintArea: 'AUD-III',
    skillLevel: 'Application',
    question: 'The auditor\'s responsibility for subsequent events extends through:',
    options: [
      'The date of the auditor\'s report',
      'The date of report issuance',
      '90 days after year-end',
      'The balance sheet date',
    ],
    correctAnswer: 0,
    explanation: 'The auditor actively searches for subsequent events through the report date. After the report date but before issuance, there\'s no active duty but known matters must be addressed. After issuance, only specific circumstances require action.',
    reference: 'AU-C 560',
  },
  {
    id: 'aud-add-040',
    section: 'AUD',
    courseId: 'cpa',
    topicId: 'aud-reporting',
    topic: 'Audit Reports',
    subtopic: 'Emphasis of Matter',
    difficulty: 'medium',
    blueprintArea: 'AUD-IV',
    skillLevel: 'Application',
    question: 'An auditor issues an unmodified opinion on financial statements. Several months after the report date, a building that was fully insured was destroyed by a flood. Should the auditor modify the previously issued report?',
    options: [
      'Yes — the report should be modified for the subsequent event',
      'No — a subsequent event occurring after the report date does not require modification of a previously issued report if the event does not relate to conditions existing at year-end',
      'Yes — the auditor must always withdraw a report when material events occur',
      'No — but only because the building was insured',
    ],
    correctAnswer: 1,
    explanation: 'An event occurring after the report date (Type 2 subsequent event) that does not relate to conditions existing at the balance sheet date does not require modification of previously issued financial statements or the audit report. The flood destroying a building is a new event, not a condition that existed at year-end.',
    reference: 'AU-C 706',
  },
];
