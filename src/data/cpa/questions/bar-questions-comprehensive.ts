// BAR - Business Analysis & Reporting Comprehensive Questions
// 2026 CPA Exam Blueprint Compliant
// World-Class expansion - Final batch

import { Question } from '../../../types';

export const BAR_QUESTIONS_COMPREHENSIVE: Question[] = [
  {
    id: 'bar-comp-001',
    section: 'BAR',
    topicId: 'bar-analysis',
    topic: 'Financial Analysis',
    subtopic: 'Z-Score Model',
    difficulty: 'hard',
    blueprintArea: 'BAR-I',
    skillLevel: 'Analysis',
    question: 'The Altman Z-Score model is used to predict:',
    options: [
      'Stock prices',
      'Credit ratings only',
      'Bankruptcy risk using weighted ratios including working capital, retained earnings, EBIT, and sales to assets',
      'Interest rates'
    ],
    correctAnswer: 2,
    explanation: 'Altman Z-Score: Z = 1.2(WC/TA) + 1.4(RE/TA) + 3.3(EBIT/TA) + 0.6(MVE/TL) + 1.0(Sales/TA). Z < 1.81 = distress zone (high bankruptcy risk). Z > 2.99 = safe zone. Between = gray zone.',
    reference: 'Financial Analysis - Bankruptcy Prediction',
  },
  {
    id: 'bar-comp-002',
    section: 'BAR',
    topicId: 'bar-analysis',
    topic: 'Financial Analysis',
    subtopic: 'Operating Leverage',
    difficulty: 'hard',
    blueprintArea: 'BAR-I',
    skillLevel: 'Analysis',
    question: 'Degree of operating leverage (DOL) measures:',
    options: [
      'Total debt',
      'Cash flow sensitivity',
      'Working capital',
      'The percentage change in EBIT for a given percentage change in sales'
    ],
    correctAnswer: 3,
    explanation: 'DOL = % change in EBIT / % change in sales = Contribution margin / EBIT. Higher fixed costs = higher DOL = greater earnings volatility. DOL varies at different sales levels (highest near breakeven).',
    reference: 'Financial Analysis - Leverage',
  },
  {
    id: 'bar-comp-003',
    section: 'BAR',
    topicId: 'bar-analysis',
    topic: 'Financial Analysis',
    subtopic: 'Economic Value Added',
    difficulty: 'hard',
    blueprintArea: 'BAR-I',
    skillLevel: 'Analysis',
    question: 'Economic Value Added (EVA) is calculated as:',
    options: [
      'Net income minus dividends',
      'Revenue minus expenses',
      'NOPAT minus (Capital × Cost of Capital)',
      'Cash flow from operations'
    ],
    correctAnswer: 2,
    explanation: 'EVA = NOPAT - (Invested Capital × WACC). Measures economic profit above cost of capital. Positive EVA = value creation. Adjustments often made to accounting income (R&D capitalization, operating leases, etc.).',
    reference: 'Financial Analysis - Value Metrics',
  },
  {
    id: 'bar-comp-004',
    section: 'BAR',
    topicId: 'bar-valuation',
    topic: 'Business Valuation',
    subtopic: 'DCF Assumptions',
    difficulty: 'hard',
    blueprintArea: 'BAR-I',
    skillLevel: 'Analysis',
    question: 'The terminal value in a DCF model typically assumes:',
    options: [
      'Zero growth',
      'Exponential growth',
      'Perpetual growth at a rate below long-term economic growth',
      'Declining growth only'
    ],
    correctAnswer: 2,
    explanation: 'Terminal value: perpetuity formula = FCF(1+g)/(r-g). Growth rate (g) must be ≤ long-term GDP growth (2-3%). Terminal value often represents 60-80% of total value. Alternative: exit multiple approach.',
    reference: 'Business Valuation - DCF',
  },
  {
    id: 'bar-comp-005',
    section: 'BAR',
    topicId: 'bar-adjustments',
    topic: 'Financial Statement Adjustments',
    subtopic: 'LIFO to FIFO',
    difficulty: 'hard',
    blueprintArea: 'BAR-I',
    skillLevel: 'Application',
    question: 'To convert a LIFO company to FIFO for comparison, the analyst should:',
    options: [
      'Ignore inventory differences',
      'Reduce inventory',
      'Add LIFO reserve to inventory and retained earnings (net of tax)',
      'Adjust only cost of goods sold'
    ],
    correctAnswer: 2,
    explanation: 'LIFO to FIFO: Inventory + LIFO reserve. Retained earnings + LIFO reserve × (1 - tax rate). COGS - change in LIFO reserve. Makes comparisons across methods valid.',
    reference: 'Financial Statement Analysis',
  },
  {
    id: 'bar-comp-006',
    section: 'BAR',
    topicId: 'bar-revenue',
    topic: 'Revenue Recognition',
    subtopic: 'Licensing IP',
    difficulty: 'hard',
    blueprintArea: 'BAR-II',
    skillLevel: 'Analysis',
    question: 'Revenue from a license of intellectual property is recognized:',
    options: [
      'Always over time',
      'At point in time for right to use; over time for right to access',
      'When cash received',
      'At contract signing',
    ],
    correctAnswer: 1,
    explanation: 'Right to use (functional IP): point in time recognition (e.g., software). Right to access (symbolic IP): over time recognition (e.g., brand, franchise). Depends on nature of licensor\'s promise and IP type.',
    reference: 'ASC 606-10-55-58',
  },
  {
    id: 'bar-comp-007',
    section: 'BAR',
    topicId: 'bar-revenue',
    topic: 'Revenue Recognition',
    subtopic: 'Principal vs Agent',
    difficulty: 'hard',
    blueprintArea: 'BAR-II',
    skillLevel: 'Analysis',
    question: 'An entity is a principal (not agent) when it:',
    options: [
      'Acts on behalf of another',
      'Earns a commission',
      'Controls the specified good or service before transfer to customer',
      'Has no inventory risk'
    ],
    correctAnswer: 2,
    explanation: 'Principal: controls goods/services before transfer. Indicators: primary responsibility, inventory risk, pricing discretion. Principal records gross revenue. Agent: arranges for another to provide goods/services, records net (commission).',
    reference: 'ASC 606-10-55-36',
  },
  {
    id: 'bar-comp-008',
    section: 'BAR',
    topicId: 'bar-leases',
    topic: 'Lease Accounting',
    subtopic: 'Reassessment',
    difficulty: 'hard',
    blueprintArea: 'BAR-III',
    skillLevel: 'Analysis',
    question: 'A lessee must reassess lease classification when:',
    options: [
      'There is a lease modification not accounted for as a separate contract',
      'Any market change occurs',
      'Interest rates change',
      'Annually'
    ],
    correctAnswer: 0,
    explanation: 'Reassess classification when: (1) modification not a separate contract, (2) change in lease term, (3) change in probability of purchase option exercise. Also reassess if residual value guarantee changes.',
    reference: 'ASC 842-10-35-4',
  },
  {
    id: 'bar-comp-009',
    section: 'BAR',
    topicId: 'bar-leases',
    topic: 'Lease Accounting',
    subtopic: 'Variable Lease Payments',
    difficulty: 'hard',
    blueprintArea: 'BAR-III',
    skillLevel: 'Analysis',
    question: 'Variable lease payments based on sales or performance are:',
    options: [
      'Included in lease liability',
      'Ignored entirely',
      'Capitalized at inception',
      'Not included in lease liability but expensed as incurred'
    ],
    correctAnswer: 3,
    explanation: 'Variable payments: Index/rate-based = included in liability (remeasure when index changes). Performance/sales-based = NOT in liability, expense as incurred. In-substance fixed payments = include in liability.',
    reference: 'ASC 842-10-30-5',
  },
  {
    id: 'bar-comp-010',
    section: 'BAR',
    topicId: 'bar-taxes',
    topic: 'Income Taxes',
    subtopic: 'Tax Rate Reconciliation',
    difficulty: 'hard',
    blueprintArea: 'BAR-IV',
    skillLevel: 'Analysis',
    question: 'The tax rate reconciliation explains differences between:',
    options: [
      'Cash taxes paid and tax expense',
      'Federal and state rates',
      'Statutory tax rate and effective tax rate applied to pretax income',
      'Current and deferred taxes'
    ],
    correctAnswer: 2,
    explanation: 'Rate reconciliation: statutory rate (21% federal) to effective rate. Common items: state taxes, permanent differences (meals, DPAD, tax credits), foreign rate differences, valuation allowance changes.',
    reference: 'ASC 740-10-50-12',
  },
  {
    id: 'bar-comp-011',
    section: 'BAR',
    topicId: 'bar-taxes',
    topic: 'Income Taxes',
    subtopic: 'Uncertain Tax Positions',
    difficulty: 'hard',
    blueprintArea: 'BAR-IV',
    skillLevel: 'Analysis',
    question: 'Under ASC 740, an uncertain tax position is recognized when:',
    options: [
      'Any uncertainty exists',
      'It is more likely than not (>50%) that the position will be sustained upon examination',
      'Guaranteed to succeed',
      'IRS issues guidance',
    ],
    correctAnswer: 1,
    explanation: 'Two-step process: (1) Recognition - MLTN (>50%) of being sustained. If not met, no benefit. (2) Measurement - largest amount with >50% cumulative probability. Include interest/penalties based on policy.',
    reference: 'ASC 740-10-25',
  },
  {
    id: 'bar-comp-012',
    section: 'BAR',
    topicId: 'bar-combinations',
    topic: 'Business Combinations',
    subtopic: 'Pushdown Accounting',
    difficulty: 'hard',
    blueprintArea: 'BAR-V',
    skillLevel: 'Analysis',
    question: 'Pushdown accounting results in the acquired entity:',
    options: [
      'Keeping historical cost basis',
      'Writing off goodwill',
      'Restating its assets and liabilities to fair value in its own separate financial statements',
      'Eliminating retained earnings only'
    ],
    correctAnswer: 2,
    explanation: 'Pushdown: acquiree "pushes down" acquisition accounting to its separate F/S. Restate assets/liabilities to FV, record goodwill, reset retained earnings. Optional election per ASU 2014-17.',
    reference: 'ASC 805-50',
  },
  {
    id: 'bar-comp-013',
    section: 'BAR',
    topicId: 'bar-combinations',
    topic: 'Business Combinations',
    subtopic: 'Step Acquisition',
    difficulty: 'hard',
    blueprintArea: 'BAR-V',
    skillLevel: 'Analysis',
    question: 'In a step acquisition achieving control, the acquirer:',
    options: [
      'Uses historical cost for prior interest',
      'Uses book value',
      'Ignores prior investment',
      'Remeasures previously held equity interest at acquisition-date fair value, recognizing gain/loss'
    ],
    correctAnswer: 3,
    explanation: 'Step acquisition: remeasure previously held equity at FV on acquisition date. Recognize gain/loss in income. Include at FV in calculating total consideration. Apply acquisition method from control date.',
    reference: 'ASC 805-10-25-10',
  },
  {
    id: 'bar-comp-014',
    section: 'BAR',
    topicId: 'bar-consolidation',
    topic: 'Consolidation',
    subtopic: 'Intercompany Transactions',
    difficulty: 'hard',
    blueprintArea: 'BAR-V',
    skillLevel: 'Application',
    question: 'Unrealized profit on intercompany upstream inventory sales is eliminated against:',
    options: [
      'Parent only',
      'Noncontrolling interest (and parent) in proportion to ownership',
      'Subsidiary only',
      'Neither',
    ],
    correctAnswer: 1,
    explanation: 'Upstream (sub sells to parent): eliminate unrealized profit from NCI and controlling interest proportionately. Downstream (parent sells to sub): eliminate entirely from controlling interest. Affects NCI share of subsidiary income.',
    reference: 'ASC 810-10-45-18',
  },
  {
    id: 'bar-comp-015',
    section: 'BAR',
    topicId: 'bar-cost',
    topic: 'Cost Accounting',
    subtopic: 'Activity-Based Costing',
    difficulty: 'hard',
    blueprintArea: 'BAR-VI',
    skillLevel: 'Analysis',
    question: 'Activity-based costing improves upon traditional costing by:',
    options: [
      'Using a single overhead rate',
      'Assigning overhead based on activities that drive costs using multiple cost pools and drivers',
      'Ignoring indirect costs',
      'Allocating based on direct labor only',
    ],
    correctAnswer: 1,
    explanation: 'ABC: identify activities → assign costs to cost pools → select cost drivers → allocate to products based on activity consumption. More accurate for complex operations with diverse products. Better for strategic decisions.',
    reference: 'Cost Accounting - ABC',
  },
  {
    id: 'bar-comp-016',
    section: 'BAR',
    topicId: 'bar-cost',
    topic: 'Cost Accounting',
    subtopic: 'Transfer Pricing',
    difficulty: 'hard',
    blueprintArea: 'BAR-VI',
    skillLevel: 'Analysis',
    question: 'The minimum transfer price for a selling division with no excess capacity is:',
    options: [
      'Variable cost only',
      'Market price always',
      'Variable cost plus opportunity cost (contribution margin of external sales foregone)',
      'Full cost'
    ],
    correctAnswer: 2,
    explanation: 'Minimum TP: variable cost + opportunity cost. No excess capacity: opportunity cost = CM lost on external sales. Excess capacity: opportunity cost = $0, so TP = variable cost. Maximum TP typically = market price.',
    reference: 'Cost Accounting - Transfer Pricing',
  },
  {
    id: 'bar-comp-017',
    section: 'BAR',
    topicId: 'bar-cost',
    topic: 'Cost Accounting',
    subtopic: 'Theory of Constraints',
    difficulty: 'hard',
    blueprintArea: 'BAR-VI',
    skillLevel: 'Analysis',
    question: 'Under Theory of Constraints, a bottleneck should be managed by:',
    options: [
      'Adding more bottlenecks',
      'Ignoring non-bottleneck operations',
      'Reducing quality',
      'Maximizing throughput contribution per unit of the constrained resource'
    ],
    correctAnswer: 3,
    explanation: 'TOC: throughput accounting. Maximize throughput contribution (revenue - direct materials) per constraint unit. Steps: identify constraint, exploit it, subordinate other processes, elevate constraint, repeat.',
    reference: 'TOC - Throughput Accounting',
  },
  {
    id: 'bar-comp-018',
    section: 'BAR',
    topicId: 'bar-variance',
    topic: 'Variance Analysis',
    subtopic: 'Sales Mix Variance',
    difficulty: 'hard',
    blueprintArea: 'BAR-VI',
    skillLevel: 'Analysis',
    question: 'The sales mix variance measures the impact of:',
    options: [
      'Price changes',
      'Volume changes',
      'Selling a different proportion of products than budgeted, at budgeted contribution margins',
      'Cost changes'
    ],
    correctAnswer: 2,
    explanation: 'Sales mix variance: (Actual mix % - Budget mix %) × Actual total units × Budget CM per unit. Favorable when higher-margin products exceed budgeted proportion. Part of total sales volume variance analysis.',
    reference: 'Variance Analysis - Sales',
  },
  {
    id: 'bar-comp-019',
    section: 'BAR',
    topicId: 'bar-budgeting',
    topic: 'Budgeting',
    subtopic: 'Beyond Budgeting',
    difficulty: 'hard',
    blueprintArea: 'BAR-VI',
    skillLevel: 'Evaluation',
    question: 'The Beyond Budgeting model advocates:',
    options: [
      'Replacing fixed budgets with adaptive processes, rolling forecasts, and relative performance measures',
      'More detailed budgets',
      'Eliminating all planning',
      'Strict variance analysis'
    ],
    correctAnswer: 0,
    explanation: 'Beyond Budgeting: replace annual fixed budgets with adaptive management. Uses: rolling forecasts, relative targets (vs. peers/benchmarks), decentralized decision-making, continuous planning. Responds to criticism of traditional budgeting.',
    reference: 'Budgeting - Beyond Budgeting',
  },
  {
    id: 'bar-comp-020',
    section: 'BAR',
    topicId: 'bar-risk',
    topic: 'Risk Management',
    subtopic: 'Value at Risk',
    difficulty: 'hard',
    blueprintArea: 'BAR-I',
    skillLevel: 'Analysis',
    question: 'Value at Risk (VaR) represents:',
    options: [
      'Maximum expected loss over a specified time period at a given confidence level',
      'Average expected loss',
      'Total portfolio value',
      'Minimum return'
    ],
    correctAnswer: 0,
    explanation: 'VaR: maximum loss expected (worst case in confidence interval) over time horizon. Example: $1M VaR at 95% confidence over 1 day means 5% chance of losing more than $1M. Methods: historical, parametric, Monte Carlo.',
    reference: 'Risk Management - VaR',
  },
  {
    id: 'bar-comp-021',
    section: 'BAR',
    topicId: 'bar-forex',
    topic: 'Foreign Currency',
    subtopic: 'Remeasurement vs Translation',
    difficulty: 'hard',
    blueprintArea: 'BAR-II',
    skillLevel: 'Analysis',
    question: 'The key difference between remeasurement and translation is:',
    options: [
      'Remeasurement uses temporal method with gain/loss in income; translation uses current rate with adjustment in OCI',
      'No difference',
      'Currency used',
      'Timing only'
    ],
    correctAnswer: 0,
    explanation: 'Remeasurement: temporal method, functional currency ≠ local. Gain/loss to income. Translation: current rate method, functional = local ≠ reporting. CTA to OCI. Based on functional currency determination.',
    reference: 'ASC 830',
  },
  {
    id: 'bar-comp-022',
    section: 'BAR',
    topicId: 'bar-derivatives',
    topic: 'Derivatives',
    subtopic: 'Cash Flow Hedge Effectiveness',
    difficulty: 'hard',
    blueprintArea: 'BAR-II',
    skillLevel: 'Analysis',
    question: 'For cash flow hedge accounting, the effective portion of the hedge:',
    options: [
      'Goes directly to income',
      'Reduces the derivative\'s value',
      'Is ignored',
      'Is reported in OCI and reclassified to earnings when the hedged transaction affects earnings'
    ],
    correctAnswer: 3,
    explanation: 'Cash flow hedge: effective portion to OCI (AOCI). Reclassify to earnings when hedged item affects earnings. Ineffective portion to earnings immediately. Document hedge relationship at inception.',
    reference: 'ASC 815-30',
  },
  {
    id: 'bar-comp-023',
    section: 'BAR',
    topicId: 'bar-analytics',
    topic: 'Data Analytics',
    subtopic: 'Regression Analysis',
    difficulty: 'hard',
    blueprintArea: 'BAR-I',
    skillLevel: 'Analysis',
    question: 'In regression analysis, R-squared indicates:',
    options: [
      'The proportion of variance in the dependent variable explained by independent variable(s)',
      'The correlation coefficient',
      'The slope of the line',
      'Statistical significance'
    ],
    correctAnswer: 0,
    explanation: 'R² (coefficient of determination): proportion of dependent variable variance explained by model. Range 0-1. R² = 0.75 means 75% of variation explained. Adjusted R² accounts for number of predictors. High R² doesn\'t guarantee causation.',
    reference: 'Data Analytics - Regression',
  },
  {
    id: 'bar-comp-024',
    section: 'BAR',
    topicId: 'bar-segment',
    topic: 'Segment Reporting',
    subtopic: 'Quantitative Thresholds',
    difficulty: 'hard',
    blueprintArea: 'BAR-II',
    skillLevel: 'Application',
    question: 'An operating segment is separately reportable if it meets any of the following thresholds:',
    options: [
      '10% of combined revenue, reported profit/loss, or combined assets of all operating segments',
      '5% of any measure',
      '50% of total assets',
      '100% of revenue'
    ],
    correctAnswer: 0,
    explanation: 'Reportable segment: meets any 10% test: (1) combined internal/external revenue, (2) reported profit or loss (compared to greater of combined profit or combined loss), (3) assets. 75% of external revenue must be in reportable segments.',
    reference: 'ASC 280-10-50-12',
  },
  {
    id: 'bar-comp-025',
    section: 'BAR',
    topicId: 'bar-accounting',
    topic: 'Special Accounting',
    subtopic: 'Asset Retirement Obligations',
    difficulty: 'hard',
    blueprintArea: 'BAR-III',
    skillLevel: 'Analysis',
    question: 'An asset retirement obligation is recognized when:',
    options: [
      'The asset is retired',
      'A legal obligation exists and fair value can be reasonably estimated',
      'Retirement is planned',
      'Costs are incurred',
    ],
    correctAnswer: 1,
    explanation: 'ARO: recognize when legal obligation exists (statute, contract, promissory estoppel) and FV can be estimated. Dr. Asset, Cr. Liability (PV). Accrete liability over time. Depreciate asset component. Adjust for estimate changes.',
    reference: 'ASC 410-20',
  },
];
