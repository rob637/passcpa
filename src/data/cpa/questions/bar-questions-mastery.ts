// BAR - Business Analysis Mastery Questions
// 2026 CPA Exam Blueprint Compliant
// World-Class expansion - Mastery batch

import { Question } from '../../../types';

export const BAR_QUESTIONS_MASTERY: Question[] = [
  {
    id: 'bar-mast-001',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-analysis',
    topic: 'Financial Analysis',
    subtopic: 'Free Cash Flow',
    difficulty: 'hard',
    blueprintArea: 'BAR-I',
    skillLevel: 'Analysis',
    question: 'Free cash flow to the firm (FCFF) is calculated as:',
    options: [
      'Net income minus dividends',
      'Revenue minus expenses',
      'Cash flow from financing',
      'Operating cash flow minus capital expenditures, or EBIT(1-tax) plus depreciation minus CapEx minus change in working capital',
    ],
    correctAnswer: 3,
    explanation: 'FCFF: cash available to all capital providers. FCFF = EBIT(1-t) + D&A - CapEx - ΔWC. Or: CFO - CapEx + interest(1-t). FCFE = FCFF - interest(1-t) + net borrowing. Used in DCF firm valuation.',
    reference: 'Financial Analysis - Free Cash Flow',
  },
  {
    id: 'bar-mast-002',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-analysis',
    topic: 'Financial Analysis',
    subtopic: 'Sustainable Growth Rate',
    difficulty: 'hard',
    blueprintArea: 'BAR-I',
    skillLevel: 'Analysis',
    question: 'The sustainable growth rate represents:',
    options: [
      'Maximum growth rate achievable without external equity financing, equal to ROE × retention ratio',
      'Maximum revenue growth',
      'Industry average growth',
      'GDP growth rate',
    ],
    correctAnswer: 0,
    explanation: 'Sustainable growth: g = ROE × b (retention ratio). Growth rate maintainable with existing capital structure and no new equity. ROE = PM × AT × EM. Growing faster requires: improve ROE, increase leverage, or issue equity.',
    reference: 'Financial Analysis - Sustainable Growth',
  },
  {
    id: 'bar-mast-003',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-valuation',
    topic: 'Business Valuation',
    subtopic: 'Comparable Company Analysis',
    difficulty: 'hard',
    blueprintArea: 'BAR-I',
    skillLevel: 'Analysis',
    question: 'In comparable company analysis, enterprise value multiples are used because:',
    options: [
      'They include only equity value',
      'They are capital structure neutral, allowing comparison across companies with different leverage',
      'Equity multiples are unavailable',
      'They are simpler',
    ],
    correctAnswer: 1,
    explanation: 'EV multiples: capital structure neutral. EV = equity value + debt - cash. EV/EBITDA, EV/Revenue, EV/EBIT. Compare similar business risk. Equity multiples (P/E) affected by leverage. Select comparables carefully.',
    reference: 'Business Valuation - Comparables',
  },
  {
    id: 'bar-mast-004',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-adjustments',
    topic: 'Financial Statement Quality',
    subtopic: 'Earnings Quality Indicators',
    difficulty: 'hard',
    blueprintArea: 'BAR-I',
    skillLevel: 'Evaluation',
    question: 'High earnings quality is indicated by:',
    options: [
      'Earnings persistence, predictability, supported by operating cash flows, and low accruals',
      'Stable stock price',
      'Revenue growth only',
      'High reported earnings',
    ],
    correctAnswer: 0,
    explanation: 'Earnings quality: persistence (sustainable), predictability, supported by CFO (low accruals), minimal one-time items, conservative accounting policies. High accrual ratio or CFO << NI = lower quality.',
    reference: 'Financial Statement Analysis - Quality',
  },
  {
    id: 'bar-mast-005',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-revenue',
    topic: 'Revenue Recognition',
    subtopic: 'Contract Assets vs Receivables',
    difficulty: 'hard',
    blueprintArea: 'BAR-II',
    skillLevel: 'Analysis',
    question: 'A contract asset differs from a receivable because:',
    options: [
      'Contract assets are always non-current',
      'Receivables are contingent',
      'They are identical',
      'A contract asset is contingent on future performance while a receivable is unconditional right to payment',
    ],
    correctAnswer: 3,
    explanation: 'Contract asset: right to consideration conditioned on something other than passage of time (e.g., completing another PO). Receivable: unconditional right to payment (only passage of time before payment due). Present separately.',
    reference: 'ASC 606-10-45-3',
  },
  {
    id: 'bar-mast-006',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-revenue',
    topic: 'Revenue Recognition',
    subtopic: 'Output Methods',
    difficulty: 'hard',
    blueprintArea: 'BAR-II',
    skillLevel: 'Analysis',
    question: 'Output methods for measuring progress toward complete satisfaction of a performance obligation include:',
    options: [
      'Resources consumed',
      'Effort expended',
      'Cost-to-cost',
      'Surveys of performance, appraisals, milestones achieved, or units produced',
    ],
    correctAnswer: 3,
    explanation: 'Output methods: measure value transferred based on results (surveys, milestones, units, time elapsed). Input methods: efforts/resources consumed (costs incurred, labor hours). Choose method that best depicts transfer of control.',
    reference: 'ASC 606-10-55-18',
  },
  {
    id: 'bar-mast-007',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-leases',
    topic: 'Lease Accounting',
    subtopic: 'Lease Modification - Partial Termination',
    difficulty: 'hard',
    blueprintArea: 'BAR-III',
    skillLevel: 'Analysis',
    question: 'A lease modification that decreases scope is accounted for by:',
    options: [
      'Proportionate adjustment to ROU asset and lease liability with gain/loss recognized',
      'Prospective adjustment only',
      'No adjustment',
      'Retrospective adjustment',
    ],
    correctAnswer: 0,
    explanation: 'Partial termination: reduce ROU asset and lease liability proportionately based on rights given up. Recognize gain/loss for difference. Remeasure remaining lease at modified terms with revised discount rate.',
    reference: 'ASC 842-10-25-8',
  },
  {
    id: 'bar-mast-008',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-leases',
    topic: 'Lease Accounting',
    subtopic: 'Embedded Leases',
    difficulty: 'hard',
    blueprintArea: 'BAR-III',
    skillLevel: 'Evaluation',
    question: 'A contract contains an embedded lease if:',
    options: [
      'Any asset is involved',
      'Services are provided',
      'An identified asset exists and customer has right to control use of the asset for a period',
      'Payment is periodic',
    ],
    correctAnswer: 2,
    explanation: 'Embedded lease criteria: (1) identified asset (explicit or implicit, no substantive substitution right), (2) customer obtains substantially all economic benefits, (3) customer directs use of asset (how and for what purpose).',
    reference: 'ASC 842-10-15-3',
  },
  {
    id: 'bar-mast-009',
    courseId: 'cpa',
    section: 'BAR',
    blueprintArea: 'BAR-IV',
    topic: 'Income Taxes',
    subtopic: 'Change in Tax Rate',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'At year-end, a company has a deferred tax liability of $420,000, based on temporary differences of $2 million taxed at 21%. New legislation enacts a rate change to 25%, effective next year. What journal entry is required?',
    options: [
      'Debit DT Expense $80,000, Credit DTL $80,000',
      'No entry — rate changes are applied prospectively only to new temporary differences',
      'Debit DT Expense $80,000, Credit DTL $80,000, recognized in the period of enactment',
      'Credit DT Benefit $80,000, Debit DTL $80,000',
    ],
    correctAnswer: 2,
    explanation: 'Under ASC 740-10-35-4, deferred tax balances must be adjusted for enacted rate changes in the period of enactment. New DTL = $2M × 25% = $500,000. Adjustment = $500,000 − $420,000 = $80,000 increase. Entry: Debit Income Tax Expense $80,000, Credit DTL $80,000. The entire effect is recognized immediately, not spread over future periods.',
    reference: 'ASC 740-10-45-15',
  },
  {
    id: 'bar-mast-010',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-taxes',
    topic: 'Income Taxes',
    subtopic: 'Intraperiod Allocation',
    difficulty: 'hard',
    blueprintArea: 'BAR-IV',
    skillLevel: 'Analysis',
    question: 'Intraperiod tax allocation requires:',
    options: [
      'Allocating total tax among continuing operations, discontinued operations, OCI, and equity',
      'All tax to continuing operations',
      'Pro rata allocation',
      'Cash basis allocation',
    ],
    correctAnswer: 0,
    explanation: 'Intraperiod allocation: allocate tax to sources of income/expense. Continuing operations uses tax rate without other items. Discontinued operations, OCI items, prior period adjustments get their incremental tax effect.',
    reference: 'ASC 740-20',
  },
  {
    id: 'bar-mast-011',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-combinations',
    topic: 'Business Combinations',
    subtopic: 'Reverse Acquisition',
    difficulty: 'hard',
    blueprintArea: 'BAR-V',
    skillLevel: 'Evaluation',
    question: 'In a reverse acquisition:',
    options: [
      'Legal acquiree is the accounting acquirer because its former owners have effective control',
      'Legal acquirer is always accounting acquirer',
      'Both are acquirers',
      'No acquisition occurs',
    ],
    correctAnswer: 0,
    explanation: 'Reverse acquisition: legal acquirer issues so many shares that legal acquiree owners control combined entity. Legal acquiree = accounting acquirer. Common in shell company transactions. Apply acquisition method from acquiree\'s perspective.',
    reference: 'ASC 805-40',
  },
  {
    id: 'bar-mast-012',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-combinations',
    topic: 'Business Combinations',
    subtopic: 'Bargain Purchase',
    difficulty: 'hard',
    blueprintArea: 'BAR-V',
    skillLevel: 'Analysis',
    question: 'A bargain purchase (negative goodwill) results when:',
    options: [
      'Acquisition-date fair value of identifiable net assets exceeds consideration transferred',
      'Assets are impaired',
      'Premium is paid',
      'Goodwill is written off',
    ],
    correctAnswer: 0,
    explanation: 'Bargain purchase: FV of net assets acquired > consideration paid. Reassess all values first. If confirmed, recognize gain in earnings. May occur in distressed sales, forced liquidations. Rare; should be reviewed carefully.',
    reference: 'ASC 805-30-25-2',
  },
  {
    id: 'bar-mast-013',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-consolidation',
    topic: 'Consolidation',
    subtopic: 'Push-Down Accounting',
    difficulty: 'hard',
    blueprintArea: 'BAR-V',
    skillLevel: 'Analysis',
    question: 'Push-down accounting election may be made when:',
    options: [
      'Any acquisition occurs',
      'A change in control event occurs, allowing acquiree to restate its separate F/S to reflect new basis',
      'Minority interest exceeds 50%',
      'Goodwill is impaired',
    ],
    correctAnswer: 1,
    explanation: 'Push-down election: acquiree may apply acquisition accounting in its separate F/S. Change in control event required. Election irrevocable. Restate assets/liabilities to FV, record goodwill, eliminate acquiree retained earnings.',
    reference: 'ASC 805-50-25',
  },
  {
    id: 'bar-mast-014',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-consolidation',
    topic: 'Consolidation',
    subtopic: 'Deconsolidation',
    difficulty: 'hard',
    blueprintArea: 'BAR-V',
    skillLevel: 'Analysis',
    question: 'Upon deconsolidation due to loss of control:',
    options: [
      'Derecognize subsidiary assets/liabilities, recognize retained investment at FV, recognize gain/loss',
      'Continue consolidation',
      'Keep subsidiary on books',
      'Write off investment',
    ],
    correctAnswer: 0,
    explanation: 'Loss of control: deconsolidate. Derecognize sub\'s assets, liabilities, NCI. Measure retained noncontrolling investment at FV. Recognize gain/loss: (FV of consideration + FV retained investment) - carrying amount of sub\'s net assets including NCI and goodwill.',
    reference: 'ASC 810-10-40',
  },
  {
    id: 'bar-mast-015',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-cost',
    topic: 'Cost Accounting',
    subtopic: 'Joint Cost Allocation',
    difficulty: 'hard',
    blueprintArea: 'BAR-VI',
    skillLevel: 'Analysis',
    question: 'Joint costs should be allocated using:',
    options: [
      'ABC method',
      'Relative sales value at split-off, NRV method, or physical measure method',
      'Any method',
      'Direct tracing only',
    ],
    correctAnswer: 1,
    explanation: 'Joint cost allocation methods: (1) relative sales value at split-off (if products salable), (2) NRV (if further processing needed), (3) physical measure (units, weight). NRV = final sales value - separable costs. Allocated costs irrelevant for sell/process decisions.',
    reference: 'Cost Accounting - Joint Costs',
  },
  {
    id: 'bar-mast-016',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-cost',
    topic: 'Cost Accounting',
    subtopic: 'Target Costing',
    difficulty: 'hard',
    blueprintArea: 'BAR-VI',
    skillLevel: 'Analysis',
    question: 'Target costing starts with:',
    options: [
      'Current product cost',
      'Market-determined selling price minus required profit margin to derive target cost',
      'Historical costs',
      'Manufacturing costs',
    ],
    correctAnswer: 1,
    explanation: 'Target costing: market-driven. Target cost = market price - required profit. Design product to meet target cost. Value engineering to reduce costs. Japanese origin (kaizen). Different from cost-plus pricing.',
    reference: 'Cost Accounting - Target Costing',
  },
  {
    id: 'bar-mast-017',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-variance',
    topic: 'Variance Analysis',
    subtopic: 'Fixed Overhead Variances',
    difficulty: 'hard',
    blueprintArea: 'BAR-VI',
    skillLevel: 'Analysis',
    question: 'The fixed overhead volume variance represents:',
    options: [
      'Spending differences',
      'Price changes',
      'Efficiency differences',
      'Under/over-application due to actual production differing from normal capacity used to set the rate',
    ],
    correctAnswer: 3,
    explanation: 'FOH volume variance: (Actual units - Normal capacity) × FOH rate. Measures capacity utilization. Not a spending variance - fixed costs don\'t change with volume. FOH spending variance = actual FOH - budgeted FOH.',
    reference: 'Variance Analysis - Fixed Overhead',
  },
  {
    id: 'bar-mast-018',
    courseId: 'cpa',
    section: 'BAR',
    blueprintArea: 'BAR-VI',
    topic: 'Budgeting',
    subtopic: 'Flexible Budget',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A department\'s static budget was based on 8,000 machine hours with total variable overhead of $96,000 and fixed overhead of $60,000. Actual results: 9,200 machine hours, actual variable overhead $115,000, actual fixed overhead $62,000. What are the spending and volume variances for variable overhead?',
    options: [
      'Spending: $4,600 U; Volume: $14,400 F',
      'Spending: $4,600 U; no volume variance for variable overhead',
      'Spending: $21,000 U; Volume: $14,400 F',
      'Spending: $19,000 U; Volume: $0',
    ],
    correctAnswer: 0,
    explanation: 'Variable OH rate = $96,000 / 8,000 MH = $12/MH. Flexible budget at 9,200 MH = 9,200 × $12 = $110,400. Spending variance = Actual − Flex Budget = $115,000 − $110,400 = $4,600 U (spent more than expected at actual volume). Volume variance = Flex Budget − Static Budget = $110,400 − $96,000 = $14,400 F (produced more volume than planned). The flex budget isolates spending from volume effects.',
    reference: 'Budgeting - Flexible Budgets',
  },
  {
    id: 'bar-mast-019',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-risk',
    topic: 'Risk Management',
    subtopic: 'WACC Calculation',
    difficulty: 'hard',
    blueprintArea: 'BAR-I',
    skillLevel: 'Analysis',
    question: 'Weighted average cost of capital (WACC) uses:',
    options: [
      'Historical costs',
      'Market value weights and after-tax cost of debt',
      'Face value of debt',
      'Book value weights',
    ],
    correctAnswer: 1,
    explanation: 'WACC: (E/V)×Re + (D/V)×Rd×(1-t). Use market values for weights. Cost of debt is after-tax (interest deductible). Cost of equity from CAPM or other models. WACC = discount rate for firm valuation.',
    reference: 'Corporate Finance - WACC',
  },
  {
    id: 'bar-mast-020',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-forex',
    topic: 'Foreign Currency',
    subtopic: 'Highly Inflationary Economies',
    difficulty: 'hard',
    blueprintArea: 'BAR-II',
    skillLevel: 'Analysis',
    question: 'In highly inflationary economies (100%+ cumulative inflation over 3 years):',
    options: [
      'Use local currency as functional',
      'Use any currency',
      'Ignore inflation',
      'Use reporting currency as functional currency (remeasurement with gains/losses in income)',
    ],
    correctAnswer: 3,
    explanation: 'Highly inflationary: parent\'s reporting currency = functional currency for foreign subsidiary. Remeasure using temporal method. Gains/losses in income, not OCI. Prevents meaningless CTA from massive currency devaluation.',
    reference: 'ASC 830-10-45-11',
  },
  {
    id: 'bar-mast-021',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-derivatives',
    topic: 'Derivatives',
    subtopic: 'Fair Value Hedge Accounting',
    difficulty: 'hard',
    blueprintArea: 'BAR-II',
    skillLevel: 'Analysis',
    question: 'In a fair value hedge, the hedged item is:',
    options: [
      'Derecognized',
      'Not adjusted',
      'Adjusted for changes in fair value attributable to the hedged risk with gain/loss in earnings',
      'Recorded at historical cost',
    ],
    correctAnswer: 2,
    explanation: 'Fair value hedge: hedged item basis adjusted for changes in FV due to hedged risk. Both derivative and hedged item changes go to earnings (offsetting). Effective hedge: minimal net P&L impact. Common: fixed-rate debt, inventory.',
    reference: 'ASC 815-25',
  },
  {
    id: 'bar-mast-022',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-analytics',
    topic: 'Data Analytics',
    subtopic: 'Benford\'s Law',
    difficulty: 'hard',
    blueprintArea: 'BAR-I',
    skillLevel: 'Analysis',
    question: 'Benford\'s Law in fraud detection examines:',
    options: [
      'User access patterns',
      'Expected frequency distribution of leading digits in naturally occurring data sets',
      'Transaction timing',
      'Average account balances',
    ],
    correctAnswer: 1,
    explanation: 'Benford\'s Law: in natural data sets, leading digit "1" appears ~30% of time, "2" ~17.6%, etc. Deviations may indicate: fabricated numbers, manipulation, duplicate payments. Useful for expense reports, vendor invoices, journal entries.',
    reference: 'Data Analytics - Benford\'s Law',
  },
  {
    id: 'bar-mast-023',
    courseId: 'cpa',
    section: 'BAR',
    blueprintArea: 'BAR-II',
    topic: 'Segment Reporting',
    subtopic: 'Aggregation Criteria',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Globe Corp. has five operating segments. Segment D has revenues of $18 million (total combined revenue is $200 million), operating profit of $2 million (total combined profit is $30 million, total combined losses are $5 million), and assets of $25 million (total combined assets are $300 million). Is Segment D separately reportable?',
    options: [
      'No — it does not meet any 10% threshold',
      'Yes — its assets exceed 10% of combined assets',
      'Yes — its revenues are at least 10% of combined revenue',
      'Yes — it meets the revenue threshold only',
    ],
    correctAnswer: 0,
    explanation: 'Under ASC 280-10-50-12, three 10% tests: (1) Revenue: $18M ÷ $200M = 9% < 10%. (2) Profit/Loss: $2M vs. greater of |$30M| or |$5M| = $30M → $2M ÷ $30M = 6.7% < 10%. (3) Assets: $25M ÷ $300M = 8.3% < 10%. None of the thresholds are met, so Segment D is not separately reportable. It would be included in an \'all other\' category.',
    reference: 'ASC 280-10-50-11',
  },
  {
    id: 'bar-mast-024',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-accounting',
    topic: 'Stock Compensation',
    subtopic: 'Market Conditions',
    difficulty: 'hard',
    blueprintArea: 'BAR-III',
    skillLevel: 'Analysis',
    question: 'Stock options with market conditions are accounted for by:',
    options: [
      'Incorporating market condition into grant-date fair value; expense recognized regardless of whether condition met',
      'Liability classification',
      'Ignoring market conditions',
      'Variable accounting',
    ],
    correctAnswer: 0,
    explanation: 'Market conditions (e.g., stock price targets): built into grant-date FV (option pricing model). Compensation cost recognized over requisite service period regardless of outcome. Different from performance conditions (adjust for probability).',
    reference: 'ASC 718-10-30-14',
  },
  {
    id: 'bar-mast-025',
    section: 'BAR',
    courseId: 'cpa',
    topicId: 'bar-accounting',
    topic: 'Equity Method',
    subtopic: 'Impairment',
    difficulty: 'hard',
    blueprintArea: 'BAR-III',
    skillLevel: 'Analysis',
    question: 'An equity method investment is impaired when:',
    options: [
      'Market is volatile',
      'Investee reports losses',
      'Any decline in value',
      'Fair value is below carrying amount and decline is other than temporary',
    ],
    correctAnswer: 3,
    explanation: 'Equity method impairment: FV < carrying AND decline is other than temporary. Write down to FV with loss in income. Factors: length/severity of decline, financial condition, forecasts. Cannot write up subsequently.',
    reference: 'ASC 323-10-35-32',
  },
];
