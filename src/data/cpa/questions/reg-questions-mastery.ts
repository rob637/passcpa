// REG - Regulation Mastery Questions
// 2026 CPA Exam Blueprint Compliant
// World-Class expansion - Mastery batch

import { Question } from '../../../types';

export const REG_QUESTIONS_MASTERY: Question[] = [
  {
    id: 'reg-mast-001',
    section: 'REG',
    topicId: 'reg-ethics',
    topic: 'Professional Ethics',
    subtopic: 'Circular 230 Due Diligence',
    difficulty: 'hard',
    blueprintArea: 'REG-I',
    skillLevel: 'Evaluation',
    question: 'Under Circular 230 due diligence requirements, a practitioner must:',
    options: [
      'Accept all client representations',
      'Make reasonable inquiries if information appears incorrect, inconsistent, or incomplete',
      'Verify all third-party data',
      'Obtain independent appraisals',
    ],
    correctAnswer: 1,
    explanation: 'Due diligence: rely on client info unless appears incorrect, incomplete, inconsistent. Then must make reasonable inquiries. Not required to independently verify good faith client representations unless red flags exist.',
    reference: 'Circular 230 §10.22',
  },
  {
    id: 'reg-mast-002',
    section: 'REG',
    topicId: 'reg-contracts',
    topic: 'Contract Law',
    subtopic: 'Parol Evidence Rule',
    difficulty: 'hard',
    blueprintArea: 'REG-II',
    skillLevel: 'Analysis',
    question: 'The parol evidence rule prohibits:',
    options: [
      'All oral evidence',
      'Subsequent modifications',
      'Prior or contemporaneous agreements that contradict a fully integrated written contract',
      'Interpretation evidence'
    ],
    correctAnswer: 2,
    explanation: 'Parol evidence: prior/contemporaneous oral or written agreements excluded if they contradict fully integrated contract. Exceptions: fraud, duress, mistake, condition precedent, ambiguity interpretation, subsequent modifications.',
    reference: 'Contract Law - Parol Evidence',
  },
  {
    id: 'reg-mast-003',
    section: 'REG',
    topicId: 'reg-ucc',
    topic: 'UCC Article 2',
    subtopic: 'Battle of the Forms',
    difficulty: 'hard',
    blueprintArea: 'REG-II',
    skillLevel: 'Evaluation',
    question: 'Under UCC §2-207, additional terms in an acceptance between merchants:',
    options: [
      'Become part of the contract unless they materially alter it, are objected to, or offer limits acceptance',
      'Void the acceptance',
      'Require explicit acceptance',
      'Create a counteroffer'
    ],
    correctAnswer: 0,
    explanation: 'UCC 2-207: acceptance valid despite different terms. Between merchants, additional terms become part unless: (1) offer limits, (2) material alteration, (3) seasonable objection. Material = surprise or hardship. Conflicting terms may "knock out."',
    reference: 'UCC §2-207',
  },
  {
    id: 'reg-mast-004',
    section: 'REG',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Section 121 Exclusion',
    difficulty: 'hard',
    blueprintArea: 'REG-III',
    skillLevel: 'Analysis',
    question: 'The Section 121 principal residence exclusion of $250,000/$500,000 requires:',
    options: [
      'Any ownership',
      'Ownership and use as principal residence for 2 of the 5 years before sale',
      'Continuous residence',
      'First-time seller status',
    ],
    correctAnswer: 1,
    explanation: '§121: exclude up to $250K ($500K MFJ) if owned AND used as principal residence 2 of 5 years before sale. Doesn\'t need to be continuous. Partial exclusion for health, employment change, unforeseen circumstances.',
    reference: 'IRC §121',
  },
  {
    id: 'reg-mast-005',
    section: 'REG',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Wash Sale Rule',
    difficulty: 'hard',
    blueprintArea: 'REG-III',
    skillLevel: 'Analysis',
    question: 'The wash sale rule disallows loss deduction when:',
    options: [
      'Substantially identical securities are acquired within 30 days before or after the sale',
      'Any securities are sold',
      'Only corporate stock is sold',
      'Gain results from sale'
    ],
    correctAnswer: 0,
    explanation: 'Wash sale: loss disallowed if acquire substantially identical stock/securities 30 days before OR after sale. Disallowed loss added to replacement security basis. Applies to stock, options on same stock. Not for gains.',
    reference: 'IRC §1091',
  },
  {
    id: 'reg-mast-006',
    section: 'REG',
    topicId: 'reg-basis',
    topic: 'Property Basis',
    subtopic: 'Related Party Basis',
    difficulty: 'hard',
    blueprintArea: 'REG-IV',
    skillLevel: 'Analysis',
    question: 'When property acquired by gift is sold at a loss, and FMV was below donor\'s basis at gift:',
    options: [
      'Use donor\'s basis',
      'Use selling price',
      'Use zero basis',
      'Use FMV at date of gift (dual basis rule)'
    ],
    correctAnswer: 3,
    explanation: 'Gift dual basis: For gain, use donor\'s basis (carryover). For loss, use lower of donor\'s basis or FMV at gift. If sold between the two, no gain or loss. Prevents transferring built-in losses via gifts.',
    reference: 'IRC §1015(a)',
  },
  {
    id: 'reg-mast-007',
    section: 'REG',
    topicId: 'reg-corporate',
    topic: 'Corporate Taxation',
    subtopic: 'Accumulated Earnings Tax',
    difficulty: 'hard',
    blueprintArea: 'REG-V',
    skillLevel: 'Evaluation',
    question: 'The accumulated earnings tax applies when:',
    options: [
      'Any earnings are retained',
      'A corporation accumulates earnings beyond reasonable business needs to avoid shareholder dividend tax',
      'A loss occurs',
      'S election is made',
    ],
    correctAnswer: 1,
    explanation: 'AET: 20% penalty tax on accumulated taxable income if accumulation to avoid shareholder tax. Reasonable needs: expansion, debt retirement, working capital. $250K minimum credit ($150K PSC). Burden on IRS, then shifts.',
    reference: 'IRC §531-537',
  },
  {
    id: 'reg-mast-008',
    section: 'REG',
    topicId: 'reg-corporate',
    topic: 'Corporate Taxation',
    subtopic: 'Personal Holding Company',
    difficulty: 'hard',
    blueprintArea: 'REG-V',
    skillLevel: 'Analysis',
    question: 'A corporation is a Personal Holding Company if:',
    options: [
      '5 or fewer individuals own >50% of stock AND ≥60% of AGI is PHC income',
      'It has passive income',
      'It pays dividends',
      'It has foreign shareholders'
    ],
    correctAnswer: 0,
    explanation: 'PHC test: (1) stock test - >50% value owned by 5 or fewer individuals (attribution rules), AND (2) income test - ≥60% of ordinary gross income is PHC income (dividends, interest, rents <50%, royalties). 20% penalty tax.',
    reference: 'IRC §541-547',
  },
  {
    id: 'reg-mast-009',
    section: 'REG',
    topicId: 'reg-scorp',
    topic: 'S Corporation',
    subtopic: 'Post-Termination Period',
    difficulty: 'hard',
    blueprintArea: 'REG-V',
    skillLevel: 'Analysis',
    question: 'After S election termination, the post-termination transition period allows:',
    options: [
      'Continued S treatment',
      'NOL carryback',
      'New S election immediately',
      'Loss carryover utilization and tax-free AAA distributions'
    ],
    correctAnswer: 3,
    explanation: 'PTTP: period after S termination (generally 1 year). Allows: (1) shareholders to use suspended losses against stock basis, (2) distributions from AAA treated as tax-free return of capital. Facilitates transition.',
    reference: 'IRC §1377(b)',
  },
  {
    id: 'reg-mast-010',
    section: 'REG',
    topicId: 'reg-partnership',
    topic: 'Partnership Taxation',
    subtopic: 'Inside vs Outside Basis',
    difficulty: 'hard',
    blueprintArea: 'REG-V',
    skillLevel: 'Analysis',
    question: 'The difference between inside and outside basis matters for:',
    options: [
      'Depreciation only',
      'Distributions causing gain, sales of partnership interests, and §743(b) adjustments',
      'Operating income',
      'Self-employment tax',
    ],
    correctAnswer: 1,
    explanation: 'Inside = partnership\'s basis in assets. Outside = partner\'s basis in partnership interest. Differences arise from: asset appreciation, §754 elections, contributed property. Affects: distribution gain, interest sale, optional basis adjustments.',
    reference: 'IRC §743, §751, §752',
  },
  {
    id: 'reg-mast-011',
    section: 'REG',
    topicId: 'reg-procedures',
    topic: 'Tax Procedures',
    subtopic: 'Penalty Abatement',
    difficulty: 'hard',
    blueprintArea: 'REG-I',
    skillLevel: 'Application',
    question: 'First-time penalty abatement applies when:',
    options: [
      'Any penalty is assessed',
      'Taxpayer has clean 3-year compliance history and meets other criteria',
      'Taxpayer requests it',
      'Amount is under $1,000',
    ],
    correctAnswer: 1,
    explanation: 'FTA: administrative waiver for failure to file, failure to pay, failure to deposit. Requirements: (1) no penalties in prior 3 years, (2) all required returns filed or on extension, (3) any tax due paid or in payment plan.',
    reference: 'IRM 20.1.1.3.6.1',
  },
  {
    id: 'reg-mast-012',
    section: 'REG',
    topicId: 'reg-employment',
    topic: 'Employment Tax',
    subtopic: 'Worker Classification Tests',
    difficulty: 'hard',
    blueprintArea: 'REG-III',
    skillLevel: 'Analysis',
    question: 'The ABC test for worker classification presumes employee status unless:',
    options: [
      'Worker signs contractor agreement',
      'Payment is by project',
      'Worker has multiple clients',
      'Worker is free from control, performs work outside usual business, and is independently established'
    ],
    correctAnswer: 3,
    explanation: 'ABC test (many states): presume employee unless ALL met: (A) free from control/direction, (B) work outside usual course of hiring entity\'s business, (C) customarily engaged in independent trade/occupation. Stricter than IRS common law.',
    reference: 'Worker Classification - ABC Test',
  },
  {
    id: 'reg-mast-013',
    section: 'REG',
    topicId: 'reg-property',
    topic: 'Property Transactions',
    subtopic: 'Net Section 1231 Gain',
    difficulty: 'hard',
    blueprintArea: 'REG-IV',
    skillLevel: 'Analysis',
    question: 'Net Section 1231 gain is recharacterized as ordinary income to the extent of:',
    options: [
      'All §1231 gains',
      'Unrecaptured net §1231 losses from the prior 5 years',
      '§1245 recapture only',
      'Depreciation taken',
    ],
    correctAnswer: 1,
    explanation: '§1231 lookback rule: net §1231 gain treated as ordinary income to extent of non-recaptured net §1231 losses from 5 preceding years. Prevents converting ordinary losses to capital losses and vice versa for gains.',
    reference: 'IRC §1231(c)',
  },
  {
    id: 'reg-mast-014',
    section: 'REG',
    topicId: 'reg-secured',
    topic: 'Secured Transactions',
    subtopic: 'Attachment',
    difficulty: 'hard',
    blueprintArea: 'REG-II',
    skillLevel: 'Analysis',
    question: 'A security interest attaches when:',
    options: [
      'Filing occurs',
      'Default occurs',
      'Creditor takes possession',
      'Value is given, debtor has rights in collateral, and authenticated security agreement (or possession)'
    ],
    correctAnswer: 3,
    explanation: 'Attachment (enforceable against debtor): (1) value given by secured party, (2) debtor has rights in collateral, (3) security agreement authenticated (or possession/control). All three required. After-acquired property clause extends.',
    reference: 'UCC §9-203',
  },
  {
    id: 'reg-mast-015',
    section: 'REG',
    topicId: 'reg-bankruptcy',
    topic: 'Bankruptcy',
    subtopic: 'Chapter 11 Reorganization',
    difficulty: 'hard',
    blueprintArea: 'REG-II',
    skillLevel: 'Analysis',
    question: 'In Chapter 11 bankruptcy, the debtor in possession:',
    options: [
      'Continues to operate the business with powers of a trustee',
      'Loses all control',
      'Must liquidate',
      'Cannot reject contracts'
    ],
    correctAnswer: 0,
    explanation: 'Chapter 11 DIP: debtor retains possession, operates business, has trustee powers (avoid preferences, reject executory contracts, use/sell property). Trustee appointed only for cause (fraud, mismanagement). Creditors\' committee appointed.',
    reference: 'Bankruptcy Code §1101-1129',
  },
  {
    id: 'reg-mast-016',
    section: 'REG',
    topicId: 'reg-agency',
    topic: 'Agency Law',
    subtopic: 'Apparent Authority',
    difficulty: 'hard',
    blueprintArea: 'REG-II',
    skillLevel: 'Analysis',
    question: 'Apparent authority exists when:',
    options: [
      'Principal\'s conduct causes a third party to reasonably believe the agent has authority',
      'Agent claims authority',
      'Written agreement exists',
      'Agent has actual authority'
    ],
    correctAnswer: 0,
    explanation: 'Apparent authority: principal\'s manifestation to third party creates reasonable belief agent authorized. Principal bound even without actual authority. Requirements: (1) principal\'s conduct, (2) third party reliance, (3) reasonable belief.',
    reference: 'Agency Law - Apparent Authority',
  },
  {
    id: 'reg-mast-017',
    section: 'REG',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Estimated Tax Penalties',
    difficulty: 'medium',
    blueprintArea: 'REG-III',
    skillLevel: 'Application',
    question: 'No estimated tax penalty applies if:',
    options: [
      'Any payment is made',
      'First year of filing',
      'Tax owed is less than $1,000 or payments equal 90% of current or 100%/110% of prior year tax',
      'Extensions filed'
    ],
    correctAnswer: 2,
    explanation: 'Safe harbors: (1) tax owed <$1,000 after withholding/credits, (2) pay 100% prior year (110% if AGI >$150K), (3) pay 90% current year. Calculate quarterly, annualized income method available.',
    reference: 'IRC §6654',
  },
  {
    id: 'reg-mast-018',
    section: 'REG',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Alimony Pre-2019',
    difficulty: 'medium',
    blueprintArea: 'REG-III',
    skillLevel: 'Application',
    question: 'For divorce agreements executed before 2019, alimony payments:',
    options: [
      'Are not deductible',
      'Follow post-2018 rules',
      'Are partially taxable',
      'Are deductible by payer and includible by recipient'
    ],
    correctAnswer: 3,
    explanation: 'Pre-TCJA divorces (before 2019): alimony deductible above-the-line by payer, ordinary income to recipient. Requirements: written agreement, cash, not child support, not living together, no liability after death. Post-2018: no deduction/inclusion.',
    reference: 'IRC §71, §215 (pre-TCJA)',
  },
  {
    id: 'reg-mast-019',
    section: 'REG',
    topicId: 'reg-ethics',
    topic: 'Professional Ethics',
    subtopic: 'Contingent Fees',
    difficulty: 'hard',
    blueprintArea: 'REG-I',
    skillLevel: 'Analysis',
    question: 'Under Circular 230, contingent fees are prohibited for:',
    options: [
      'All tax services',
      'Audit representation',
      'Original tax returns and amended returns claiming refunds unless reasonable belief claim will be sustained',
      'Tax planning only'
    ],
    correctAnswer: 2,
    explanation: 'Circular 230 §10.27: contingent fees prohibited for: (1) original returns, (2) amended returns/refund claims unless based on reasonable belief and properly disclosed. Allowed for: IRS exam, collections, judicial proceedings, credits.',
    reference: 'Circular 230 §10.27',
  },
  {
    id: 'reg-mast-020',
    section: 'REG',
    topicId: 'reg-procedures',
    topic: 'Tax Procedures',
    subtopic: 'Appeals Process',
    difficulty: 'hard',
    blueprintArea: 'REG-I',
    skillLevel: 'Analysis',
    question: 'The IRS Appeals function:',
    options: [
      'Is part of audit',
      'Only handles large cases',
      'Provides independent review considering hazards of litigation before trial',
      'Requires Tax Court petition'
    ],
    correctAnswer: 2,
    explanation: 'IRS Appeals: independent review, considers hazards of litigation (probability of IRS prevailing). Settlement authority. Taxpayer request after audit via protest. Alternative: Tax Court, District Court, Claims Court.',
    reference: 'IRM 8 - Appeals',
  },
  {
    id: 'reg-mast-021',
    section: 'REG',
    topicId: 'reg-corporate',
    topic: 'Corporate Taxation',
    subtopic: 'Section 336(e)',
    difficulty: 'hard',
    blueprintArea: 'REG-V',
    skillLevel: 'Analysis',
    question: 'A Section 336(e) election allows:',
    options: [
      'Tax-free stock sale',
      'Dividend treatment',
      'NOL carryforward',
      'Treatment of a qualified stock disposition as an asset sale for tax purposes'
    ],
    correctAnswer: 3,
    explanation: '§336(e): if ≥80% stock sold in 12-month period, can elect to treat as asset sale. Target recognizes gain/loss on deemed asset sale. Buyers get stepped-up basis. Alternative to §338(h)(10) for non-purchasing corporation buyers.',
    reference: 'IRC §336(e)',
  },
  {
    id: 'reg-mast-022',
    section: 'REG',
    topicId: 'reg-international',
    topic: 'International Taxation',
    subtopic: 'Form 5471',
    difficulty: 'hard',
    blueprintArea: 'REG-V',
    skillLevel: 'Application',
    question: 'Form 5471 is required when a US person:',
    options: [
      'Is a shareholder, officer, or director of certain foreign corporations meeting filing categories',
      'Has any foreign investment',
      'Receives foreign dividends only',
      'Travels internationally'
    ],
    correctAnswer: 0,
    explanation: 'Form 5471: information return for US persons with interests in CFCs. Categories: 10%+ shareholder of CFC, US persons who acquire/dispose of stock, US persons controlling foreign corp. Substantial penalties for non-filing.',
    reference: 'IRC §6038, §6046',
  },
  {
    id: 'reg-mast-023',
    section: 'REG',
    topicId: 'reg-property',
    topic: 'Property Transactions',
    subtopic: 'QSBS Exclusion',
    difficulty: 'hard',
    blueprintArea: 'REG-IV',
    skillLevel: 'Analysis',
    question: 'The Section 1202 qualified small business stock exclusion allows:',
    options: [
      'Deferral only',
      '100% exclusion of gain (for stock acquired after 9/27/2010) up to greater of $10M or 10× basis',
      '50% exclusion',
      'Capital gains treatment only',
    ],
    correctAnswer: 1,
    explanation: '§1202 QSBS: exclude 100% of gain (post-9/27/2010 acquisitions). Requirements: C corp, ≤$50M assets at issue, active business (not services/finance), hold >5 years, original issuance. Limit: greater of $10M or 10× stock basis.',
    reference: 'IRC §1202',
  },
  {
    id: 'reg-mast-024',
    section: 'REG',
    topicId: 'reg-partnership',
    topic: 'Partnership Taxation',
    subtopic: 'Self-Employment Tax',
    difficulty: 'hard',
    blueprintArea: 'REG-V',
    skillLevel: 'Analysis',
    question: 'Limited partners are generally exempt from self-employment tax except for:',
    options: [
      'Guaranteed payments for services',
      'All partnership income',
      'Distributed cash',
      'Passive income'
    ],
    correctAnswer: 0,
    explanation: 'LP SE tax: limited partner\'s share of partnership ordinary income generally excluded. Exception: guaranteed payments for services subject to SE tax. General partners: all ordinary income subject to SE tax. LLC members: complex rules.',
    reference: 'IRC §1402(a)(13)',
  },
  {
    id: 'reg-mast-025',
    section: 'REG',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'HSA Contributions',
    difficulty: 'medium',
    blueprintArea: 'REG-III',
    skillLevel: 'Application',
    question: 'Health Savings Account (HSA) contributions require:',
    options: [
      'Any health insurance',
      'Employer sponsorship',
      'Coverage under a high-deductible health plan and no other disqualifying coverage',
      'Itemizing deductions'
    ],
    correctAnswer: 2,
    explanation: 'HSA eligibility: (1) HDHP coverage, (2) no other health coverage (except permitted insurance), (3) not enrolled in Medicare, (4) not claimed as dependent. Contributions above-the-line deduction. Triple tax benefit.',
    reference: 'IRC §223',
  },
];
