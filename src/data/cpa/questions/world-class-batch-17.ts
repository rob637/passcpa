// World-Class Questions Batch 17 - Exam Quality MCQs
// 25 questions across all CPA exam sections

import { Question } from '../../../types';

export const WORLD_CLASS_BATCH_17: Question[] = [
  // FAR (4 questions)
  {
    id: 'far-wc-103',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-II',
    topicId: 'far-derivatives',
    topic: 'Derivatives',
    subtopic: 'Hedge Effectiveness',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under ASC 815, a derivative qualifies for hedge accounting only if:',
    options: [
      'The underlying asset is a financial instrument',
      'The derivative was purchased at fair value',
      'There is formal designation, documentation, and the hedge is highly effective',
      'It generates immediate income',
    ],
    correctAnswer: 2,
    explanation: 'Hedge accounting requires: (1) formal designation and documentation at inception, (2) eligible hedging instrument and hedged item, (3) highly effective in offsetting changes in FV or cash flows. Effectiveness tested quarterly.',
    reference: 'ASC 815-20-25',
  },
  {
    id: 'far-wc-104',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-IV',
    topicId: 'far-government',
    topic: 'Government Accounting',
    subtopic: 'Encumbrances',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'In governmental accounting, encumbrances are:',
    options: [
      'Revenue expected but not yet received',
      'Long-term debt obligations',
      'Commitments for future expenditures reserved from appropriations',
      'Actual expenditures recorded when incurred',
    ],
    correctAnswer: 2,
    explanation: 'Encumbrances reserve appropriations for purchase orders and contracts. They\'re budgetary controls, not GAAP expenditures. When goods/services are received, encumbrances are reversed and actual expenditures recorded.',
    reference: 'GASB Standards',
  },
  {
    id: 'far-wc-105',
    courseId: 'cpa',
    section: 'FAR',
    blueprintArea: 'FAR-III',
    topic: 'Earnings Per Share',
    subtopic: 'Contingently Issuable Shares',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Prism Corp. has 1 million shares outstanding and net income of $3 million. It has 200,000 stock options with an exercise price of $25 when the average market price is $50. Using the treasury stock method, what is diluted EPS?',
    options: [
      '$2.73',
      '$2.86',
      '$3.00',
      '$2.50',
    ],
    correctAnswer: 0,
    explanation: 'Using the treasury stock method: Proceeds from exercise = 200,000 × $25 = $5,000,000. Shares repurchased at market price = $5,000,000 ÷ $50 = 100,000 shares. Incremental dilutive shares = 200,000 − 100,000 = 100,000. Diluted weighted-average shares = 1,000,000 + 100,000 = 1,100,000. Diluted EPS = $3,000,000 ÷ 1,100,000 = $2.73. Since diluted EPS ($2.73) < basic EPS ($3.00), the options are dilutive and must be included.',
    reference: 'ASC 260-10-45',
  },
  {
    id: 'far-wc-106',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-V',
    topicId: 'far-nfp',
    topic: 'Not-for-Profit',
    subtopic: 'Collections',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A museum that does not capitalize its collection items must:',
    options: [
      'Recognize depreciation expense',
      'Disclose the policy and collections-related activities',
      'Report a loss when items are acquired',
      'Record them at estimated fair value',
    ],
    correctAnswer: 1,
    explanation: 'If a not-for-profit elects not to capitalize collection items (allowed if maintained for public exhibition/education and protected), it must describe its capitalization policy and disclose activities related to collections.',
    reference: 'ASC 958-360-50',
  },

  // AUD (4 questions)
  {
    id: 'aud-wc-103',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-I',
    topicId: 'aud-ethics',
    topic: 'Ethics',
    subtopic: 'Quality Control',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Under QC standards, engagement quality control review is required for:',
    options: [
      'Only new client engagements',
      'All assurance engagements',
      'Compilations only',
      'Audits of listed entities and engagements designated by policy',
    ],
    correctAnswer: 3,
    explanation: 'EQCR is required for: audits of listed entities, engagements where law/regulation requires it, and engagements designated by firm policy. The reviewer provides objective evaluation before report issuance.',
    reference: 'QC Section 10',
  },
  {
    id: 'aud-wc-104',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-IV',
    topicId: 'aud-sampling',
    topic: 'Sampling',
    subtopic: 'Nonsampling Risk',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Nonsampling risk arises from:',
    options: [
      'Using random instead of systematic selection',
      'Using a sample that is too small',
      'Statistical fluctuations in sample selection',
      'Human error in performing procedures or evaluating results',
    ],
    correctAnswer: 3,
    explanation: 'Nonsampling risk: errors from misinterpreting evidence, applying inappropriate procedures, failing to recognize misstatements. Unlike sampling risk, it exists even with 100% testing. Mitigated through training, supervision, quality control.',
    reference: 'AU-C 530.05',
  },
  {
    id: 'aud-wc-105',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-II',
    topicId: 'aud-fraud',
    topic: 'Fraud',
    subtopic: 'Management Override',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The audit response to the risk of management override of controls includes:',
    options: [
      'Testing journal entries and reviewing accounting estimates',
      'Decreasing the sample size for substantive tests',
      'Obtaining management representations only',
      'Relying entirely on internal audit work',
    ],
    correctAnswer: 0,
    explanation: 'Management override is presumed fraud risk on all audits. Required procedures: (1) Test appropriateness of journal entries, (2) Review estimates for bias, (3) Understand business rationale for unusual transactions.',
    reference: 'AU-C 240.32',
  },
  {
    id: 'aud-wc-106',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-V',
    topicId: 'aud-reports',
    topic: 'Audit Reports',
    subtopic: 'Key Audit Matters',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Key Audit Matters (Critical Audit Matters in the US) must be communicated:',
    options: [
      'Only in compilation engagements',
      'When specifically requested by management',
      'Only when the opinion is modified',
      'In all audits of public companies',
    ],
    correctAnswer: 3,
    explanation: 'PCAOB AS 3101 requires CAM communication in audits of public companies (except emerging growth companies unless opted in). CAMs are matters communicated to the audit committee that are especially challenging, complex, or require significant judgment.',
    reference: 'AS 3101',
  },

  // REG (4 questions)
  {
    id: 'reg-wc-103',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-II',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Education Credits',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'The American Opportunity Tax Credit maximum per eligible student is:',
    options: [
      '$2,500',
      '$5,000',
      '$4,000',
      '$1,500',
    ],
    correctAnswer: 0,
    explanation: 'AOTC: 100% of first $2,000 + 25% of next $2,000 = $2,500 max per student for first 4 years of college. 40% ($1,000) is refundable. Phases out at MAGI $80K-$90K ($160K-$180K MFJ). Modified AGI limits.',
    reference: 'IRC Section 25A',
  },
  {
    id: 'reg-wc-104',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-III',
    topicId: 'reg-corporate',
    topic: 'Corporate Taxation',
    subtopic: 'Organizational Costs',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A corporation may currently deduct organizational costs up to:',
    options: [
      '$5,000 (reduced by amounts over $50,000)',
      '$10,000',
      'Zero - all must be capitalized',
      '$500',
    ],
    correctAnswer: 0,
    explanation: 'Corps may deduct up to $5,000 of organizational costs, reduced dollar-for-dollar by amounts exceeding $50,000. Remainder amortized over 180 months. Covers legal/accounting fees for formation, not stock issuance costs.',
    reference: 'IRC Section 248',
  },
  {
    id: 'reg-wc-105',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-I',
    topicId: 'reg-business-law',
    topic: 'Business Law',
    subtopic: 'Secured Transactions',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under UCC Article 9, a purchase money security interest (PMSI) in inventory has priority over earlier perfected interests if the PMSI holder:',
    options: [
      'Obtains debtor consent',
      'Gives written notice to prior perfected creditors before debtor takes possession',
      'Has possession of the inventory',
      'Files a financing statement first',
    ],
    correctAnswer: 1,
    explanation: 'PMSI in inventory requires superpriority filing + notification. The PMSI holder must: (1) perfect before debtor receives possession, and (2) send authenticated notice to competing secured parties within 5 years of their filing.',
    reference: 'UCC 9-324',
  },
  {
    id: 'reg-wc-106',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-IV',
    topicId: 'reg-property',
    topic: 'Property Transactions',
    subtopic: 'Passive Losses',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The $25,000 rental real estate exception to passive loss rules requires:',
    options: [
      'At-risk investment over $25,000',
      'Real estate professional status',
      'Active participation with AGI under $150,000',
      'Material participation in the rental',
    ],
    correctAnswer: 2,
    explanation: 'Active participation (less than material participation) allows up to $25,000 loss against nonpassive income. Phases out $1 for every $2 of MAGI over $100,000 (eliminated at $150,000). Must own 10%+ of rental.',
    reference: 'IRC Section 469(i)',
  },

  // BAR (5 questions)
  {
    id: 'bar-wc-117',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-valuation',
    topic: 'Valuation',
    subtopic: 'WACC',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'In calculating WACC, the cost of debt is:',
    options: [
      'The prime rate plus a spread',
      'The after-tax cost based on current market yields',
      'The coupon rate on existing bonds',
      'Equal to the cost of equity',
    ],
    correctAnswer: 1,
    explanation: 'WACC uses after-tax cost of debt = Yield × (1 - tax rate). Market yields (not historical coupon rates) reflect current borrowing costs. Interest is tax-deductible, creating the tax shield advantage over equity.',
    reference: 'WACC Calculation',
  },
  {
    id: 'bar-wc-118',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-technical',
    topic: 'Technical Accounting',
    subtopic: 'Derivatives',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A fair value hedge adjusts:',
    options: [
      'Both the derivative and the hedged item to fair value',
      'The hedged item only',
      'The derivative only',
      'Neither - gains and losses go to OCI',
    ],
    correctAnswer: 0,
    explanation: 'Fair value hedge: derivative is marked to market on balance sheet. The hedged item is also adjusted for changes in fair value attributable to the hedged risk. Both adjustments flow through earnings, offsetting each other.',
    reference: 'ASC 815-25',
  },
  {
    id: 'bar-wc-119',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-IV',
    topicId: 'bar-cost',
    topic: 'Cost Accounting',
    subtopic: 'Relevant Costs',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Sunk costs are:',
    options: [
      'Variable costs that vary with production',
      'Relevant to current decisions',
      'Never relevant because they cannot be changed',
      'The same as opportunity costs',
    ],
    correctAnswer: 2,
    explanation: 'Sunk costs are past costs that cannot be recovered regardless of decision. They are irrelevant to future decisions. Only future, differential costs/benefits matter for decision-making. Avoid "sunk cost fallacy."',
    reference: 'Managerial Accounting',
  },
  {
    id: 'bar-wc-120',
    courseId: 'cpa',
    section: 'BAR',
    blueprintArea: 'BAR-I',
    topic: 'Financial Statement Analysis',
    subtopic: 'Quality of Earnings',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A company reports net income of $5M but operating cash flow of only $1.5M. Further analysis reveals $2M in capitalized software costs that competitors expense, and abnormally low bad debt provisions compared to prior years. Which earnings quality concern is most significant?',
    options: [
    'The low operating cash flow is normal for a growing software company',
    'The wide gap between net income and operating cash flow, driven by aggressive capitalization and under-provisioning, signals low earnings quality',
    'Capitalizing software costs always improves earnings quality by matching costs to revenue periods',
    'Bad debt provisions are management estimates and do not affect earnings quality assessments',
    ],
    correctAnswer: 1,
    explanation: 'The $3.5M gap between net income ($5M) and operating cash flow ($1.5M) is a major red flag. Aggressive capitalization inflates current earnings while pushing costs to future periods, and under-provisioning for bad debts overstates both revenues and assets. Together, these suggest management is using accounting discretion to inflate reported earnings—a hallmark of low earnings quality. Analysts use the accruals ratio (net income − OCF) / total assets as a key quality metric.',
    reference: 'Earnings Quality Analysis',
  },
  {
    id: 'bar-wc-121',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-valuation',
    topic: 'Valuation',
    subtopic: 'Terminal Value',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'In DCF valuation, the terminal value represents:',
    options: [
      'The initial investment',
      'The current stock price',
      'Value of all cash flows beyond the explicit forecast period',
      'Book value at liquidation',
    ],
    correctAnswer: 2,
    explanation: 'Terminal value = value of all cash flows after forecast period (often 60-80% of total DCF value). Calculated via: (1) Gordon growth model: FCF × (1+g)/(r-g), or (2) Exit multiple approach. Critical assumption in valuations.',
    reference: 'DCF Valuation',
  },

  // ISC (4 questions)
  {
    id: 'isc-wc-103',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-I',
    topicId: 'isc-governance',
    topic: 'IT Governance',
    subtopic: 'SLA',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A Service Level Agreement (SLA) primarily defines:',
    options: [
      'Expected service quality, availability, and responsibilities',
      'Physical security requirements only',
      'Hardware specifications',
      'Employee compensation',
    ],
    correctAnswer: 0,
    explanation: 'SLAs define: service scope, performance metrics (uptime, response time), responsibilities of both parties, remedies for non-compliance, change management processes. Critical for vendor management and cloud services.',
    reference: 'Service Level Management',
  },
  {
    id: 'isc-wc-104',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-II',
    topicId: 'isc-security',
    topic: 'Security Controls',
    subtopic: 'Zero Trust',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Zero Trust security architecture assumes:',
    options: [
      'Internal users are always trusted',
      'No implicit trust for any user, device, or network regardless of location',
      'Firewalls provide complete protection',
      'The network perimeter is secure',
    ],
    correctAnswer: 1,
    explanation: 'Zero Trust: "never trust, always verify" regardless of location. No implicit trust based on network location. Requires continuous verification, least privilege access, and micro-segmentation. Responds to perimeter-less environments.',
    reference: 'Zero Trust Architecture',
  },
  {
    id: 'isc-wc-105',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-systems',
    topic: 'Information Systems',
    subtopic: 'NoSQL Databases',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'NoSQL databases are best suited for:',
    options: [
      'Small datasets with fixed schemas',
      'Traditional financial reporting',
      'Large volumes of unstructured or semi-structured data',
      'Complex joins and ACID transactions',
    ],
    correctAnswer: 2,
    explanation: 'NoSQL excels with: high volume/velocity data, flexible schemas, horizontal scaling, semi-structured data (JSON, documents). Types: document (MongoDB), key-value (Redis), column (Cassandra), graph (Neo4j). Trades consistency for availability/speed.',
    reference: 'Database Systems',
  },
  {
    id: 'isc-wc-106',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-IV',
    topicId: 'isc-audit',
    topic: 'IT Audit',
    subtopic: 'CAATs',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'An organization\'s business continuity plan (BCP) identifies the financial reporting system as a critical application with a maximum tolerable downtime (MTD) of 8 hours. The BCP was last tested 3 years ago and has not been updated to reflect significant IT infrastructure changes, including migration of 60% of systems to cloud providers. Key personnel named in the BCP have since left the organization and their roles have not been reassigned. What should the auditor conclude?',
    options: [
      'Business continuity plans do not require regular testing or updates',
      'The BCP is likely ineffective \u2014 it has not been updated to reflect the current cloud-based infrastructure, key personnel are no longer available, and the 3-year testing gap means the plan\'s ability to achieve the 8-hour MTD is untested and unverified',
      'The BCP is valid as long as it exists in documented form',
      'Cloud migration simplifies business continuity and reduces the need for BCP updates',
    ],
    correctAnswer: 1,
    explanation: 'BCPs require regular updates and testing to remain viable. An outdated BCP with departed personnel creates: (1) procedures that reference non-existent on-premises infrastructure (60% migrated to cloud), (2) contact lists for people who no longer work at the organization, (3) no verification that the 8-hour MTD can be achieved, (4) false confidence in recoverability. The auditor should report the BCP as a control deficiency and recommend immediate update and testing.',
    reference: 'IT Auditing Standards',
  },

  // TCP (4 questions)
  {
    id: 'tcp-wc-103',
    courseId: 'cpa',
    section: 'TCP',
    blueprintArea: 'TCP-I',
    topic: 'Individual Tax Compliance',
    subtopic: 'Net Investment Income Tax',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A cash-basis taxpayer received a check for $10,000 on December 28 but did not deposit it until January 3 of the following year. In which year is the income recognized?',
    options: [
      'The current year (December) — constructive receipt applies when the check is received, not when deposited',
      'The following year — income is recognized when the check is deposited',
      'Split equally between both years',
      'The year the check was issued by the payer',
    ],
    correctAnswer: 0,
    explanation: 'Under the constructive receipt doctrine (Treas. Reg. §1.451-2), income is recognized when it is made available to the taxpayer without substantial limitations, regardless of actual possession. Receiving a check constitutes constructive receipt — the taxpayer has the ability to cash it. Delaying deposit to the next year does not defer recognition. The $10,000 is includible in the year the check was received (December).',
    reference: 'IRC Section 1411',
  },
  {
    id: 'tcp-wc-104',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-II',
    topicId: 'tcp-entity',
    topic: 'Entity Tax Compliance',
    subtopic: 'S Corporation Election',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Form 2553, S Corporation election, must generally be filed:',
    options: [
      'Within 75 days after the effective date or the entire preceding year',
      'Any time before the first tax return is due',
      'Within 6 months after formation',
      'By year-end',
    ],
    correctAnswer: 0,
    explanation: 'Form 2553 must be filed: by the 15th day of the 3rd month (2½ months) after the beginning of the tax year for which the election is to be effective, OR any time during the preceding tax year. Late election relief available.',
    reference: 'IRC Section 1362(b)',
  },
  {
    id: 'tcp-wc-105',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-III',
    topicId: 'tcp-planning',
    topic: 'Tax Planning',
    subtopic: 'Grantor Trusts',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'In a grantor trust, income is taxed to:',
    options: [
      'The grantor',
      'The trust itself',
      'No one - it is tax-exempt',
      'The beneficiaries',
    ],
    correctAnswer: 0,
    explanation: 'Grantor trusts are disregarded for income tax - grantor is taxed on all trust income regardless of distributions. Common for revocable trusts, trusts with retained powers. This allows tax-free transfer of growth to beneficiaries.',
    reference: 'IRC Sections 671-679',
  },
  {
    id: 'tcp-wc-106',
    courseId: 'cpa',
    section: 'TCP',
    blueprintArea: 'TCP-IV',
    topic: 'Tax Representation',
    subtopic: 'Authorization',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A CPA is preparing a return and the client provides documentation for a charitable deduction that the CPA believes is overstated by $15,000. What is the CPA\'s obligation under Circular 230?',
    options: [
    'The CPA must exercise due diligence: inquire further, request supporting documentation, and not sign the return if the position lacks a reasonable basis',
    'The CPA must report the client to the IRS',
    'The CPA should include the deduction as stated by the client',
    'The CPA should reduce the deduction by 50% as a compromise',
    ],
    correctAnswer: 0,
    explanation: 'Under Circular 230 §10.34, a practitioner may not sign a return with a position that lacks a reasonable basis or that is a willful attempt to understate liability. The CPA must exercise due diligence (§10.22) by requesting appraisals, receipts, or other evidence supporting the charitable deduction. If the client cannot substantiate the full amount, the CPA should reflect only the supportable deduction. The CPA has no duty to report the client but cannot participate in a return with known inaccuracies.',
    reference: 'IRC Section 6103; Circular 230',
  },
];