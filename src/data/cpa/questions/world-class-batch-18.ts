// World-Class Questions Batch 18 - Exam Quality MCQs
// 25 questions across all CPA exam sections

import { Question } from '../../../types';

export const WORLD_CLASS_BATCH_18: Question[] = [
  // FAR (4 questions)
  {
    id: 'far-wc-107',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-I',
    topicId: 'far-cash-flow',
    topic: 'Statement of Cash Flows',
    subtopic: 'Direct Method',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Under the direct method, cash paid to suppliers is calculated as:',
    options: [
      'Purchases + Decrease in accounts payable',
      'Cost of goods sold - Increase in inventory - Increase in accounts payable',
      'Cost of goods sold only',
      'Cost of goods sold + Increase in inventory + Decrease in accounts payable',
    ],
    correctAnswer: 3,
    explanation: 'Cash paid = COGS + Increase in inventory (purchased but not sold) + Decrease in A/P (paid more than purchased). Conversely, subtract inventory decreases and A/P increases. Converts accrual COGS to cash basis.',
    reference: 'ASC 230-10-45',
  },
  {
    id: 'far-wc-108',
    courseId: 'cpa',
    section: 'FAR',
    blueprintArea: 'FAR-II',
    topic: 'Contingencies',
    subtopic: 'Gain Contingencies',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Which of the following scenarios would most likely require disclosure but NOT accrual of a gain contingency?',
    options: [
      'A pending patent infringement suit where the company expects to collect damages',
      'An insurance claim that has been settled and paid',
      'Revenue recognized under ASC 606 for goods already delivered',
      'Receipt of a tax refund check from the IRS',
    ],
    correctAnswer: 0,
    explanation: 'Under ASC 450-30, gain contingencies should not be accrued but should be disclosed when realization is probable. A pending patent infringement suit where the company expects to collect damages represents a gain contingency requiring disclosure only. Options B and D represent realized gains (cash received), and C represents earned revenue — none of these are contingencies. The asymmetric treatment (accrue losses, disclose gains) reflects conservatism.',
    reference: 'ASC 450-30-50',
  },
  {
    id: 'far-wc-109',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-IV',
    topicId: 'far-government',
    topic: 'Government Accounting',
    subtopic: 'Major Funds',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A governmental fund is reported as a major fund if its revenues or expenditures are:',
    options: [
      'At least 10% of the corresponding total for all governmental and enterprise funds combined',
      'The fund is designated by management',
      'Both the 10% and 5% tests are met',
      'At least 5% of category totals for all governmental funds',
    ],
    correctAnswer: 2,
    explanation: 'A fund is major if it meets: (1) 10% of corresponding element (assets, liabilities, revenues, or expenditures) of category (governmental or enterprise), AND (2) 5% of combined governmental and enterprise fund total for same element.',
    reference: 'GASB 34',
  },
  {
    id: 'far-wc-110',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-III',
    topicId: 'far-consolidation',
    topic: 'Consolidation',
    subtopic: 'Variable Interest Entities',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The primary beneficiary of a Variable Interest Entity (VIE) is the entity that has:',
    options: [
      'Operating control rights only',
      'Power to direct activities and obligation to absorb losses or receive benefits',
      'The largest investment in the VIE',
      'More than 50% voting interest',
    ],
    correctAnswer: 1,
    explanation: 'Per ASC 810, primary beneficiary has BOTH: (1) power to direct activities that most significantly impact VIE\'s economic performance, AND (2) obligation to absorb losses or right to receive benefits that could be significant. Must consolidate.',
    reference: 'ASC 810-10-25',
  },

  // AUD (4 questions)
  {
    id: 'aud-wc-107',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-III',
    topicId: 'aud-procedures',
    topic: 'Audit Procedures',
    subtopic: 'Confirmation',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Positive confirmations request the respondent to:',
    options: [
      'Forward the response to management',
      'Confirm through a phone call only',
      'Reply only if the stated balance is incorrect',
      'Reply regardless of whether the balance is correct or incorrect',
    ],
    correctAnswer: 3,
    explanation: 'Positive confirmation: respond whether agreeing or disagreeing. Provides more persuasive evidence than negative. Negative: reply only if disagree. Positive used for large balances, disputed amounts, or higher risk.',
    reference: 'AU-C 505.15',
  },
  {
    id: 'aud-wc-108',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-IV',
    topicId: 'aud-sampling',
    topic: 'Sampling',
    subtopic: 'Stratification',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Stratified sampling is used primarily to:',
    options: [
      'Simplify the selection process',
      'Select items randomly without replacement',
      'Eliminate all sampling risk',
      'Reduce sample size while maintaining precision',
    ],
    correctAnswer: 3,
    explanation: 'Stratification divides population into subgroups with similar characteristics. Testing more large items (high variability) and fewer small items (low variability) reduces sample size needed for given precision. Efficient for populations with wide ranges.',
    reference: 'AU-C 530.A8',
  },
  {
    id: 'aud-wc-109',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-II',
    topicId: 'aud-internal-control',
    topic: 'Internal Control',
    subtopic: 'COSO',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'COSO\'s internal control framework includes how many components?',
    options: [
      'Seven',
      'Three',
      'Ten',
      'Five',
    ],
    correctAnswer: 3,
    explanation: 'COSO framework has 5 components: (1) Control environment, (2) Risk assessment, (3) Control activities, (4) Information and communication, (5) Monitoring activities. The 2013 update added 17 principles supporting these components.',
    reference: 'COSO Framework',
  },
  {
    id: 'aud-wc-110',
    courseId: 'cpa',
    section: 'AUD',
    blueprintArea: 'AUD-VI',
    topic: 'Other Services',
    subtopic: 'Agreed-Upon Procedures',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'An entity engages a CPA to perform agreed-upon procedures on its accounts payable aging. Under AT-C 215, which statement accurately describes the CPA\'s responsibility?',
    options: [
    'The CPA must express an opinion on the accounts payable balance',
    'The CPA performs only the specific procedures agreed upon by the specified parties and reports findings without providing an opinion or conclusion',
    'The CPA provides negative assurance on the accuracy of the aging',
    'The CPA must also test internal controls over accounts payable',
    ],
    correctAnswer: 1,
    explanation: 'In an agreed-upon procedures engagement (AT-C 215), the CPA performs only the procedures that the engaging party and other specified parties have agreed to. The CPA reports their factual findings without providing an opinion, negative assurance, or any conclusions. Users draw their own conclusions from the reported findings.',
    reference: 'AT-C Section 215',
  },
  // REG (4 questions)
  {
    id: 'reg-wc-107',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-II',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Estimated Tax',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'To avoid the underpayment penalty, taxpayers generally must pay estimated taxes equal to at least:',
    options: [
      '100% of current year tax',
      '50% of current year tax',
      '90% of current year tax or 100% of prior year tax',
      '80% of current year tax',
    ],
    correctAnswer: 2,
    explanation: 'Safe harbors: (1) 90% of current year tax, OR (2) 100% of prior year tax (110% if prior year AGI > $150K). Must pay in quarterly installments. Withholding counts toward estimated tax requirement.',
    reference: 'IRC Section 6654',
  },
  {
    id: 'reg-wc-108',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-III',
    topicId: 'reg-corporate',
    topic: 'Corporate Taxation',
    subtopic: 'Accumulated Earnings Tax',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The accumulated earnings tax is designed to:',
    options: [
      'Replace the corporate income tax',
      'Encourage dividend distributions to foreign shareholders',
      'Discourage corporations from retaining earnings to avoid shareholder dividends',
      'Tax all corporate retained earnings',
    ],
    correctAnswer: 2,
    explanation: 'AET is a penalty tax (20%) on corporations retaining earnings beyond reasonable business needs to avoid shareholder-level dividend taxes. Applies to C corps only. Reasonable needs include expansion, debt retirement, contingencies.',
    reference: 'IRC Section 531',
  },
  {
    id: 'reg-wc-109',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-I',
    topicId: 'reg-business-law',
    topic: 'Business Law',
    subtopic: 'Agency',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'An agency relationship requires:',
    options: [
      'Registration with state authorities',
      'Consent of both principal and agent',
      'Payment of compensation to the agent',
      'A written contract in all cases',
    ],
    correctAnswer: 1,
    explanation: 'Agency requires: mutual consent (express or implied), agent acts on behalf of principal, principal has right to control. No consideration required - gratuitous agency is valid. Writing required only for specific situations (Statute of Frauds).',
    reference: 'Agency Law',
  },
  {
    id: 'reg-wc-110',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-IV',
    topicId: 'reg-property',
    topic: 'Property Transactions',
    subtopic: 'Section 1245',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Section 1245 recapture provisions require:',
    options: [
      'Charitable contribution deduction for appreciated property',
      'Long-term capital gain treatment for all sales',
      'No recognition of gain if reinvested',
      'Recognizing gain on sale of personal property as ordinary income to the extent of depreciation',
    ],
    correctAnswer: 3,
    explanation: 'Section 1245: gain on disposition of depreciable personal property is ordinary income to extent of all depreciation taken. Any excess is Section 1231 gain. Depreciation recapture prevents conversion of ordinary deductions to capital gains.',
    reference: 'IRC Section 1245',
  },

  // BAR (5 questions)
  {
    id: 'bar-wc-122',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Dupont Analysis',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'The DuPont formula decomposes ROE into:',
    options: [
      'EPS × P/E ratio × Shares outstanding',
      'Profit margin × Total asset turnover × Financial leverage',
      'Current ratio × Quick ratio × Debt ratio',
      'EBITDA margin × Capex ratio × Working capital',
    ],
    correctAnswer: 1,
    explanation: 'DuPont: ROE = (Net income/Sales) × (Sales/Assets) × (Assets/Equity) = Profitability × Efficiency × Leverage. Shows drivers of shareholder returns and identifies areas for improvement.',
    reference: 'DuPont Analysis',
  },
  {
    id: 'bar-wc-123',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-valuation',
    topic: 'Valuation',
    subtopic: 'Beta',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A beta greater than 1.0 indicates:',
    options: [
      'No correlation with the market',
      'The stock is less volatile than the market',
      'The stock is more volatile than the market',
      'The stock always outperforms the market',
    ],
    correctAnswer: 2,
    explanation: 'Beta measures systematic risk relative to market. Beta > 1: amplifies market movements, Beta < 1: dampens, Beta = 1: moves with market. Used in CAPM: Expected return = Rf + β(Rm - Rf).',
    reference: 'Capital Asset Pricing Model',
  },
  {
    id: 'bar-wc-124',
    courseId: 'cpa',
    section: 'BAR',
    blueprintArea: 'BAR-III',
    topic: 'Technical Accounting',
    subtopic: 'Stock-Based Compensation',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Crane Corp. grants 50,000 restricted stock units (RSUs) to executives on January 1, Year 1. The RSUs cliff-vest after 3 years of service, and the grant-date fair value is $40 per unit. By December 31, Year 2, Crane estimates 5% forfeiture. What cumulative compensation expense should Crane recognize through Year 2?',
    options: [
    '$1,333,333',
    '$1,266,667',
    '$1,000,000',
    '$2,000,000',
    ],
    correctAnswer: 1,
    explanation: 'Under ASC 718, compensation cost = grant-date fair value × expected shares to vest, recognized over the vesting period. Total expected cost = 50,000 × (1 − 0.05) × $40 = 47,500 × $40 = $1,900,000. Cumulative expense through Year 2 = $1,900,000 × (2/3) = $1,266,667. The forfeiture estimate reduces the total pool of units expected to vest.',
    reference: 'ASC 718-10-30',
  },
  {
    id: 'bar-wc-125',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-IV',
    topicId: 'bar-cost',
    topic: 'Cost Accounting',
    subtopic: 'Transfer Pricing',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The transfer price that motivates optimal decisions in a decentralized firm is typically:',
    options: [
      'Full cost',
      'Market price when an external market exists',
      'Variable cost only',
      'Negotiated between divisions regardless of cost'
    ],
    correctAnswer: 1,
    explanation: 'Market price is preferred when: external market exists, divisions operate independently, capacity is available. Ensures goal congruence - divisions make decisions that maximize firm-wide profit. Avoids suboptimization.',
    reference: 'Transfer Pricing',
  },
  {
    id: 'bar-wc-126',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Operating Leverage',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A firm has a contribution margin of $600,000 and operating income of $200,000. What is the degree of operating leverage (DOL), and what does it imply about a 5% increase in sales?',
    options: [
      'DOL = 2.0; operating income increases by 10%',
      'DOL = 3.0; operating income increases by 15%',
      'DOL = 1.5; operating income increases by 7.5%',
      'DOL = 4.0; operating income increases by 20%',
    ],
    correctAnswer: 1,
    explanation: 'DOL = Contribution Margin / Operating Income = $600,000 / $200,000 = 3.0. A DOL of 3.0 means every 1% change in sales produces a 3% change in operating income. Therefore, a 5% sales increase produces a 15% increase in operating income (5% × 3.0 = 15%).',
    reference: 'Operating Leverage Analysis',
  },

  // ISC (4 questions)
  {
    id: 'isc-wc-107',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-I',
    topicId: 'isc-governance',
    topic: 'IT Governance',
    subtopic: 'COBIT',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'COBIT is primarily a framework for:',
    options: [
      'IT governance and management',
      'Payroll processing',
      'Physical security controls',
      'Financial reporting only',
    ],
    correctAnswer: 0,
    explanation: 'COBIT (Control Objectives for Information Technologies) provides comprehensive IT governance framework. Covers strategic alignment, value delivery, risk management, resource management, performance measurement. Complements COSO.',
    reference: 'COBIT Framework',
  },
  {
    id: 'isc-wc-108',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-II',
    topicId: 'isc-security',
    topic: 'Security Controls',
    subtopic: 'Incident Response',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An organization uses a third-party managed security services provider (MSSP) to monitor its financial systems for security incidents. The MSSP\'s SLA requires notification of critical events within 15 minutes. The auditor reviews incident logs and finds the average notification time was 4 hours, with one critical incident taking 3 days. What is the audit implication?',
    options: [
      'The MSSP is meeting its obligations as long as some notifications are timely',
      'The consistent failure to meet the 15-minute SLA means the detective control is not operating effectively, which could allow security incidents affecting financial data integrity to go unaddressed for extended periods',
      'SLA compliance is a legal matter, not an audit concern',
      'The auditor should accept the MSSP\'s performance without further evaluation',
    ],
    correctAnswer: 1,
    explanation: 'When a critical security monitoring control consistently fails to meet its designed performance criteria (4 hours vs. 15-minute SLA), the control is not operating effectively. Extended detection-to-notification delays mean attackers have more time to modify data and incident response is delayed.',
    reference: 'NIST SP 800-61',
  },
  {
    id: 'isc-wc-109',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-systems',
    topic: 'Information Systems',
    subtopic: 'CI/CD',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Continuous Integration/Continuous Deployment (CI/CD) enables:',
    options: [
      'Elimination of all code defects',
      'Automated building, testing, and deployment of code changes',
      'Annual software releases',
      'Manual testing only',
    ],
    correctAnswer: 1,
    explanation: 'CI/CD automates: code integration, automated testing, deployment pipelines. Benefits: faster releases, reduced manual errors, quick feedback. CI: frequent code merges with automated testing. CD: automated deployment to production.',
    reference: 'DevOps Practices',
  },
  {
    id: 'isc-wc-110',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-IV',
    topicId: 'isc-audit',
    topic: 'IT Audit',
    subtopic: 'Penetration Testing',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Penetration testing differs from vulnerability scanning in that it:',
    options: [
      'Focuses on policy compliance only',
      'Actively exploits vulnerabilities to demonstrate impact',
      'Is fully automated with no human involvement',
      'Only identifies potential vulnerabilities',
    ],
    correctAnswer: 1,
    explanation: 'Vulnerability scanning identifies potential weaknesses (automated, broad). Penetration testing actively exploits vulnerabilities (manual/automated, depth). Pen tests show actual risk and impact, not just theoretical vulnerabilities.',
    reference: 'Security Assessment',
  },

  // TCP (4 questions)
  {
    id: 'tcp-wc-107',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-I',
    topicId: 'tcp-individual',
    topic: 'Individual Tax Compliance',
    subtopic: 'HSA',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Health Savings Account contributions are:',
    options: [
      'Not deductible',
      'Only deductible by employers',
      'Subject to immediate taxation',
      'Deductible above the line, limited annually, and available only with HDHP',
    ],
    correctAnswer: 3,
    explanation: 'HSA contributions: above-the-line deduction (reduces AGI), requires high-deductible health plan. 2024 limits: $4,150 individual, $8,300 family + $1,000 catch-up (55+). Distributions for qualified medical expenses are tax-free.',
    reference: 'IRC Section 223',
  },
  {
    id: 'tcp-wc-108',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-II',
    topicId: 'tcp-entity',
    topic: 'Entity Tax Compliance',
    subtopic: 'LLC Taxation',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A multi-member LLC is treated by default as:',
    options: [
      'A partnership',
      'A disregarded entity',
      'A C corporation',
      'An S corporation',
    ],
    correctAnswer: 0,
    explanation: 'Default classification: multi-member LLC = partnership, single-member LLC = disregarded entity. LLCs can elect corporate status (Form 8832) or S corp status (Form 2553). Check-the-box regulations govern entity classification.',
    reference: 'Treasury Reg 301.7701',
  },
  {
    id: 'tcp-wc-109',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-III',
    topicId: 'tcp-planning',
    topic: 'Tax Planning',
    subtopic: 'Section 199A',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The qualified business income (QBI) deduction under Section 199A is limited for specified service trades or businesses (SSTBs) when:',
    options: [
      'The business operates in multiple states',
      'The business has employees',
      'QBI exceeds $100,000',
      'Taxable income exceeds threshold amounts ($182,100 single/$364,200 MFJ for 2024)',
    ],
    correctAnswer: 3,
    explanation: 'SSTBs (law, health, consulting, etc.) fully qualify for QBI deduction only when taxable income is below threshold. Phases out over $50K/$100K. Above phase-out, SSTBs get no deduction. Non-SSTBs subject to W-2/capital limits instead.',
    reference: 'IRC Section 199A',
  },
  {
    id: 'tcp-wc-110',
    courseId: 'cpa',
    section: 'TCP',
    blueprintArea: 'TCP-IV',
    topic: 'Tax Representation',
    subtopic: 'Statute of Limitations',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A taxpayer receives a statutory notice of deficiency (90-day letter) from the IRS proposing additional tax of $25,000. The taxpayer wants to contest the deficiency without paying first. What is the proper course of action?',
    options: [
      'File a petition with the U.S. Tax Court within 90 days of the notice date',
      'File a complaint in U.S. District Court within 90 days',
      'File a protest with the IRS Appeals Office',
      'Pay the deficiency and file a claim for refund within 3 years',
    ],
    correctAnswer: 0,
    explanation: 'The U.S. Tax Court is the only forum where a taxpayer can contest a proposed deficiency before paying the tax. A petition must be filed within 90 days of the statutory notice of deficiency (150 days if the notice is addressed outside the U.S.). If the taxpayer misses the 90-day deadline, they must pay the tax and file for a refund in U.S. District Court or the Court of Federal Claims. The Tax Court has jurisdiction over income, estate, and gift tax deficiencies.',
    reference: 'IRC Section 6501',
  },
];
