// World-Class Questions Batch 20 - Exam Quality MCQs
// 25 questions across all CPA exam sections

import { Question } from '../../../types';

export const WORLD_CLASS_BATCH_20: Question[] = [
  // FAR (4 questions)
  {
    id: 'far-wc-115',
    courseId: 'cpa',
    section: 'FAR',
    blueprintArea: 'FAR-I',
    topic: 'Fair Value',
    subtopic: 'Level 3 Inputs',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Granite Corp. needs to measure the fair value of a specialized manufacturing facility for which no market data exists. Granite uses a discounted cash flow model incorporating its own projections of future revenues, operating costs, and a risk-adjusted discount rate. Under ASC 820, what fair value level does this measurement represent?',
    options: [
      'Level 1 — quoted prices in active markets',
      'Level 2 — observable market-corroborated inputs',
      'Level 3 — significant unobservable inputs',
      'Not measurable at fair value under ASC 820',
    ],
    correctAnswer: 2,
    explanation: 'Under ASC 820-10-35, Level 3 inputs are unobservable inputs that reflect the entity\'s own assumptions about what market participants would use. When no observable market data exists for a specialized asset, the entity must develop its own cash flow projections, growth rates, and discount rates. Level 3 measurements require the most extensive disclosures, including quantitative information about significant unobservable inputs and sensitivity analyses.',
    reference: 'ASC 820-10-35',
  },
  {
    id: 'far-wc-116',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-II',
    topicId: 'far-bonds',
    topic: 'Bonds',
    subtopic: 'Impairment',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under the CECL model, the allowance for credit losses on debt securities is:',
    options: [
      'Recorded when a loss is probable',
      'Measured at an amount equal to lifetime expected credit losses',
      'Never recorded for investment-grade bonds',
      'Based only on realized losses',
    ],
    correctAnswer: 1,
    explanation: 'CECL (ASC 326): record allowance equal to lifetime expected credit losses at origination or purchase. Updated each reporting period. Applies to held-to-maturity debt securities (available-for-sale has separate model).',
    reference: 'ASC 326-20',
  },
  {
    id: 'far-wc-117',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-III',
    topicId: 'far-foreign-currency',
    topic: 'Foreign Currency',
    subtopic: 'Functional Currency',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A foreign subsidiary\'s functional currency is determined by:',
    options: [
      'The currency of the country of incorporation',
      'The currency of the primary economic environment',
      'The reporting currency of consolidated statements',
      'Parent company preference',
    ],
    correctAnswer: 1,
    explanation: 'Functional currency: currency of primary economic environment where entity generates/expends cash. Factors: sales prices, labor/materials costs, financing, intercompany transactions. May differ from local currency.',
    reference: 'ASC 830-10-45',
  },
  {
    id: 'far-wc-118',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-V',
    topicId: 'far-nfp',
    topic: 'Not-for-Profit',
    subtopic: 'Promises to Give',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Unconditional promises to give with payments due in future periods are recorded at:',
    options: [
      'Average historical donation amounts',
      'Present value using a discount rate',
      'Zero until received',
      'Face value',
    ],
    correctAnswer: 1,
    explanation: 'Multi-year pledges recorded at present value using risk-adjusted discount rate. Subsequent changes in present value recognized as contribution revenue (not interest). Conditional promises not recognized until conditions met.',
    reference: 'ASC 958-605-30',
  },

  // AUD (4 questions)
  {
    id: 'aud-wc-115',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-III',
    topicId: 'aud-evidence',
    topic: 'Audit Evidence',
    subtopic: 'External Confirmations',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'The most persuasive audit evidence is typically:',
    options: [
      'Prior period workpapers',
      'Client-prepared documents reviewed internally',
      'External evidence obtained directly by the auditor',
      'Oral representations from management',
    ],
    correctAnswer: 2,
    explanation: 'Evidence hierarchy: external sources more reliable than internal; directly obtained more reliable than indirectly; documents more reliable than oral; original better than copies. External confirmations sent to auditor are highly reliable.',
    reference: 'AU-C 500.A5',
  },
  {
    id: 'aud-wc-116',
    courseId: 'cpa',
    section: 'AUD',
    blueprintArea: 'AUD-IV',
    topic: 'Audit Procedures',
    subtopic: 'Analytical Procedures',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'An auditor performs analytical procedures as substantive tests on interest expense. The client has a $10M loan at 6% for the full year. The recorded interest expense is $640,000. What should the auditor conclude?',
    options: [
    'The amount is reasonable; the $40,000 difference is likely immaterial',
    'The $40,000 overstatement exceeds normal rounding and warrants further investigation',
    'Interest expense is understated',
    'The auditor cannot use analytical procedures for interest expense',
    ],
    correctAnswer: 1,
    explanation: 'Expected interest = $10M × 6% = $600,000. Recorded = $640,000, a $40,000 (6.7%) difference. Whether this warrants investigation depends on the auditor\'s threshold for substantive analytical procedures, but a precise estimate like this should produce a small variance. The $40,000 overstatement suggests possible misclassification, additional debt, or rate changes the auditor should investigate.',
    reference: 'AU-C 520.06',
  },
  {
    id: 'aud-wc-117',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-II',
    topicId: 'aud-risk',
    topic: 'Risk Assessment',
    subtopic: 'Detection Risk',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Detection risk is the risk that:',
    options: [
      'Auditor\'s procedures will not detect existing misstatement',
      'Management will commit fraud',
      'Material misstatement exists in financial statements',
      'Controls will not prevent misstatement',
    ],
    correctAnswer: 0,
    explanation: 'Detection risk: risk that audit procedures won\'t detect material misstatement. Auditor controls this through nature, timing, extent of procedures. Inversely related to assessed inherent and control risks.',
    reference: 'AU-C 200.A42',
  },
  {
    id: 'aud-wc-118',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-VI',
    topicId: 'aud-other',
    topic: 'Other Services',
    subtopic: 'Prospective Financial Information',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A CPA is engaged to examine a financial forecast under AT-C 305. The forecast assumes a 15% revenue increase based on a new product launch. What is the CPA\'s primary responsibility regarding this assumption?',
    options: [
      'Guarantee that the revenue increase will occur',
      'Evaluate whether the assumption is reasonable and provides a reasonable basis for the forecast',
      'Provide positive assurance that all assumptions will be realized',
      'Test historical revenue trends only and ignore forward-looking assumptions',
    ],
    correctAnswer: 1,
    explanation: 'Under AT-C 305, the CPA examines whether the assumptions provide a reasonable basis for the prospective financial information. The CPA does not guarantee outcomes or assure that assumptions will materialize. They evaluate the internal consistency of assumptions, their support from historical data and plausible plans, and whether they are suitably disclosed.',
    reference: 'AT-C Section 305',
  },

  // REG (4 questions)
  {
    id: 'reg-wc-115',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-II',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Filing Status',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A taxpayer whose spouse died during the tax year can file:',
    options: [
      'Married filing jointly for the year of death',
      'Head of household only',
      'Surviving spouse status for the year of death',
      'Only single status',
    ],
    correctAnswer: 0,
    explanation: 'Year of death: MFJ allowed if not remarried. Following 2 years: Qualifying surviving spouse if dependent child and not remarried. After: single or HOH if qualifies. Surviving spouse status provides full MFJ tax rates.',
    reference: 'IRC Section 2(a)',
  },
  {
    id: 'reg-wc-116',
    courseId: 'cpa',
    section: 'REG',
    blueprintArea: 'REG-III',
    topic: 'S Corporation',
    subtopic: 'Built-in Gains',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An S corporation that was previously a C corporation converted 5 years ago. It has $200,000 in built-in gains on assets it held at conversion. During the current year, the S corporation sold one of those assets for a $60,000 recognized built-in gain. What is the tax consequence?',
    options: [
      'The $60,000 built-in gain is subject to the built-in gains tax at the 21% corporate rate',
      'No built-in gains tax applies because the 5-year recognition period has expired',
      'The gain is taxed only at the shareholder level as a pass-through',
      'The built-in gains tax applies only if total gains exceed $200,000',
    ],
    correctAnswer: 0,
    explanation: 'Under IRC §1374, an S corporation that was formerly a C corporation must pay a corporate-level built-in gains (BIG) tax on gains recognized during the recognition period if those gains existed at the time of conversion. The recognition period is generally 5 years (it was temporarily shortened but has reverted). Since the sale occurred in year 5 (within the recognition period), the $60,000 built-in gain is subject to the BIG tax at the highest corporate rate of 21%, in addition to shareholder-level tax.',
    reference: 'IRC Section 1374',
  },
  {
    id: 'reg-wc-117',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-I',
    topicId: 'reg-business-law',
    topic: 'Business Law',
    subtopic: 'Statute of Frauds',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'The Statute of Frauds requires a writing for:',
    options: [
      'Service contracts under $1,000',
      'Oral lease agreements under one year',
      'Contracts for the sale of goods over $500 under UCC',
      'All contracts',
    ],
    correctAnswer: 2,
    explanation: 'Statute of Frauds requires writing for: land sales/interests, goods >=$ 500 (UCC), suretyship, marriage consideration, contracts not performable within one year, executor promises. Prevents fraud through documentation.',
    reference: 'UCC 2-201',
  },
  {
    id: 'reg-wc-118',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-IV',
    topicId: 'reg-property',
    topic: 'Property Transactions',
    subtopic: 'Installment Sales',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under the installment method, gross profit is recognized as:',
    options: [
      'Only when the note is sold',
      'Proportionally as payments are received',
      'In the final year of collection',
      'Entirely in year of sale',
    ],
    correctAnswer: 1,
    explanation: 'Installment method: gross profit % × payments received each year. GP% = (Selling price - Cost) / Selling price. Applies to deferred payment sales; not available for inventory sales or dealer dispositions.',
    reference: 'IRC Section 453',
  },

  // BAR (5 questions)
  {
    id: 'bar-wc-132',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Cash Conversion Cycle',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A CFO compares operational efficiency across three business units using the cash conversion cycle (CCC). Unit A: DIO 40, DSO 30, DPO 36. Unit B: DIO 55, DSO 25, DPO 35. Unit C: DIO 22, DSO 18, DPO 26. Which unit converts inventory to cash most efficiently?',
    options: [
      'Unit A (CCC = 34 days)',
      'Unit B (CCC = 45 days)',
      'Unit C (CCC = 14 days)',
      'All units are equally efficient',
    ],
    correctAnswer: 2,
    explanation: 'CCC = DIO + DSO − DPO. Unit A: 40 + 30 − 36 = 34. Unit B: 55 + 25 − 35 = 45. Unit C: 22 + 18 − 26 = 14. A shorter CCC means faster cash recovery from inventory investment, so Unit C at 14 days is the most efficient.',
    reference: 'Working Capital Analysis',
  },
  {
    id: 'bar-wc-133',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-valuation',
    topic: 'Valuation',
    subtopic: 'IRR',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'The internal rate of return (IRR) is the discount rate that:',
    options: [
      'Maximizes total cash flows',
      'Makes NPV equal to zero',
      'Equals the cost of capital',
      'Minimizes project risk'
    ],
    correctAnswer: 1,
    explanation: 'IRR: discount rate where PV of inflows = PV of outflows (NPV = 0). Accept projects where IRR > cost of capital. Limitations: multiple IRRs with unconventional cash flows, scale issues, reinvestment rate assumption.',
    reference: 'Capital Budgeting',
  },
  {
    id: 'bar-wc-134',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-technical',
    topic: 'Technical Accounting',
    subtopic: 'Convertible Debt',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under ASC 470-20, traditional convertible debt is initially recorded:',
    options: [
      'Entirely as a liability at proceeds received',
      'At fair value with equity component separated',
      'As equity only',
      'At the conversion value',
    ],
    correctAnswer: 0,
    explanation: 'Post-ASU 2020-06, most convertible debt recorded entirely as liability (no beneficial conversion feature separation). Simplifies accounting. Convert at carrying amount method upon conversion. Interest expense at stated rate.',
    reference: 'ASC 470-20',
  },
  {
    id: 'bar-wc-135',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-IV',
    topicId: 'bar-cost',
    topic: 'Cost Accounting',
    subtopic: 'Contribution Margin',
    difficulty: 'easy',
    skillLevel: 'Remembering and Understanding',
    question: 'Contribution margin per unit equals:',
    options: [
      'Sales price minus variable cost per unit',
      'Sales price minus all costs',
      'Fixed costs divided by units',
      'Gross profit plus fixed costs',
    ],
    correctAnswer: 0,
    explanation: 'Contribution margin = Price - Variable cost. Amount each unit contributes toward covering fixed costs and profit. CM ratio = CM/Price. Used in CVP analysis, break-even calculations, product mix decisions.',
    reference: 'Cost-Volume-Profit Analysis',
  },
  {
    id: 'bar-wc-136',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Leverage Ratios',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A company has total debt of $3.2M and total equity of $4.8M. What is the debt-to-equity ratio, and what does it indicate about the company\'s financial risk?',
    options: [
      '0.67 — moderate leverage; the company uses more equity than debt financing',
      '1.50 — high leverage; the company relies heavily on debt',
      '0.40 — low leverage; minimal financial risk',
      '0.67 — the company should increase debt to optimize its capital structure',
    ],
    correctAnswer: 0,
    explanation: 'D/E = Total Debt / Total Equity = $3.2M / $4.8M = 0.67. This means for every dollar of equity, the company has $0.67 of debt. A D/E below 1.0 indicates the company relies more on equity than debt, suggesting moderate financial risk.',
    reference: 'Leverage Ratios',
  },

  // ISC (4 questions)
  {
    id: 'isc-wc-115',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-I',
    topicId: 'isc-governance',
    topic: 'IT Governance',
    subtopic: 'Segregation of Duties',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'In IT, the functions that should be segregated include:',
    options: [
      'Management and staff',
      'Internal and external users only',
      'All users and all programmers',
      'Programming and computer operations',
    ],
    correctAnswer: 3,
    explanation: 'Key IT segregation: development/programming separate from operations (production). Also: security administration separate from development/operations, DBA separate from application development. Prevents unauthorized program changes going to production.',
    reference: 'IT Controls',
  },
  {
    id: 'isc-wc-116',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-II',
    topicId: 'isc-security',
    topic: 'Security Controls',
    subtopic: 'Social Engineering',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Phishing is an example of:',
    options: [
      'Firewall configuration',
      'Database normalization',
      'Social engineering attack',
      'Symmetric encryption',
    ],
    correctAnswer: 2,
    explanation: 'Phishing: social engineering via fraudulent emails/websites to steal credentials. Variations: spear phishing (targeted), whaling (executives), vishing (voice), smishing (SMS). Mitigated through training and technical controls.',
    reference: 'Social Engineering',
  },
  {
    id: 'isc-wc-117',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-systems',
    topic: 'Information Systems',
    subtopic: 'Backup Strategies',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'An incremental backup copies:',
    options: [
      'Selected files chosen manually',
      'Only data changed since the last backup of any type',
      'Only data changed since the last full backup',
      'All data every time',
    ],
    correctAnswer: 1,
    explanation: 'Incremental: copies only data changed since last backup (any type). Fast backup, slower recovery (needs all incrementals). Differential: copies all changes since last full backup. Full: copies everything.',
    reference: 'Backup Strategies',
  },
  {
    id: 'isc-wc-118',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-IV',
    topicId: 'isc-audit',
    topic: 'IT Audit',
    subtopic: 'General vs Application Controls',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'General IT controls differ from application controls in that they:',
    options: [
      'Are tested by application users',
      'Apply to all systems and applications broadly',
      'Are only physical controls',
      'Apply only to specific transactions',
    ],
    correctAnswer: 1,
    explanation: 'General controls: affect all systems (access security, change management, operations, BCP). Application controls: specific to individual applications (input validation, processing controls, output controls). General controls support application control effectiveness.',
    reference: 'IT Audit Standards',
  },

  // TCP (4 questions)
  {
    id: 'tcp-wc-115',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-I',
    topicId: 'tcp-individual',
    topic: 'Individual Tax Compliance',
    subtopic: 'Capital Loss Carryover',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Individual capital losses in excess of the annual limit are:',
    options: [
      'Lost forever',
      'Converted to ordinary losses',
      'Carried back two years first',
      'Carried forward indefinitely maintaining their character',
    ],
    correctAnswer: 3,
    explanation: 'Annual capital loss deduction limited to $3,000 ($1,500 MFS). Excess carried forward indefinitely, maintaining character (ST/LT). Apply ST losses against ST gains first, then LT against LT, then cross-character.',
    reference: 'IRC Section 1212',
  },
  {
    id: 'tcp-wc-116',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-II',
    topicId: 'tcp-entity',
    topic: 'Entity Tax Compliance',
    subtopic: 'Partnership Allocations',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'For partnership allocations to be respected for tax purposes, they must have:',
    options: [
      'Equal percentage to all partners',
      'IRS pre-approval',
      'Written agreement only',
      'Substantial economic effect or be in accordance with partners\' interests',
    ],
    correctAnswer: 3,
    explanation: 'Allocations respected if: substantial economic effect (proper capital accounts, liquidation follows accounts, deficit restoration) OR in accordance with partners\' interests in partnership. Prevents allocations designed only for tax avoidance.',
    reference: 'IRC Section 704(b)',
  },
  {
    id: 'tcp-wc-117',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-III',
    topicId: 'tcp-planning',
    topic: 'Tax Planning',
    subtopic: 'Tax Deferral',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Tax deferral strategies provide value primarily because of:',
    options: [
      'Simpler reporting requirements',
      'Lower audit probability',
      'Permanent exclusion of income',
      'Time value of money - later payment is better',
    ],
    correctAnswer: 3,
    explanation: 'Deferral value: tax dollars retained earn additional returns until payment due. Also: possibility of lower future rates, possible basis step-up at death. Present value of deferred tax < current tax payment.',
    reference: 'Tax Planning Principles',
  },
  {
    id: 'tcp-wc-118',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-IV',
    topicId: 'tcp-representation',
    topic: 'Tax Representation',
    subtopic: 'Offer in Compromise',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An Offer in Compromise allows settlement of tax liability based on:',
    options: [
      'Good faith estimate by the taxpayer',
      'Automatic forgiveness after 5 years',
      'Taxpayer\'s preferences only',
      'Doubt as to collectibility, doubt as to liability, or effective tax administration',
    ],
    correctAnswer: 3,
    explanation: 'OIC grounds: (1) Doubt as to liability - genuine dispute about amount owed, (2) Doubt as to collectibility - can\'t pay full amount, (3) Effective tax administration - paying would cause economic hardship or be inequitable.',
    reference: 'IRC Section 7122',
  },
];
