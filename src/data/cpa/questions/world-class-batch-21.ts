// World-Class Questions Batch 21 - Exam Quality MCQs
// 25 questions across all CPA exam sections

import { Question } from '../../../types';

export const WORLD_CLASS_BATCH_21: Question[] = [
  // FAR (4 questions)
  {
    id: 'far-wc-119',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-II',
    topicId: 'far-leases',
    topic: 'Leases',
    subtopic: 'Finance vs Operating',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under ASC 842, a lease is classified as a finance lease for the lessee if:',
    options: [
      'The lessee can terminate at any time',
      'Any one of the five classification criteria is met',
      'The lease contains only variable payments',
      'The lease term is less than 12 months',
    ],
    correctAnswer: 1,
    explanation: 'Finance lease if ANY of: (1) ownership transfers, (2) purchase option reasonably certain, (3) term is major part of asset life, (4) PV ≥ substantially all of fair value, (5) specialized asset. Otherwise operating lease.',
    reference: 'ASC 842-10-25-2',
  },
  {
    id: 'far-wc-120',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-I',
    topicId: 'far-income-statement',
    topic: 'Income Statement',
    subtopic: 'Discontinued Operations',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Discontinued operations reporting requires the disposed component to represent:',
    options: [
      'A strategic shift with major effect on operations and financial results',
      'Foreign operations only',
      'Only unprofitable segments',
      'Any asset group',
    ],
    correctAnswer: 0,
    explanation: 'ASC 205-20: discontinued operations when disposal represents strategic shift (e.g., disposing major line of business, geographical area, equity method investment, or subsidiary) with major effect on operations and financial results.',
    reference: 'ASC 205-20-45',
  },
  {
    id: 'far-wc-121',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-III',
    topicId: 'far-business-combinations',
    topic: 'Business Combinations',
    subtopic: 'Acquisition Method',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under the acquisition method, identifiable assets acquired are measured at:',
    options: [
      'Fair value at acquisition date',
      'The acquirer\'s carrying amount',
      'Book value plus 10%',
      'Historical cost to the acquiree',
    ],
    correctAnswer: 0,
    explanation: 'ASC 805 requires fair value measurement of identifiable assets acquired and liabilities assumed at acquisition date. Difference between consideration and net FV of identifiables = goodwill (or bargain purchase gain).',
    reference: 'ASC 805-20-30',
  },
  {
    id: 'far-wc-122',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-IV',
    topicId: 'far-government',
    topic: 'Government Accounting',
    subtopic: 'Net Position',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'In government-wide statements, net position is classified into:',
    options: [
      'Assets minus liabilities only',
      'Fund balance classifications',
      'Net investment in capital assets, restricted, and unrestricted',
      'Restricted and unrestricted only',
    ],
    correctAnswer: 2,
    explanation: 'Government-wide net position: (1) Net investment in capital assets (capital assets less related debt), (2) Restricted (externally imposed or by law), (3) Unrestricted. Different from fund balance classifications used in fund statements.',
    reference: 'GASB 34',
  },

  // AUD (4 questions)
  {
    id: 'aud-wc-119',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-I',
    topicId: 'aud-engagement',
    topic: 'Engagement Acceptance',
    subtopic: 'Preconditions',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Before accepting an audit engagement, the auditor must determine that:',
    options: [
      'All predecessor auditor work can be relied upon',
      'The audit fee is profitable',
      'The client has no legal issues',
      'The financial reporting framework is acceptable and management agrees to responsibilities',
    ],
    correctAnswer: 3,
    explanation: 'Preconditions: (1) acceptable financial reporting framework, (2) management acknowledges responsibilities for FS preparation, internal control, and providing access/information to auditor. Without these, decline or limit scope.',
    reference: 'AU-C 210.06',
  },
  {
    id: 'aud-wc-120',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-III',
    topicId: 'aud-procedures',
    topic: 'Audit Procedures',
    subtopic: 'Written Representations',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'The management representation letter is dated as of:',
    options: [
      'The engagement letter date',
      'The balance sheet date',
      'The planning meeting date',
      'The date of the auditor\'s report',
    ],
    correctAnswer: 3,
    explanation: 'Management representation letter dated same as auditor\'s report (or as close as practicable). Covers all representations for the period under audit. Required for all audits; refusal = scope limitation.',
    reference: 'AU-C 580.14',
  },
  {
    id: 'aud-wc-122',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-II',
    topicId: 'aud-internal-control',
    topic: 'Internal Control',
    subtopic: 'Test of Controls',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Tests of controls are required when the auditor:',
    options: [
      'Plans to rely on operating effectiveness of controls to reduce substantive testing',
      'Performs a review engagement',
      'Issues an adverse opinion',
      'Uses only substantive procedures',
    ],
    correctAnswer: 0,
    explanation: 'Test controls when: (1) assessing RMM includes expectation that controls are operating effectively, or (2) substantive procedures alone cannot provide sufficient evidence. Test nature, timing, extent, and consistency of performance.',
    reference: 'AU-C 330.08',
  },

  // REG (4 questions)
  {
    id: 'reg-wc-119',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-II',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Kiddie Tax',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The kiddie tax applies to children under age 19 (or 24 if full-time students) whose:',
    options: [
      'Unearned income exceeds the threshold amount',
      'Parent claims them as dependent',
      'Wages exceed $5,000',
      'Total income exceeds $1,250',
    ],
    correctAnswer: 0,
    explanation: 'Kiddie tax: child\'s unearned income above threshold ($2,500 in 2024) taxed at parents\' marginal rate. Applies to children under 19, under 24 if student, who don\'t provide more than half own support. Prevents income shifting.',
    reference: 'IRC Section 1(g)',
  },
  {
    id: 'reg-wc-120',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-III',
    topicId: 'reg-corporate',
    topic: 'Corporate Taxation',
    subtopic: 'Corporate Liquidations',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'In a complete liquidation of a subsidiary (Section 332), the parent corporation:',
    options: [
      'Takes a fair market value basis in assets received',
      'Must pay dividend taxes on distributions',
      'Takes a carryover basis in assets with no gain/loss recognition',
      'Recognizes gain or loss on the distribution',
    ],
    correctAnswer: 2,
    explanation: 'Section 332: if parent owns 80%+ of stock, tax-free liquidation. Parent takes carryover basis in assets, inherits tax attributes (NOLs, E&P). Subsidiary recognizes no gain/loss. Regular liquidation rules (Section 331) apply otherwise.',
    reference: 'IRC Sections 332, 334',
  },
  {
    id: 'reg-wc-121',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-I',
    topicId: 'reg-business-law',
    topic: 'Business Law',
    subtopic: 'Product Liability',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Strict product liability applies to:',
    options: [
      'Consumers who misuse products',
      'Sellers of defective products regardless of negligence',
      'Service providers exclusively',
      'Only intentional misconduct by manufacturers',
    ],
    correctAnswer: 1,
    explanation: 'Strict liability: seller liable for defective product injury without proving negligence. Requires: defect (design, manufacturing, or warning), causation, damages. Applies to commercial sellers in the chain of distribution.',
    reference: 'Restatement of Torts',
  },
  {
    id: 'reg-wc-122',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-IV',
    topicId: 'reg-property',
    topic: 'Property Transactions',
    subtopic: 'Related Party Sales',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A loss on sale of property to a related party is:',
    options: [
      'Capitalized to basis',
      'Disallowed, but may offset gain on subsequent sale by related party',
      'Converted to capital loss',
      'Fully deductible',
    ],
    correctAnswer: 1,
    explanation: 'Section 267: loss denied between related parties (>50% ownership, family, controlled entities). Disallowed loss can offset related party\'s gain on subsequent sale to unrelated party (basis pickup rule). Prevents artificial loss recognition.',
    reference: 'IRC Section 267',
  },

  // BAR (5 questions)
  {
    id: 'bar-wc-137',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-valuation',
    topic: 'Valuation',
    subtopic: 'Cost of Equity',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The CAPM formula for cost of equity is:',
    options: [
      'Dividend yield + Growth rate',
      'Risk-free rate + Beta × (Market return - Risk-free rate)',
      'Risk-free rate + Market risk premium',
      'WACC × Debt ratio',
    ],
    correctAnswer: 1,
    explanation: 'CAPM: Ke = Rf + β(Rm - Rf). Risk-free rate + company-specific risk (beta × market risk premium). Alternative: Dividend Discount Model (D1/P0 + g). Both estimate required return on equity.',
    reference: 'Capital Asset Pricing Model',
  },
  {
    id: 'bar-wc-138',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-technical',
    topic: 'Technical Accounting',
    subtopic: 'Segment Reporting',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Operating segments are determined based on:',
    options: [
      'Internal reports reviewed by the chief operating decision maker',
      'Legal entity structure',
      'Geographic location only',
      'Product profitability',
    ],
    correctAnswer: 0,
    explanation: 'ASC 280: segments identified by internal reports used by CODM to allocate resources and assess performance. Management approach reflects internal organization. May differ from legal entities or product line structure.',
    reference: 'ASC 280-10-50',
  },
  {
    id: 'bar-wc-139',
    courseId: 'cpa',
    section: 'BAR',
    blueprintArea: 'BAR-III',
    topic: 'Cost Accounting',
    subtopic: 'Flexible Budgets',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A department budgeted for 5,000 units with variable costs of $8/unit and fixed costs of $30,000. Actual production was 5,500 units with total costs of $76,500. What is the flexible budget total cost and the flexible budget variance?',
    options: [
      'Flex budget: $74,000; variance: $2,500 unfavorable',
      'Flex budget: $70,000; variance: $6,500 unfavorable',
      'Flex budget: $74,000; variance: $2,500 favorable',
      'Flex budget: $76,500; variance: $0',
    ],
    correctAnswer: 0,
    explanation: 'Flexible budget = (5,500 × $8) + $30,000 = $44,000 + $30,000 = $74,000. Flexible budget variance = Actual − Flex Budget = $76,500 − $74,000 = $2,500 unfavorable. The variance is unfavorable because actual costs exceeded the budget adjusted for actual volume. This isolates cost control (spending efficiency) from volume differences.',
    reference: 'Flexible Budgeting',
  },
  {
    id: 'bar-wc-140',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Inventory Turnover',
    difficulty: 'easy',
    skillLevel: 'Remembering and Understanding',
    question: 'Inventory turnover is calculated as:',
    options: [
      'Net sales / Average inventory',
      'Average inventory / Cost of goods sold',
      'Cost of goods sold / Average inventory',
      'Net income / Total inventory',
    ],
    correctAnswer: 2,
    explanation: 'Inventory turnover = COGS / Average inventory. Use COGS (not sales) for consistency since inventory is at cost. Higher turnover indicates efficient inventory management. Days in inventory = 365 / turnover.',
    reference: 'Activity Ratios',
  },
  {
    id: 'bar-wc-141',
    courseId: 'cpa',
    section: 'BAR',
    blueprintArea: 'BAR-II',
    topic: 'Valuation',
    subtopic: 'Discounted Cash Flow',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A company projects FCFF of $2M next year, growing at 4% per year in perpetuity. The company\'s WACC is 10%, outstanding debt is $5M, and shares outstanding are 1 million. Using the single-stage DCF model, what is the estimated intrinsic equity value per share?',
    options: [
      '$28.33',
      '$33.33',
      '$38.33',
      '$26.67',
    ],
    correctAnswer: 0,
    explanation: 'Enterprise Value = FCFF₁ / (WACC − g) = $2M / (10% − 4%) = $2M / 6% = $33.33M. Equity Value = Enterprise Value − Debt = $33.33M − $5M = $28.33M. Per share = $28.33M / 1M shares = $28.33. The Gordon Growth Model applied to FCFF gives enterprise value; subtracting debt yields equity value.',
    reference: 'Free Cash Flow',
  },

  // ISC (4 questions)
  {
    id: 'isc-wc-119',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-II',
    topicId: 'isc-security',
    topic: 'Security Controls',
    subtopic: 'PKI',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'In public key infrastructure, a certificate authority (CA) is responsible for:',
    options: [
      'Issuing digital certificates that bind public keys to identities',
      'Encrypting all data transmissions',
      'Managing password policies',
      'Creating private keys for all users',
    ],
    correctAnswer: 0,
    explanation: 'CA: trusted third party that issues digital certificates verifying identity-to-public-key binding. Components: CA (issues certs), RA (registration authority), CRL (revocation lists), certificate repository. Enables secure authentication.',
    reference: 'Public Key Infrastructure',
  },
  {
    id: 'isc-wc-120',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-systems',
    topic: 'Information Systems',
    subtopic: 'Data Lake',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A data lake differs from a data warehouse primarily because it:',
    options: [
      'Stores raw data in native format without predefined schema',
      'Only supports batch processing',
      'Is smaller in capacity',
      'Only stores structured data',
    ],
    correctAnswer: 0,
    explanation: 'Data lake: raw data storage in native format (structured, semi-structured, unstructured). Schema-on-read vs. warehouse schema-on-write. Supports diverse analytics; requires governance to avoid "data swamp."',
    reference: 'Data Architecture',
  },
  {
    id: 'isc-wc-121',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-I',
    topicId: 'isc-governance',
    topic: 'IT Governance',
    subtopic: 'BCP vs DRP',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Business continuity planning differs from disaster recovery in that BCP:',
    options: [
      'Is only for natural disasters',
      'Encompasses all business functions, not just IT recovery',
      'Requires no testing',
      'Focuses only on IT systems',
    ],
    correctAnswer: 1,
    explanation: 'BCP: comprehensive plan for maintaining all critical business functions during disruption. DRP: subset focused specifically on IT system recovery. BCP includes people, processes, facilities; DRP focuses on technology restoration.',
    reference: 'Business Continuity',
  },
  {
    id: 'isc-wc-122',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-audit',
    topic: 'IT Audit',
    subtopic: 'Embedded Audit Modules',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Embedded audit modules are:',
    options: [
      'Manual testing procedures',
      'Continuous monitoring routines built into application systems',
      'Hardware devices attached to servers',
      'External audit software installed temporarily',
    ],
    correctAnswer: 1,
    explanation: 'EAMs: audit routines programmed into production applications. Continuously monitor transactions meeting specified criteria. Advantages: real-time, 100% coverage. Disadvantages: requires development coordination, maintenance.',
    reference: 'Continuous Auditing',
  },

  // TCP (4 questions)
  {
    id: 'tcp-wc-119',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-I',
    topicId: 'tcp-individual',
    topic: 'Individual Tax Compliance',
    subtopic: 'Alimony',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'For divorce agreements executed after 2018, alimony payments are:',
    options: [
      'Split equally between parties for tax purposes',
      'Reported as capital gains',
      'Deductible by the payer and taxable to the recipient',
      'Not deductible by the payer and not taxable to the recipient',
    ],
    correctAnswer: 3,
    explanation: 'TCJA eliminated alimony deduction for payer and income inclusion for recipient for agreements executed after December 31, 2018. Pre-2019 agreements follow old rules unless modified. Child support never deductible/taxable.',
    reference: 'TCJA; IRC Section 215 (repealed)',
  },
  {
    id: 'tcp-wc-120',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-II',
    topicId: 'tcp-entity',
    topic: 'Entity Tax Compliance',
    subtopic: 'Consolidated Returns',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'To file a consolidated tax return, the parent corporation must own:',
    options: [
      'Any amount of preferred stock',
      '100% of all subsidiary stock',
      'More than 50% of subsidiary stock',
      'At least 80% of voting power and value of subsidiary stock',
    ],
    correctAnswer: 3,
    explanation: 'Consolidated return requires affiliated group: parent owns 80%+ of vote AND value of at least one subsidiary. Subsidiaries must meet same test. Benefits: offset income/losses, defer intercompany gains. Election is binding.',
    reference: 'IRC Section 1504',
  },
  {
    id: 'tcp-wc-121',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-III',
    topicId: 'tcp-planning',
    topic: 'Tax Planning',
    subtopic: 'Installment Sales',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The installment method cannot be used for:',
    options: [
      'Sales to unrelated parties',
      'Real property sales',
      'Personal property sales over $10,000',
      'Sales of publicly traded securities',
    ],
    correctAnswer: 3,
    explanation: 'Installment method unavailable for: publicly traded securities, inventory sales, dealer dispositions. Also limited for depreciation recapture (ordinary income recognized in year of sale). Available for most other deferred payment sales.',
    reference: 'IRC Section 453',
  },
  {
    id: 'tcp-wc-122',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-IV',
    topicId: 'tcp-representation',
    topic: 'Tax Representation',
    subtopic: 'Innocent Spouse Relief',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Innocent spouse relief under IRC Section 6015 requires demonstrating:',
    options: [
      'Filing an amended return within 30 days',
      'Only that the taxpayer filed jointly',
      'That the other spouse committed fraud',
      'Lack of knowledge or reason to know of the understatement and inequity of holding liable',
    ],
    correctAnswer: 3,
    explanation: 'Innocent spouse (§6015(b)): understatement due to erroneous item of other spouse, didn\'t know/have reason to know, inequitable to hold liable. Also separation of liability (§6015(c)) and equitable relief (§6015(f)) available.',
    reference: 'IRC Section 6015',
  },
];
