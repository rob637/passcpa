// World-Class Questions Batch 27 - Exam Quality MCQs
// 25 questions across all CPA exam sections

import { Question } from '../../../types';

export const WORLD_CLASS_BATCH_27: Question[] = [
  // FAR (4 questions)
  {
    id: 'far-wc-143',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-II',
    topicId: 'far-business-combinations',
    topic: 'Business Combinations',
    subtopic: 'Bargain Purchase',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A bargain purchase in a business combination results when:',
    options: [
      'Goodwill is recognized',
      'The acquisition is leveraged',
      'The fair value of net assets acquired exceeds the consideration transferred',
      'The acquirer pays more than fair value',
    ],
    correctAnswer: 2,
    explanation: 'Bargain purchase (negative goodwill): FV of identifiable net assets > consideration + noncontrolling interest + previously held equity. Before recognizing gain, reassess all measurements. Gain recognized in earnings immediately.',
    reference: 'ASC 805-30-25-2',
  },
  {
    id: 'far-wc-144',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-I',
    topicId: 'far-inventory',
    topic: 'Inventory',
    subtopic: 'Lower of Cost or NRV',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Under GAAP, inventory is written down to net realizable value when:',
    options: [
      'Cost exceeds NRV',
      'The inventory is seasonal',
      'LIFO reserve is positive',
      'NRV exceeds cost',
    ],
    correctAnswer: 0,
    explanation: 'Lower of cost or NRV (ASC 330): write down when NRV (selling price - completion/disposal costs) < cost. Loss recognized in COGS. Subsequent recovery allowed up to original cost. Item-by-item or by category.',
    reference: 'ASC 330-10-35',
  },
  {
    id: 'far-wc-145',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-III',
    topicId: 'far-eps',
    topic: 'Earnings Per Share',
    subtopic: 'Antidilutive Securities',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Potential common shares are excluded from diluted EPS when:',
    options: [
      'The company has net income',
      'Their inclusion would increase EPS (antidilutive)',
      'Treasury stock method doesn\'t apply',
      'They are convertible preferred stock',
    ],
    correctAnswer: 1,
    explanation: 'Antidilutive: inclusion increases EPS or decreases loss per share. Excluded from diluted EPS. Test each potentially dilutive security individually. Order matters: include most dilutive first, stop when incremental EPS > cumulative DEPS.',
    reference: 'ASC 260-10-45-17',
  },
  {
    id: 'far-wc-146',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-IV',
    topicId: 'far-government',
    topic: 'Government Accounting',
    subtopic: 'Infrastructure Assets',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Government infrastructure assets using the modified approach:',
    options: [
      'Are not reported',
      'Are not depreciated if maintained at established condition level with documented preservation spending',
      'Are expensed when acquired',
      'Must be depreciated',
    ],
    correctAnswer: 1,
    explanation: 'GASB modified approach: eligible infrastructure not depreciated if: (1) asset management system, (2) condition assessments at least every 3 years, (3) maintained at established condition level. Preservation costs expensed; additions/improvements capitalized.',
    reference: 'GASB 34',
  },

  // AUD (4 questions)
  {
    id: 'aud-wc-143',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-I',
    topicId: 'aud-ethics',
    topic: 'Ethics',
    subtopic: 'Confidentiality Exceptions',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Confidential client information may be disclosed when:',
    options: [
      'Information is publicly available through the auditor',
      'The client requests it in writing',
      'The auditor changes firms',
      'Subpoena, court order, or with proper client consent',
    ],
    correctAnswer: 3,
    explanation: 'Confidentiality exceptions: valid subpoena/court order, specific client consent, AICPA ethics investigation, peer review, professional standards requirement. Must respond appropriately, protect client where possible.',
    reference: 'AICPA ET 1.700',
  },
  {
    id: 'aud-wc-144',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-III',
    topicId: 'aud-procedures',
    topic: 'Audit Procedures',
    subtopic: 'Inquiry Effectiveness',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Inquiry alone is insufficient for testing controls because:',
    options: [
      'Management won\'t respond',
      'It takes too much time',
      'It is too expensive',
      'It provides only verbal evidence without corroborating the actual operation of controls',
    ],
    correctAnswer: 3,
    explanation: 'Inquiry alone cannot test control operating effectiveness. Must corroborate with observation, inspection, reperformance. Inquiry useful for understanding but must be combined with other procedures for sufficient evidence.',
    reference: 'AU-C 330.A29',
  },
  {
    id: 'aud-wc-145',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-IV',
    topicId: 'aud-reports',
    topic: 'Audit Reports',
    subtopic: 'Dating the Report',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The auditor\'s report should be dated:',
    options: [
      'When the client requests',
      'At fiscal year-end',
      'As of the balance sheet date',
      'No earlier than when sufficient appropriate evidence has been obtained',
    ],
    correctAnswer: 3,
    explanation: 'Report date: no earlier than obtaining sufficient appropriate evidence, including written representations and evidence of financial statement preparation. Defines cutoff for auditor responsibility. Dual-dating if subsequent events discovered.',
    reference: 'AU-C 700.45',
  },
  {
    id: 'aud-wc-146',
    courseId: 'cpa',
    section: 'AUD',
    blueprintArea: 'AUD-II',
    topic: 'Fraud',
    subtopic: 'Fraud Triangle',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'An auditor is testing the completeness assertion for accounts payable. Which of the following procedures would be most effective?',
    options: [
      'Confirming recorded payable balances with vendors',
      'Searching for unrecorded liabilities by examining subsequent cash disbursements after year-end',
      'Vouching recorded payables to receiving reports',
      'Recalculating invoice extensions on recorded payables',
    ],
    correctAnswer: 1,
    explanation: 'To test completeness (ensuring all obligations are recorded), the auditor should look for items NOT in the records. Examining subsequent cash disbursements identifies payments made after year-end for goods/services received before year-end that may not have been accrued. Confirming recorded balances tests existence, not completeness. Vouching tests existence/accuracy.',
    reference: 'AU-C 240.A1',
  },

  // REG (4 questions)
  {
    id: 'reg-wc-143',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-II',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Hobby Loss Rules',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under the hobby loss rules, activities not engaged in for profit:',
    options: [
      'Can deduct expenses only to extent of income from the activity (and were itemized pre-TCJA)',
      'Are never reported',
      'Create capital losses',
      'Generate fully deductible losses',
    ],
    correctAnswer: 0,
    explanation: 'Section 183: hobby income fully taxable; expenses limited to income from activity (cannot create loss). Pre-TCJA: misc itemized deductions; TCJA suspended these through 2025. Presumption of profit: 3 of 5 years (breeding: 2 of 7).',
    reference: 'IRC Section 183',
  },
  {
    id: 'reg-wc-144',
    courseId: 'cpa',
    section: 'REG',
    blueprintArea: 'REG-III',
    topic: 'Corporate Taxation',
    subtopic: 'Accumulated Earnings Tax',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Cascade Corp., a closely held C corporation, pays no dividends and has accumulated earnings of $4,500,000. The corporation can demonstrate $3,800,000 in reasonable business needs. What is the base for the accumulated earnings tax?',
    options: [
      '$700,000 — the excess of accumulated earnings over reasonable business needs',
      '$4,500,000 — the total accumulated earnings',
      '$3,800,000 — the amount of reasonable business needs',
      '$250,000 — the minimum accumulated earnings credit',
    ],
    correctAnswer: 0,
    explanation: 'The accumulated earnings tax under IRC §531 applies to accumulated taxable income, which is essentially the earnings accumulated beyond reasonable business needs minus the accumulated earnings credit. The excess = $4,500,000 − $3,800,000 = $700,000. The 20% tax applies to this amount. Reasonable business needs include working capital, expansion, debt retirement, and other specific plans documented by the corporation.',
    reference: 'IRC Section 531',
  },
  {
    id: 'reg-wc-145',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-I',
    topicId: 'reg-contracts',
    topic: 'Contract Law',
    subtopic: 'Accord and Satisfaction',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'An accord and satisfaction occurs when:',
    options: [
      'Consideration is absent',
      'One party breaches',
      'Parties agree to substitute a new obligation for an existing one, and new obligation is performed',
      'A contract is void ab initio',
    ],
    correctAnswer: 2,
    explanation: 'Accord: agreement to accept different performance than originally obligated. Satisfaction: actual performance of accord. Both required to discharge original obligation. If accord not performed, can sue on either original or accord.',
    reference: 'Contract Law',
  },
  {
    id: 'reg-wc-146',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-IV',
    topicId: 'reg-property',
    topic: 'Property Transactions',
    subtopic: 'Installment Sales',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under the installment method, the gross profit percentage is applied to:',
    options: [
      'Each principal payment received to determine recognized gain',
      'Interest payments',
      'Only the down payment',
      'Total selling price',
    ],
    correctAnswer: 0,
    explanation: 'Installment method: GP% = (selling price - basis) / selling price. Apply GP% to each principal payment received in cash. Interest taxable separately as ordinary income. May elect out and recognize all gain in year of sale.',
    reference: 'IRC Section 453',
  },

  // BAR (5 questions)
  {
    id: 'bar-wc-167',
    courseId: 'cpa',
    section: 'BAR',
    blueprintArea: 'BAR-I',
    topic: 'Financial Statement Analysis',
    subtopic: 'Free Cash Flow',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A company has operating cash flow of $850,000 and capital expenditures of $320,000. What is the free cash flow to equity (FCFE), and what does it represent?',
    options: [
    '$530,000 — cash available to equity holders after maintaining productive capacity',
    '$1,170,000 — total cash available before dividends',
    '$850,000 — operating cash flow equals FCFE',
    '$320,000 — cash reinvested in the business',
    ],
    correctAnswer: 0,
    explanation: 'Simplified FCFE = Operating Cash Flow − Capital Expenditures = $850,000 − $320,000 = $530,000. (Full formula also adjusts for net borrowing.) FCFE represents cash available to distribute to shareholders as dividends or buybacks after all operating, investing, and debt obligations are met.',
    reference: 'Cash Flow Analysis',
  },
  {
    id: 'bar-wc-168',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-valuation',
    topic: 'Valuation',
    subtopic: 'Multiple Selection',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'When selecting valuation multiples, consider:',
    options: [
      'Only P/E ratio',
      'Only the largest companies',
      'Comparability of companies, growth rates, profitability, risk profiles, and accounting differences',
      'Only historical multiples',
    ],
    correctAnswer: 2,
    explanation: 'Multiple selection: comparable growth, margins, risk, capital structure, accounting policies. EV/EBITDA for capital structure differences. P/E for bottom-line focus. Adjust for non-recurring items. Forward vs trailing multiples.',
    reference: 'Comparable Company Analysis',
  },
  {
    id: 'bar-wc-169',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-technical',
    topic: 'Technical Accounting',
    subtopic: 'Hedge Effectiveness',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'For hedge accounting, a hedging relationship must be:',
    options: [
      'Highly effective with documented strategy, risk management objective, and ongoing assessment',
      'Perfect in economic terms',
      'Only for interest rate risk',
      'Less than 80% effective',
    ],
    correctAnswer: 0,
    explanation: 'ASC 815: hedge accounting requires designation/documentation at inception, eligible hedged item/instrument, highly effective (80-125% regression or dollar offset). Prospective and retrospective assessment. Discontinue if ineffective.',
    reference: 'ASC 815-20-25',
  },
  {
    id: 'bar-wc-170',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-cost',
    topic: 'Cost Accounting',
    subtopic: 'Transfer Pricing Methods',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The market-based transfer price is most appropriate when:',
    options: [
      'No external market exists',
      'The product is unique',
      'An active competitive market exists for the intermediate product and divisions have autonomy',
      'Only cost data is available',
    ],
    correctAnswer: 2,
    explanation: 'Market-based: best when competitive market exists. Promotes goal congruence, fair evaluation. If no market: cost-based (full, variable, cost-plus) or negotiated. Each has behavioral and evaluation implications.',
    reference: 'Managerial Accounting',
  },
  {
    id: 'bar-wc-171',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Quality of Earnings',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Indicators of low earnings quality include:',
    options: [
      'Consistent GAAP application',
      'Large gap between net income and operating cash flow, aggressive revenue recognition, unusual accruals',
      'Conservative accounting choices',
      'Low debt levels'
    ],
    correctAnswer: 1,
    explanation: 'Quality red flags: NI >> CFO (accruals gap), revenue recognition issues (front-loading), declining cash conversion, unusual transactions near period-end, frequent accounting changes, consistently meeting estimates exactly.',
    reference: 'Earnings Quality Analysis',
  },

  // ISC (4 questions)
  {
    id: 'isc-wc-143',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-I',
    topicId: 'isc-governance',
    topic: 'IT Governance',
    subtopic: 'IT Risk Management',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'IT risk treatment options include:',
    options: [
      'Only technical controls',
      'Ignoring the risk',
      'Mitigate, transfer, accept, or avoid the risk',
      'Only accepting risk',
    ],
    correctAnswer: 2,
    explanation: 'Risk treatment: Mitigate (reduce likelihood/impact with controls), Transfer (insurance, outsourcing), Accept (conscious decision for low risks), Avoid (eliminate activity causing risk). Selection based on cost-benefit and risk appetite.',
    reference: 'IT Risk Management',
  },
  {
    id: 'isc-wc-144',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-II',
    topicId: 'isc-security',
    topic: 'Security Controls',
    subtopic: 'DLP Solutions',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Data Loss Prevention (DLP) solutions protect data by:',
    options: [
      'Physical security only',
      'Only managing passwords',
      'Monitoring, detecting, and blocking sensitive data transfers based on content and context',
      'Only encrypting emails',
    ],
    correctAnswer: 2,
    explanation: 'DLP: identifies sensitive data (patterns, keywords, labels), monitors movement (network, endpoint, cloud), enforces policies (block, encrypt, alert). Helps prevent exfiltration, ensure compliance. Requires classification, tuning to reduce false positives.',
    reference: 'Data Protection',
  },
  {
    id: 'isc-wc-145',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-systems',
    topic: 'Information Systems',
    subtopic: 'Database Replication',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Synchronous database replication ensures:',
    options: [
      'No data redundancy',
      'Data is written to primary and replica simultaneously before confirming transaction',
      'Faster writes than asynchronous',
      'Eventual consistency',
    ],
    correctAnswer: 1,
    explanation: 'Synchronous: transaction commits only when written to both primary and replica. Zero data loss (RPO=0). Higher latency than async. Used for critical data. Asynchronous: faster writes but potential data loss between primary and replica.',
    reference: 'Database Systems',
  },
  {
    id: 'isc-wc-146',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-audit',
    topic: 'IT Audit',
    subtopic: 'Penetration Testing',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An organization implements a Security Information and Event Management (SIEM) system to monitor its financial reporting infrastructure. The SIEM generates an average of 50,000 alerts per day. The security team has 3 analysts who can investigate approximately 100 alerts per day combined. No alert prioritization or automated triage is configured. What operational risk exists?',
    options: [
      'A high volume of alerts demonstrates comprehensive monitoring coverage',
      'The overwhelming alert volume (50,000/day) versus analyst capacity (100/day) means 99.8% of alerts go uninvestigated \u2014 critical security incidents affecting financial systems may be buried in uninvestigated alerts, effectively rendering the SIEM ineffective as a detective control',
      'Security analysts should work harder to investigate all alerts',
      'Alert fatigue is an unavoidable consequence of security monitoring',
    ],
    correctAnswer: 1,
    explanation: 'Alert fatigue is a well-documented security operations problem. When 99.8% of alerts go uninvestigated: (1) the SIEM provides a false sense of security, (2) actual incidents are lost in the noise, (3) analysts become desensitized, (4) the detective control is effectively non-functional. Solutions include: alert prioritization, automated triage, tuning to reduce false positives, SOAR integration, and adequate staffing.',
    reference: 'Security Testing',
  },

  // TCP (4 questions)
  {
    id: 'tcp-wc-143',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-I',
    topicId: 'tcp-individual',
    topic: 'Individual Tax Compliance',
    subtopic: 'Premium Tax Credit',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The Premium Tax Credit (PTC) for health insurance is available to taxpayers who:',
    options: [
      'Have employer coverage',
      'Are on Medicare',
      'Do not file taxes',
      'Purchase coverage through Marketplace, have household income 100-400% FPL (or any income post-ARP), and file joint if married',
    ],
    correctAnswer: 3,
    explanation: 'PTC: Marketplace coverage, income thresholds (expanded post-ARP), not eligible for other coverage (employer, government), MFJ if married. Advanced payments reconciled on return. Excess received = repayment (with caps).',
    reference: 'IRC Section 36B',
  },
  {
    id: 'tcp-wc-144',
    courseId: 'cpa',
    section: 'TCP',
    blueprintArea: 'TCP-II',
    topic: 'Entity Tax Compliance',
    subtopic: 'S Corp Built-In Gains',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A C corporation made a charitable contribution of appreciated stock (held over 12 months) to a qualified public charity. The stock had a basis of $30,000 and FMV of $80,000. The corporation\'s taxable income before the contribution deduction was $500,000. What is the allowable charitable deduction?',
    options: [
    '$50,000 — FMV of stock, limited to 10% of taxable income ($500,000 × 10%)',
    '$80,000 — full FMV of the stock',
    '$30,000 — limited to the stock\'s adjusted basis',
    '$40,000 — average of basis and FMV',
    ],
    correctAnswer: 0,
    explanation: 'Corporations may deduct the FMV of long-term capital gain property donated to public charities, but the deduction is limited to 10% of modified taxable income (computed before the charitable deduction). 10% × $500,000 = $50,000. Since the FMV ($80,000) exceeds the limit ($50,000), only $50,000 is deductible currently. The remaining $30,000 carries forward for up to 5 years. No reduction to basis is required for LTCG property donated to a public charity.',
    reference: 'IRC Section 1374',
  },
  {
    id: 'tcp-wc-145',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-III',
    topicId: 'tcp-planning',
    topic: 'Tax Planning',
    subtopic: 'Installment Sale Recapture',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A taxpayer sold a rental property under an installment sale. The property had accumulated depreciation of $40,000. In year 1, the taxpayer received 20% of the total payments. How much depreciation recapture must be recognized in year 1?',
    options: [
      'All $40,000 — depreciation recapture cannot be deferred under the installment method',
      '$8,000 — 20% of the recapture (proportional to payments received)',
      '$0 — recapture is deferred under the installment method',
      '$20,000 — half of the recapture',
    ],
    correctAnswer: 0,
    explanation: 'Under IRC §453(i), depreciation recapture income must be recognized in full in the year of sale, regardless of whether the installment method is used. The entire $40,000 is treated as ordinary income (§1250 recapture for real property, taxed at max 25%) in year 1. Only the gain in excess of recapture may be deferred under the installment method.',
    reference: 'IRC §453(i)',
  },
  {
    id: 'tcp-wc-146',
    courseId: 'cpa',
    section: 'TCP',
    blueprintArea: 'TCP-IV',
    topic: 'Tax Representation',
    subtopic: 'Statute of Limitations',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A taxpayer is under examination by the IRS and disagrees with the proposed adjustments. The taxpayer has received a 30-day letter. What is the taxpayer\'s next step if they wish to contest the findings?',
    options: [
    'File a written protest with the IRS Appeals Office within 30 days to request an administrative appeal',
    'File a petition with the U.S. Tax Court immediately',
    'Pay the proposed deficiency and file a claim for refund',
    'Request a private letter ruling from the IRS',
    ],
    correctAnswer: 0,
    explanation: 'After receiving a 30-day letter (preliminary notice of deficiency), the taxpayer has 30 days to file a written protest requesting a conference with the IRS Office of Appeals. This is an informal administrative process that resolves most disputes without litigation. If Appeals cannot resolve the issue, the IRS issues a 90-day letter (statutory notice of deficiency), which grants the right to petition the Tax Court before paying the tax.',
    reference: 'IRC Section 6501',
  },
];
