// World-Class Questions Batch 28 - Exam Quality MCQs
// 25 questions across all CPA exam sections

import { Question } from '../../../types';

export const WORLD_CLASS_BATCH_28: Question[] = [
  // FAR (4 questions)
  {
    id: 'far-wc-147',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-II',
    topicId: 'far-derivatives',
    topic: 'Derivatives',
    subtopic: 'Embedded Derivatives',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An embedded derivative must be separated from the host contract when:',
    options: [
      'The embedded derivative is not clearly and closely related to the host and the host is not measured at fair value',
      'Interest rates are variable',
      'The contract is with a related party',
      'The host is a debt instrument',
    ],
    correctAnswer: 0,
    explanation: 'ASC 815: separate embedded derivative if: (1) not clearly/closely related to host economic characteristics, (2) hybrid not measured at FV with changes in earnings, (3) embedded would be derivative if freestanding. Otherwise, account together.',
    reference: 'ASC 815-15-25',
  },
  {
    id: 'far-wc-148',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-I',
    topicId: 'far-cash',
    topic: 'Cash and Cash Equivalents',
    subtopic: 'Bank Reconciliation',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'In a bank reconciliation, deposits in transit:',
    options: [
      'Are added to the bank balance',
      'Require a journal entry',
      'Are subtracted from the bank balance',
      'Are subtracted from the book balance',
    ],
    correctAnswer: 0,
    explanation: 'Deposits in transit: recorded on books, not yet in bank statement. Add to bank balance. No journal entry needed (timing difference). Outstanding checks: subtract from bank. Book adjustments require entries (NSF, fees, errors).',
    reference: 'Bank Reconciliation',
  },
  {
    id: 'far-wc-149',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-III',
    topicId: 'far-segment',
    topic: 'Segment Reporting',
    subtopic: 'Quantitative Thresholds',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An operating segment is reportable if it meets any of the following 10% tests:',
    options: [
      'Geographic location only',
      'Number of employees',
      'Revenue, reported profit/loss (absolute value), or assets test',
      'Assets only',
    ],
    correctAnswer: 2,
    explanation: 'ASC 280 tests: (1) revenue ≥10% of combined segment revenues, (2) absolute profit/loss ≥10% of greater of combined profit or combined loss, (3) assets ≥10% of combined assets. Meet any one = reportable. 75% external revenue test overall.',
    reference: 'ASC 280-10-50-12',
  },
  {
    id: 'far-wc-150',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-IV',
    topicId: 'far-nfp',
    topic: 'Not-for-Profit',
    subtopic: 'Net Asset Classes',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Not-for-profit entities report net assets in how many classes?',
    options: [
      'One aggregate class',
      'Two: with donor restrictions and without donor restrictions',
      'Three unrestricted categories',
      'Four classes',
    ],
    correctAnswer: 1,
    explanation: 'ASU 2016-14: two net asset classes: (1) without donor restrictions, (2) with donor restrictions (combines former temporarily and permanently restricted). Simplified from three classes. Present underwater endowment disclosures.',
    reference: 'ASC 958-205',
  },

  // AUD (4 questions)
  {
    id: 'aud-wc-147',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-IV',
    topicId: 'aud-sampling',
    topic: 'Audit Sampling',
    subtopic: 'Sampling Risk',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Sampling risk includes:',
    options: [
      'Risk that the sample isn\'t random',
      'Only nonsampling risk',
      'Risk of fraud only',
      'Risk of incorrect acceptance and risk of incorrect rejection',
    ],
    correctAnswer: 3,
    explanation: 'Sampling risk: (1) incorrect rejection (Type I - efficiency issue), (2) incorrect acceptance (Type II - effectiveness issue). Sample may not represent population. Reduce through larger samples, proper design. Nonsampling risk is separate.',
    reference: 'AU-C 530.A1',
  },
  {
    id: 'aud-wc-148',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-II',
    topicId: 'aud-internal-control',
    topic: 'Internal Control',
    subtopic: 'Compensating Controls',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'When a control deficiency exists, compensating controls:',
    options: [
      'Eliminate the deficiency',
      'Are never relevant',
      'Always prevent material misstatement',
      'May reduce the severity but don\'t cure the underlying deficiency',
    ],
    correctAnswer: 3,
    explanation: 'Compensating controls: mitigate risk when primary control absent/ineffective. Consider in evaluating severity. Don\'t eliminate deficiency but may prevent escalation to significant deficiency or material weakness. Must operate effectively to consider.',
    reference: 'AS 2201.70',
  },
  {
    id: 'aud-wc-149',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-V',
    topicId: 'aud-reports',
    topic: 'Audit Reports',
    subtopic: 'Other Matters Paragraph',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An Other Matter paragraph in the auditor\'s report is used for:',
    options: [
      'Known departures from GAAP',
      'Adverse opinions only',
      'Emphasis of a matter in the financial statements',
      'Matters relevant to users\' understanding of the audit that are not required to be presented',
    ],
    correctAnswer: 3,
    explanation: 'Other Matter: matters not in F/S but relevant to understanding audit. Examples: prior-period F/S audited by predecessor, restriction on distribution, supplementary information. Emphasis of Matter = matters in F/S warranting emphasis.',
    reference: 'AU-C 706.08',
  },
  {
    id: 'aud-wc-150',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-III',
    topicId: 'aud-evidence',
    topic: 'Audit Evidence',
    subtopic: 'Cutoff Tests',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Cutoff testing primarily addresses:',
    options: [
      'The classification assertion only',
      'The valuation assertion',
      'Rights and obligations only',
      'The occurrence/completeness assertions and proper period recognition',
    ],
    correctAnswer: 3,
    explanation: 'Cutoff: transactions recorded in correct period. Tests occurrence (revenue recognized before delivery?), completeness (year-end purchases recorded?). Select transactions around period-end, verify proper dating. Critical for revenue and inventory.',
    reference: 'Cutoff Testing',
  },

  // REG (4 questions)
  {
    id: 'reg-wc-147',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-III',
    topicId: 'reg-s-corp',
    topic: 'S Corporation',
    subtopic: 'Basis Ordering Rules',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'S corporation basis is reduced by distributions and losses in this order:',
    options: [
      'Stock basis reduced first, then debt basis (and restored in reverse)',
      'Only at year-end',
      'Debt basis first',
      'All items simultaneously',
    ],
    correctAnswer: 0,
    explanation: 'S corp basis: stock basis reduced first (income, then distributions, then losses), debt basis only when stock zero. Restoration: debt basis first, then stock. Ordering matters for loss deduction and distribution characterization.',
    reference: 'IRC Section 1367',
  },
  {
    id: 'reg-wc-148',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-II',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Alternative Minimum Tax',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Common AMT preference items include:',
    options: [
      'Home mortgage interest',
      'State taxes deducted, incentive stock option exercise spreads, private activity bond interest',
      'Charitable contributions',
      'Standard deduction',
    ],
    correctAnswer: 1,
    explanation: 'AMT adjustments/preferences: add back SALT (state/local taxes), ISOs bargain element, private activity bond interest, certain depreciation differences. Start with regular taxable income, adjust, apply AMT rates (26%/28%).',
    reference: 'IRC Section 56',
  },
  {
    id: 'reg-wc-149',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-I',
    topicId: 'reg-agency',
    topic: 'Agency Law',
    subtopic: 'Duty of Loyalty',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'An agent\'s duty of loyalty requires:',
    options: [
      'Working for only one principal ever',
      'Acting in the principal\'s best interest and avoiding conflicts of interest',
      'Never making decisions',
      'Only performing assigned tasks',
    ],
    correctAnswer: 1,
    explanation: 'Duty of loyalty: avoid conflicts, no self-dealing, no competition with principal, maintain confidentiality, account for profits received in course of agency. Breach = liable for damages, may forfeit compensation.',
    reference: 'Agency Law',
  },
  {
    id: 'reg-wc-150',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-IV',
    topicId: 'reg-property',
    topic: 'Property Transactions',
    subtopic: 'Related Party Sales',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Losses on sales between related parties:',
    options: [
      'Are disallowed but may offset subsequent gains by the related buyer',
      'Are deferred indefinitely',
      'Are capital losses',
      'Are fully deductible',
    ],
    correctAnswer: 0,
    explanation: 'Section 267: disallowed losses between related parties (family, controlled entities). Buyer\'s subsequent gain reduced by disallowed loss (not below zero). Prevents manipulation of timing for losses. Related party definitions specific.',
    reference: 'IRC Section 267',
  },

  // BAR (5 questions)
  {
    id: 'bar-wc-172',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-valuation',
    topic: 'Valuation',
    subtopic: 'Weighted Average Cost of Capital',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The weighted average cost of capital (WACC) represents:',
    options: [
      'Blended cost of all capital sources weighted by market value proportions, used as discount rate',
      'Only cost of equity',
      'Only cost of debt',
      'Historical returns',
    ],
    correctAnswer: 0,
    explanation: 'WACC = (E/V × Re) + (D/V × Rd × (1-T)). Market value weights, after-tax cost of debt. Discount rate for firm cash flows. Reflects opportunity cost of capital. Company-specific risk reflected in cost of equity.',
    reference: 'Corporate Finance',
  },
  {
    id: 'bar-wc-173',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-technical',
    topic: 'Technical Accounting',
    subtopic: 'Asset Retirement Obligations',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An asset retirement obligation is initially recorded at:',
    options: [
      'Fair value (PV of future costs) with corresponding increase to asset cost',
      'Face value of expected costs',
      'Zero until retirement',
      'Only when probable and estimable',
    ],
    correctAnswer: 0,
    explanation: 'ASC 410: ARO at FV (PV expected settlement costs) when incurred. Debit asset cost (depreciate), credit liability (accrete using original discount rate). Revisions: adjust asset and liability. Common: environmental remediation, mine reclamation.',
    reference: 'ASC 410-20-25',
  },
  {
    id: 'bar-wc-174',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-IV',
    topicId: 'bar-planning',
    topic: 'Financial Planning',
    subtopic: 'Capital Structure Theory',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The tradeoff theory of capital structure suggests firms balance:',
    options: [
      'Only bankruptcy costs',
      'Tax benefits of debt against financial distress costs to find optimal leverage',
      'Only tax benefits',
      'Equity versus preferred stock',
    ],
    correctAnswer: 1,
    explanation: 'Tradeoff theory: debt tax shield increases value, but financial distress/bankruptcy costs eventually offset benefit. Optimal: where marginal tax benefit = marginal distress cost. Explains why different debt levels exist across industries.',
    reference: 'Capital Structure',
  },
  {
    id: 'bar-wc-175',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Altman Z-Score',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The Altman Z-Score is used to predict:',
    options: [
      'Revenue growth',
      'Bankruptcy risk based on financial ratios',
      'Stock price appreciation',
      'Interest rates',
    ],
    correctAnswer: 1,
    explanation: 'Altman Z-Score: weighted combination of 5 ratios (WC/TA, RE/TA, EBIT/TA, MV equity/BV debt, Sales/TA). Z<1.8 distress zone, Z>3.0 safe zone. Predictive model for bankruptcy probability. Different versions for private/public companies.',
    reference: 'Credit Analysis',
  },
  {
    id: 'bar-wc-176',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-valuation',
    topic: 'Valuation',
    subtopic: 'Terminal Value',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'In DCF valuation, terminal value represents:',
    options: [
      'Liquidation value',
      'Only the last year cash flow',
      'Present value of all cash flows beyond the explicit forecast period',
      'Book value',
    ],
    correctAnswer: 2,
    explanation: 'Terminal value: value at end of projection period, often 50%+ of total value. Gordon growth: FCF × (1+g) / (WACC-g). Exit multiple: EBITDA × multiple. Sensitive to assumptions (growth rate, multiple). Must be reasonable/sustainable.',
    reference: 'DCF Valuation',
  },

  // ISC (4 questions)
  {
    id: 'isc-wc-147',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-I',
    topicId: 'isc-governance',
    topic: 'IT Governance',
    subtopic: 'COBIT Framework',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'COBIT provides:',
    options: [
      'A governance and management framework for enterprise IT with principles, policies, and maturity models',
      'Only audit checklists',
      'Programming standards',
      'Only technical specifications',
    ],
    correctAnswer: 0,
    explanation: 'COBIT (ISACA): enterprise governance of IT. Principles: meeting stakeholder needs, covering enterprise end-to-end, applying single integrated framework. Domains: EDM (governance), APO/BAI/DSS/MEA (management). Maturity model for assessment.',
    reference: 'COBIT Framework',
  },
  {
    id: 'isc-wc-148',
    courseId: 'cpa',
    section: 'ISC',
    blueprintArea: 'ISC-II',
    topic: 'Security Controls',
    subtopic: 'Network Segmentation',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'An auditor tests the change management process for a client\'s financial reporting application and discovers that 12 out of 50 sampled changes were deployed to production without documented testing or approval. All 12 were classified as \'emergency changes.\' What should the auditor evaluate?',
    options: [
      'Emergency changes are exempt from all controls and no further evaluation is needed',
      'Whether the emergency change rate (24%) is reasonable, whether retroactive documentation and approval were obtained, whether the emergency changes were legitimate, and whether the standard change process has design weaknesses that encourage emergency classifications',
      'The 12 emergency changes should be ignored because they represent less than 25% of the sample',
      'Only evaluate the 38 changes that followed the standard process',
    ],
    correctAnswer: 1,
    explanation: 'A 24% emergency change rate is unusually high and may indicate that the standard change process is being circumvented. The auditor should: (1) verify that each emergency was genuinely urgent, (2) confirm retroactive testing and approval documentation exists, (3) assess whether any emergency changes affected financial calculations or data, (4) evaluate if process improvements could reduce the emergency rate, and (5) consider the implications for IT general control conclusions.',
    reference: 'Network Security',
  },
  {
    id: 'isc-wc-149',
    courseId: 'cpa',
    section: 'ISC',
    blueprintArea: 'ISC-III',
    topic: 'Information Systems',
    subtopic: 'Cloud Service Models',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'An organization contracts with a cloud service provider for infrastructure services (IaaS) hosting its financial applications. The contract allows the provider to store data in any of its global data centers without geographic restrictions. The organization is subject to data residency laws requiring financial data to remain within the United States. What compliance risk exists?',
    options: [
      'Cloud data location is determined by the provider and cannot be controlled by the customer',
      'The contract terms conflict with data residency requirements — the provider may store or replicate financial data in data centers outside the US, violating applicable data residency laws and potentially subjecting the organization to regulatory penalties',
      'Data residency laws do not apply to IaaS deployments',
      'Cloud providers automatically comply with all data residency requirements',
    ],
    correctAnswer: 1,
    explanation: 'Data residency laws require data to remain within specified geographic boundaries. When the contract allows unrestricted global storage: (1) financial data may reside in jurisdictions with different privacy/access laws, (2) foreign government access may be possible, (3) the organization violates data residency requirements, (4) regulatory penalties and reputational damage may result. The contract should specify geographic restrictions, and the organization should verify compliance.',
    reference: 'Cloud Computing',
  },
  {
    id: 'isc-wc-150',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-IV',
    topicId: 'isc-audit',
    topic: 'IT Audit',
    subtopic: 'CAAT Tools',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Computer-assisted audit techniques (CAATs) include:',
    options: [
      'Data analytics software, test data, embedded audit modules, and automated audit tools',
      'Only spreadsheets',
      'Physical inspection tools',
      'Only manual procedures',
    ],
    correctAnswer: 0,
    explanation: 'CAATs: test data (fabricated transactions), ITF (integrated test facility), parallel simulation, data analytics (ACL, IDEA), embedded modules, continuous auditing. Enable testing large populations, identifying anomalies.',
    reference: 'IT Audit Techniques',
  },

  // TCP (4 questions)
  {
    id: 'tcp-wc-147',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-II',
    topicId: 'tcp-entity',
    topic: 'Entity Tax Compliance',
    subtopic: 'Estimated Tax Penalties',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Corporations avoid the estimated tax penalty by paying:',
    options: [
      'Only at year-end',
      '50% of prior year tax',
      'Nothing quarterly',
      '100% of current year tax or 100% of prior year tax (if PY exceeds $1M, lesser of current year or 100% prior year first 3 quarters)',
    ],
    correctAnswer: 3,
    explanation: 'Corporate safe harbor: pay lesser of 100% current year or 100% prior year tax. Large corps (>$1M prior year tax): first quarter only can use prior year, rest must be annualized. Form 2220 calculates penalty.',
    reference: 'IRC Section 6655',
  },
  {
    id: 'tcp-wc-148',
    courseId: 'cpa',
    section: 'TCP',
    blueprintArea: 'TCP-I',
    topic: 'Individual Tax Compliance',
    subtopic: 'Kiddie Tax',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A single taxpayer has $350,000 of W-2 income, $50,000 of QBI from a consulting firm (specified service trade or business), and taxable income of $370,000. What is the §199A QBI deduction for 2024?',
    options: [
      '$0 — the QBI deduction for SSTBs is fully phased out above $241,950 (single)',
      '$10,000 — 20% of QBI',
      '$5,000 — partially phased out',
      '$74,000 — 20% of taxable income',
    ],
    correctAnswer: 0,
    explanation: 'For specified service trades or businesses (SSTBs — consulting, law, medicine, etc.), the QBI deduction phases out between $191,950 and $241,950 for single filers (2024). At taxable income of $370,000, which far exceeds $241,950, the QBI deduction for the SSTB is completely phased out — $0 deduction. For non-SSTBs above the threshold, the deduction is limited by W-2 wages paid and qualified property, but SSTBs get no deduction above the upper threshold.',
    reference: 'IRC Section 1(g)',
  },
  {
    id: 'tcp-wc-149',
    courseId: 'cpa',
    section: 'TCP',
    blueprintArea: 'TCP-III',
    topic: 'Tax Planning',
    subtopic: 'Grantor Trusts',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A taxpayer has a $60,000 net operating loss (NOL) from a sole proprietorship in 2024. The taxpayer also has $100,000 of W-2 income. Under current law, how is the NOL treated?',
    options: [
      'The NOL offsets up to 80% of taxable income ($80,000), leaving at least 20% taxable. The full $60,000 NOL is used since it is less than the 80% limit',
      'The NOL offsets 100% of taxable income with no limitation',
      'The NOL cannot offset W-2 income — only future business income',
      'The NOL carries back 2 years before carrying forward',
    ],
    correctAnswer: 0,
    explanation: 'Under current law (post-TCJA, post-CARES), NOLs arising in tax years beginning after December 31, 2020 may offset only 80% of taxable income in the carryforward year. NOLs generally carry forward indefinitely but cannot be carried back (the CARES Act 5-year carryback applied only to 2018-2020 NOLs). Here, 80% of $100,000 = $80,000 limit. Since the $60,000 NOL is less than $80,000, the full $60,000 is used. Remaining taxable income = $40,000.',
    reference: 'IRC Sections 671-679',
  },
  {
    id: 'tcp-wc-150',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-IV',
    topicId: 'tcp-representation',
    topic: 'Tax Representation',
    subtopic: 'Offer in Compromise',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An offer in compromise (OIC) may be accepted when:',
    options: [
      'The taxpayer refuses to pay',
      'Automatically after bankruptcy',
      'The tax debt is under $1,000',
      'Doubt exists as to collectibility, liability, or equity/hardship grounds exist',
    ],
    correctAnswer: 3,
    explanation: 'OIC grounds: (1) doubt as to liability (dispute amount owed), (2) doubt as to collectibility (can\'t pay full amount), (3) effective tax administration (exceptional circumstances, hardship). Form 656 + payment/financial disclosure.',
    reference: 'IRC Section 7122',
  },
];
