// World-Class Questions Batch 29 - Exam Quality MCQs
// 25 questions across all CPA exam sections

import { Question } from '../../../types';

export const WORLD_CLASS_BATCH_29: Question[] = [
  // FAR (4 questions)
  {
    id: 'far-wc-151',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-II',
    topicId: 'far-pensions',
    topic: 'Pensions',
    subtopic: 'Pension Asset/Liability',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The funded status of a defined benefit pension plan is:',
    options: [
      'Only the service cost component',
      'The accumulated benefit obligation',
      'The difference between plan assets and projected benefit obligation (PBO), recognized on balance sheet',
      'The annual pension expense',
    ],
    correctAnswer: 2,
    explanation: 'Funded status = Plan assets (FV) - PBO. Overfunded = asset; underfunded = liability. ASC 715 requires recognition on balance sheet. Components: service cost (income statement), other costs (OCI or earnings based on election).',
    reference: 'ASC 715-20-45',
  },
  {
    id: 'far-wc-152',
    courseId: 'cpa',
    section: 'FAR',
    blueprintArea: 'FAR-I',
    topic: 'Receivables',
    subtopic: 'CECL Model',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Reed Corp. has a $10 million trade receivable portfolio. Under ASC 326 (CECL), Reed groups receivables by risk characteristics and determines expected losses of 3.2% based on historical data, adjusted for current economic forecasts. What is the required allowance for credit losses?',
    options: [
      '$320,000',
      '$160,000',
      '$500,000',
      '$0 — trade receivables are exempt from CECL',
    ],
    correctAnswer: 0,
    explanation: 'Under ASC 326-20, trade receivables are within the scope of CECL. Reed must recognize expected credit losses based on lifetime expected losses using the pool-of-assets approach. The allowance = $10,000,000 × 3.2% = $320,000. Trade receivables may use a simplified approach (aging schedule or loss-rate method), but they are not exempt from CECL. The allowance is recorded at inception and updated each reporting period.',
    reference: 'ASC 326-20-30',
  },
  {
    id: 'far-wc-153',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-III',
    topicId: 'far-statement-cash-flows',
    topic: 'Statement of Cash Flows',
    subtopic: 'Operating Classification',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Under US GAAP, interest paid is classified as:',
    options: [
      'Investing activity',
      'Operating activity',
      'Either operating or financing (policy choice)',
      'Financing activity',
    ],
    correctAnswer: 1,
    explanation: 'GAAP: interest paid/received = operating. Dividends received = operating. Dividends paid = financing. Different from IFRS which allows policy choice for interest/dividends. Classification impacts operating cash flow metrics.',
    reference: 'ASC 230-10-45',
  },
  {
    id: 'far-wc-154',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-IV',
    topicId: 'far-government',
    topic: 'Government Accounting',
    subtopic: 'Basis Differences',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Government-wide financial statements use the economic resources measurement focus and:',
    options: [
      'Modified accrual basis',
      'Accrual basis',
      'Budgetary basis',
      'Cash basis',
    ],
    correctAnswer: 1,
    explanation: 'Government-wide: economic resources/full accrual (like commercial). Fund statements: governmental funds use current financial resources/modified accrual. Reconciliation required between fund and government-wide.',
    reference: 'GASB 34',
  },

  // AUD (4 questions)
  {
    id: 'aud-wc-151',
    courseId: 'cpa',
    section: 'AUD',
    blueprintArea: 'AUD-I',
    topic: 'Quality Control',
    subtopic: 'Engagement Quality Review',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An engagement quality reviewer (EQR) completes their review of a public company audit before the report date. Under AS 1220, which of the following is NOT a responsibility of the EQR?',
    options: [
    'Evaluating significant judgments made by the engagement team',
    'Evaluating the engagement team\'s assessment of the firm\'s independence',
    'Performing additional audit procedures to supplement the engagement team\'s work',
    'Reviewing the financial statements and the proposed audit report',
    ],
    correctAnswer: 2,
    explanation: 'The EQR evaluates the engagement team\'s work — they review significant judgments, evaluate independence, and assess the audit report, but they do not perform additional audit procedures themselves. The EQR\'s role is to provide an objective evaluation of the team\'s conclusions, not to redo or supplement the audit work.',
    reference: 'PCAOB AS 1220',
  },
  {
    id: 'aud-wc-152',
    courseId: 'cpa',
    section: 'AUD',
    blueprintArea: 'AUD-III',
    topic: 'Audit Procedures',
    subtopic: 'External Confirmation',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'An auditor sends positive confirmations to 50 customers representing 80% of accounts receivable. Eight customers do not respond after second requests. What is the most appropriate next step?',
    options: [
      'Accept the book values for non-responses because the sample is large enough',
      'Perform alternative procedures such as examining subsequent cash receipts, shipping documents, and customer correspondence',
      'Expand the sample to include 20 additional customers',
      'Issue a qualified opinion due to scope limitation',
    ],
    correctAnswer: 1,
    explanation: 'For positive confirmations with no response, the auditor must perform alternative procedures to obtain sufficient appropriate evidence (AU-C 505). Typical alternatives include: (1) examining subsequent cash receipts, (2) reviewing shipping documents and customer orders, (3) verifying invoices. Only if alternative procedures also fail to provide evidence should the auditor consider a scope limitation.',
    reference: 'AU-C 505.16',
  },
  {
    id: 'aud-wc-153',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-V',
    topicId: 'aud-reports',
    topic: 'Audit Reports',
    subtopic: 'Going Concern',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'When substantial doubt exists about going concern with adequate disclosure:',
    options: [
      'Issue disclaimer',
      'Do not modify report',
      'Issue adverse opinion',
      'Include an Emphasis of Matter paragraph after opinion paragraph',
    ],
    correctAnswer: 3,
    explanation: 'Going concern with adequate F/S disclosure: unmodified opinion + Emphasis of Matter paragraph after opinion, drawing attention to going concern disclosure. Inadequate disclosure: qualified or adverse for GAAP departure.',
    reference: 'AU-C 570.25',
  },
  {
    id: 'aud-wc-154',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-II',
    topicId: 'aud-risk',
    topic: 'Risk Assessment',
    subtopic: 'IT Risks',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Risks arising from IT include:',
    options: [
      'Only power outages',
      'Only virus infections',
      'Only hardware failures',
      'Unauthorized changes to data/programs, unauthorized data access, failure to make necessary changes, and improper manual intervention',
    ],
    correctAnswer: 3,
    explanation: 'IT risks: unauthorized changes (manual or program), unauthorized access, failure to maintain systems properly, over-reliance on systems, inadequate segregation in IT. Controls must address unique IT risks.',
    reference: 'AU-C 315.A51',
  },

  // REG (4 questions)
  {
    id: 'reg-wc-151',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-II',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Passive Activity Real Estate Exception',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The $25,000 rental real estate exception to passive activity losses requires:',
    options: [
      'Active participation, AGI limitations, and 10%+ ownership',
      'Material participation',
      'Real estate professional status',
      'No special requirements',
    ],
    correctAnswer: 0,
    explanation: '$25K exception: active participation (lighter than material), own 10%+, AGI phase-out ($100K-$150K). Real estate professionals: material participation in rental = nonpassive. Different standards for different relief provisions.',
    reference: 'IRC Section 469(i)',
  },
  {
    id: 'reg-wc-152',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-III',
    topicId: 'reg-partnership',
    topic: 'Partnership Taxation',
    subtopic: 'Hot Assets',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Hot assets in partnership interest sales include:',
    options: [
      'Only real property',
      'Unrealized receivables and substantially appreciated inventory',
      'Goodwill only',
      'Only capital assets',
    ],
    correctAnswer: 1,
    explanation: 'Section 751 hot assets: unrealized receivables (including depreciation recapture items) and substantially appreciated inventory (FMV > 120% basis). Converts capital gain to ordinary on sale of partnership interest. Anti-abuse rules.',
    reference: 'IRC Section 751',
  },
  {
    id: 'reg-wc-153',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-I',
    topicId: 'reg-negotiable',
    topic: 'Commercial Paper',
    subtopic: 'HDC Requirements',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'To be a holder in due course, one must:',
    options: [
      'Have a written agreement',
      'Be the original payee',
      'Take the instrument for value, in good faith, without notice of defenses or dishonor',
      'Simply possess the instrument',
    ],
    correctAnswer: 2,
    explanation: 'HDC: holder of negotiable instrument, taken for value, good faith, no notice of claims/defenses/dishonor, not overdue. HDC takes free of personal but not real defenses. Superior position compared to assignee.',
    reference: 'UCC 3-302',
  },
  {
    id: 'reg-wc-154',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-IV',
    topicId: 'reg-property',
    topic: 'Property Transactions',
    subtopic: 'Wash Sale Rule',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'The wash sale rule disallows a loss when substantially identical securities are purchased:',
    options: [
      'Within 90 days',
      'Within 1 year',
      'Within 30 days before or after the sale',
      'Within 60 days before or after',
    ],
    correctAnswer: 2,
    explanation: 'Wash sale: loss disallowed if substantially identical stock/securities acquired within 30 days before or after sale (61-day window). Disallowed loss added to basis of replacement securities. Applies to stocks, options, securities.',
    reference: 'IRC Section 1091',
  },

  // BAR (5 questions)
  {
    id: 'bar-wc-177',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-technical',
    topic: 'Technical Accounting',
    subtopic: 'Restructuring Charges',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Restructuring liabilities under GAAP are recognized when:',
    options: [
      'The restructuring is announced publicly',
      'Management decides to restructure',
      'A liability meets the definition (one-time termination benefits at communication, contract costs when cease use)',
      'Employees are notified of potential changes',
    ],
    correctAnswer: 2,
    explanation: 'ASC 420: one-time termination benefits recognized when plan communicated to employees. Contract termination costs when cease using right. Asset impairments separate from restructuring liability. Must be liability, not just plan.',
    reference: 'ASC 420-10-25',
  },
  {
    id: 'bar-wc-178',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Operating Leverage',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'High operating leverage means:',
    options: [
      'High fixed costs relative to variable costs, causing earnings sensitivity to sales changes',
      'Low fixed costs',
      'Low financial risk',
      'High inventory turnover',
    ],
    correctAnswer: 0,
    explanation: 'Operating leverage: proportion of fixed costs. High fixed = small sales change creates larger earnings change (amplification). DOL = % change EBIT / % change sales. High OL increases operating risk and breakeven point.',
    reference: 'Operating Leverage',
  },
  {
    id: 'bar-wc-179',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-valuation',
    topic: 'Valuation',
    subtopic: 'Sum-of-Parts',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Sum-of-the-parts (SOTP) valuation is used when:',
    options: [
      'A company has single business',
      'A company has distinct business segments that merit separate valuation approaches',
      'Only for startups',
      'Market multiples are unavailable'
    ],
    correctAnswer: 1,
    explanation: 'SOTP: value each segment separately using appropriate method (DCF, multiples), sum to get enterprise value, subtract debt. Useful for conglomerates, holding companies. Reveals conglomerate discount if market value < SOTP value.',
    reference: 'Valuation Methods',
  },
  {
    id: 'bar-wc-180',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-IV',
    topicId: 'bar-cost',
    topic: 'Cost Accounting',
    subtopic: 'Joint Cost Allocation',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The net realizable value method allocates joint costs based on:',
    options: [
      'Final sales value less separable costs for each product',
      'Physical units produced',
      'Only separable costs',
      'Management discretion',
    ],
    correctAnswer: 0,
    explanation: 'NRV method: allocate joint cost proportionally to each product\'s NRV (final sales value - separable processing costs). More equitable than physical units when products have different values. Used for joint-product costing.',
    reference: 'Cost Allocation',
  },
  {
    id: 'bar-wc-181',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-technical',
    topic: 'Technical Accounting',
    subtopic: 'Cloud Computing Arrangements',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Implementation costs for cloud computing hosting arrangements are:',
    options: [
      'Capitalized if they would be capitalized for internal-use software, then amortized over hosting term',
      'Always expensed immediately',
      'Recorded as intangible assets',
      'Never capitalized',
    ],
    correctAnswer: 0,
    explanation: 'ASU 2018-15: hosting arrangements - capitalize implementation costs similar to internal-use software (application development stage). Amortize over term plus expected renewals. Present as prepaid (balance sheet) and in same category as service fees (income statement).',
    reference: 'ASC 350-40-25',
  },

  // ISC (4 questions)
  {
    id: 'isc-wc-151',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-II',
    topicId: 'isc-security',
    topic: 'Security Controls',
    subtopic: 'SIEM Systems',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An organization uses a content delivery network (CDN) to serve its customer-facing financial portal. The auditor discovers that the CDN caches pages containing customer account balances and transaction history. The CDN\'s nodes are distributed across 30 countries, including countries without adequate data protection laws. What data governance issue exists?',
    options: [
      'CDN caching does not create data governance concerns because the data is temporary',
      'Caching personal financial data across international CDN nodes may create unintended cross-border data transfers, violating data residency requirements, privacy regulations, and the entity\'s own data classification policies',
      'CDN providers are responsible for all data protection compliance',
      'Financial data cached on CDN nodes is protected by the CDN\'s terms of service',
    ],
    correctAnswer: 1,
    explanation: 'CDN caching creates copies of data across multiple geographic locations. When the cached content includes personal financial data: (1) GDPR cross-border transfer restrictions may be violated, (2) data residency requirements (common in financial services) may be breached, (3) the entity may lose visibility into where data resides, and (4) the attack surface expands across 30 countries. The auditor should evaluate cache configurations, data classification compliance, and regulatory requirements.',
    reference: 'Security Monitoring',
  },
  {
    id: 'isc-wc-152',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-I',
    topicId: 'isc-governance',
    topic: 'IT Governance',
    subtopic: 'Service Level Agreements',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Service Level Agreements (SLAs) should define:',
    options: [
      'Internal policies only',
      'Only technical specifications',
      'Performance metrics, availability targets, remedies for non-compliance, and reporting requirements',
      'Only pricing',
    ],
    correctAnswer: 2,
    explanation: 'SLA elements: service scope, performance metrics (response time, uptime), availability targets (99.9%), remedies/credits for breach, responsibilities, escalation procedures, reporting, exclusions. Contractually enforceable.',
    reference: 'IT Contracts',
  },
  {
    id: 'isc-wc-153',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-systems',
    topic: 'Information Systems',
    subtopic: 'ETL Processing',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'ETL (Extract, Transform, Load) processes:',
    options: [
      'Encrypt data',
      'Only load data',
      'Extract data from sources, transform it to fit target format, and load into data warehouse',
      'Only extract data',
    ],
    correctAnswer: 2,
    explanation: 'ETL: Extract (pull from source systems - databases, files, APIs), Transform (clean, standardize, aggregate, business rules), Load (insert into data warehouse/target). Foundation for data warehousing, analytics, BI.',
    reference: 'Data Integration',
  },
  {
    id: 'isc-wc-154',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-IV',
    topicId: 'isc-audit',
    topic: 'IT Audit',
    subtopic: 'Change Management Testing',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'When testing change management controls, auditors should verify:',
    options: [
      'Authorization, testing, approval, segregation of duties between development and production',
      'Only user training',
      'Only development documentation',
      'Only that changes were made',
    ],
    correctAnswer: 0,
    explanation: 'Change management audit: authorized request, development/testing in non-production, approval workflow, segregation (dev can\'t migrate to production), version control, backout procedures, documentation, post-implementation review.',
    reference: 'Change Control Audit',
  },

  // TCP (4 questions)
  {
    id: 'tcp-wc-151',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-I',
    topicId: 'tcp-individual',
    topic: 'Individual Tax Compliance',
    subtopic: 'SALT Limitation',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'The TCJA SALT limitation (state and local tax deduction):',
    options: [
      'Has no limit',
      'Applies to standard deduction',
      'Only limits income taxes',
      'Caps the itemized deduction for state/local income, sales, and property taxes at $10,000 ($5,000 MFS)',
    ],
    correctAnswer: 3,
    explanation: 'SALT cap: $10K ($5K MFS) for state/local income/sales + property taxes combined. Through 2025. Major itemizer impact in high-tax states. Workarounds: PTET (passthrough entity tax), charitable contributions to state.',
    reference: 'IRC Section 164(b)(6)',
  },
  {
    id: 'tcp-wc-152',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-II',
    topicId: 'tcp-entity',
    topic: 'Entity Tax Compliance',
    subtopic: 'Partnership Allocations',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Special allocations in partnerships must have:',
    options: [
      'Only 50/50 splits',
      'No requirements',
      'IRS pre-approval',
      'Substantial economic effect to be respected for tax purposes',
    ],
    correctAnswer: 3,
    explanation: 'Section 704(b): allocations respected if substantial economic effect (economic effect: affects capital accounts; substantial: reasonable possibility partner recovers). Else allocate per partner\'s interest. Complex rules prevent tax-only allocations.',
    reference: 'IRC Section 704(b)',
  },
  {
    id: 'tcp-wc-153',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-III',
    topicId: 'tcp-planning',
    topic: 'Tax Planning',
    subtopic: 'Installment Agreements',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'IRS installment agreements allow taxpayers to:',
    options: [
      'Reduce the amount owed',
      'Avoid paying tax',
      'Stop interest accrual',
      'Pay tax liability over time with monthly payments',
    ],
    correctAnswer: 3,
    explanation: 'Installment agreement: pay over time (interest + penalties continue). Guaranteed if ≤$10K, streamlined if ≤$50K (120 day or monthly). Online application available. Requires filing compliance. User fee may apply.',
    reference: 'IRC Section 6159',
  },
  {
    id: 'tcp-wc-154',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-IV',
    topicId: 'tcp-representation',
    topic: 'Tax Representation',
    subtopic: 'Circular 230 Due Diligence',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under Circular 230, due diligence requires practitioners to:',
    options: [
      'Accept all client representations',
      'Audit the client',
      'Verify all documents independently',
      'Make reasonable inquiries if client information appears incorrect, incomplete, or inconsistent',
    ],
    correctAnswer: 3,
    explanation: 'Circular 230 diligence: can rely on client info without verification unless appears incorrect/incomplete/inconsistent. Then must make reasonable inquiry. Cannot ignore red flags. Balance reliance with professional skepticism.',
    reference: 'Circular 230, §10.22',
  },
];
