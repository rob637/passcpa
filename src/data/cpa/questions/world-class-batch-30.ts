// World-Class Questions Batch 30 - Exam Quality MCQs
// 25 questions across all CPA exam sections

import { Question } from '../../../types';

export const WORLD_CLASS_BATCH_30: Question[] = [
  // FAR (4 questions)
  {
    id: 'far-wc-155',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-II',
    topicId: 'far-intangibles',
    topic: 'Intangible Assets',
    subtopic: 'Software Development',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Costs of internally developed software for sale are capitalized when:',
    options: [
      'Technological feasibility is established through detailed program design or working model',
      'The product is marketed',
      'All development costs',
      'Research begins',
    ],
    correctAnswer: 0,
    explanation: 'ASC 985-20: capitalize after technological feasibility (detailed program design tested or working model). Expense R&D before feasibility. Amortize greater of straight-line or revenue ratio. Different from internal-use software (ASC 350-40).',
    reference: 'ASC 985-20-25',
  },
  {
    id: 'far-wc-156',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-I',
    topicId: 'far-investments',
    topic: 'Investments',
    subtopic: 'Equity Method',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under the equity method, the investor\'s share of investee losses:',
    options: [
      'Reduces the investment account but not below zero (unless guarantees exist)',
      'Is recognized only when received',
      'Creates a liability',
      'Is never recognized',
    ],
    correctAnswer: 0,
    explanation: 'Equity method losses: reduce investment to zero, then stop unless investor has funded losses or guaranteed obligations. Continue in memo. When profitable, don\'t resume until investor\'s share of income exceeds unrecognized losses.',
    reference: 'ASC 323-10-35-19',
  },
  {
    id: 'far-wc-157',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-III',
    topicId: 'far-interim',
    topic: 'Interim Reporting',
    subtopic: 'Integral Approach',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under ASC 270, interim periods are viewed primarily as:',
    options: [
      'Cash basis periods',
      'Integral parts of the annual period with estimated annual expenses allocated',
      'Only for quarterly filings',
      'Discrete periods independent of annual',
    ],
    correctAnswer: 1,
    explanation: 'Integral view: interim = part of annual, certain costs allocated/estimated over year (income taxes, bonuses, advertising). Some costs: discrete (unusual, infrequent). Tax provision uses estimated annual effective rate.',
    reference: 'ASC 270-10-45',
  },
  {
    id: 'far-wc-158',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-IV',
    topicId: 'far-nfp',
    topic: 'Not-for-Profit',
    subtopic: 'Functional Expense Presentation',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'NFP entities must present expenses classified by function and:',
    options: [
      'Net without details',
      'Only by natural classification',
      'Nature, either in a matrix or in notes',
      'Only by function',
    ],
    correctAnswer: 2,
    explanation: 'ASU 2016-14: expenses by function (program, M&G, fundraising) AND nature (salaries, rent, supplies). Matrix format or functional in statements with nature in notes. Shows how resources used in mission.',
    reference: 'ASC 958-720-45',
  },

  // AUD (4 questions)
  {
    id: 'aud-wc-155',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-IV',
    topicId: 'aud-sampling',
    topic: 'Audit Sampling',
    subtopic: 'Tolerable Deviation Rate',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The tolerable rate of deviation (TRD) in control testing represents:',
    options: [
      'Industry benchmark',
      'Actual error rate found',
      'Expected error rate',
      'Maximum rate of deviations the auditor will accept and still rely on controls',
    ],
    correctAnswer: 3,
    explanation: 'TRD: maximum deviation rate auditor tolerates while still relying on control. Higher TRD = smaller sample needed. Set based on planned reliance on control. If sample deviation rate > TRD, cannot rely on control as planned.',
    reference: 'AU-C 530.A12',
  },
  {
    id: 'aud-wc-156',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-II',
    topicId: 'aud-internal-control',
    topic: 'Internal Control',
    subtopic: 'Control Activities',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Control activities include:',
    options: [
      'Only tone at the top',
      'Only hiring policies',
      'External audit procedures',
      'Authorizations, reconciliations, segregation of duties, physical controls, and information processing controls',
    ],
    correctAnswer: 3,
    explanation: 'Control activities: policies/procedures addressing risks. Types: authorization, performance reviews, information processing (ITGCs, application controls), physical controls, segregation of duties. Preventive vs detective.',
    reference: 'AU-C 315.A79',
  },
  {
    id: 'aud-wc-157',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-V',
    topicId: 'aud-ssars',
    topic: 'SSARS Engagements',
    subtopic: 'Preparation vs Compilation',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A preparation engagement differs from a compilation in that:',
    options: [
      'A report is required for preparation',
      'Compilation provides assurance',
      'Preparation requires independence',
      'No report is issued in preparation and there is no assurance provided in either',
    ],
    correctAnswer: 3,
    explanation: 'Preparation (AR-C 70): prepare F/S, no report required, clear statement on each page. Compilation (AR-C 80): report required, no assurance. Neither provides assurance. Independence required for compilation report (or disclose lack).',
    reference: 'AR-C 70/80',
  },
  {
    id: 'aud-wc-158',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-III',
    topicId: 'aud-evidence',
    topic: 'Audit Evidence',
    subtopic: 'Accounts Payable Testing',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Accounts payable audit procedures focus on:',
    options: [
      'Only large vendors',
      'Primarily overstatement',
      'Only year-end balances',
      'Primarily understatement (completeness) through searching for unrecorded liabilities',
    ],
    correctAnswer: 3,
    explanation: 'A/P risk: understatement (completeness). Procedures: search for unrecorded liabilities (post-year-end payments, unmatched receipts, open POs), confirmations, cutoff testing. Different from A/R (overstatement focus).',
    reference: 'Accounts Payable Testing',
  },

  // REG (4 questions)
  {
    id: 'reg-wc-155',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-III',
    topicId: 'reg-corporate',
    topic: 'Corporate Taxation',
    subtopic: 'Loss Carryovers',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under current law, corporate NOLs may be carried forward:',
    options: [
      '5 years only',
      'For 10 years at 100%',
      'Indefinitely, limited to 80% of taxable income (post-2017 losses)',
      '2 years back, 20 years forward',
    ],
    correctAnswer: 2,
    explanation: 'TCJA: post-2017 NOLs forward indefinitely, limited to 80% taxable income each year. Pre-2018 losses: 20-year carryforward, 100% usage. No carryback (except for farmers and certain losses). Section 382 may limit if ownership change.',
    reference: 'IRC Section 172',
  },
  {
    id: 'reg-wc-156',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-II',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Estimated Tax Payments',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Individuals avoid the underpayment penalty by paying:',
    options: [
      '50% by September',
      '90% of current year tax or 100% prior year tax (110% if AGI >$150,000)',
      'Nothing until April 15',
      'Any amount quarterly',
    ],
    correctAnswer: 1,
    explanation: 'Safe harbor: pay lesser of 90% current year or 100% prior year (110% if prior year AGI >$150K). Quarterly payments: 4/15, 6/15, 9/15, 1/15. Shortfall = underpayment penalty (essentially interest).',
    reference: 'IRC Section 6654',
  },
  {
    id: 'reg-wc-157',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-I',
    topicId: 'reg-property',
    topic: 'Real Property',
    subtopic: 'Recording Statutes',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Under a race-notice recording statute, a subsequent purchaser prevails if:',
    options: [
      'The prior purchaser didn\'t record within 30 days',
      'They take without notice of prior interests AND record first',
      'They pay the highest price',
      'They simply record first',
    ],
    correctAnswer: 1,
    explanation: 'Race-notice: BFP (no notice) + records first wins. Notice only: BFP wins regardless of recording. Race only: first to record wins regardless of notice. Most states use race-notice. Protects innocent purchasers who diligently record.',
    reference: 'Property Law',
  },
  {
    id: 'reg-wc-158',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-IV',
    topicId: 'reg-property',
    topic: 'Property Transactions',
    subtopic: 'Boot in Like-Kind Exchange',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'In a like-kind exchange, boot received is:',
    options: [
      'Recognized as gain to the extent of gain realized or boot received, whichever is less',
      'Always taxable in full',
      'Deferred indefinitely',
      'Never taxable',
    ],
    correctAnswer: 0,
    explanation: 'Section 1031: gain recognized = lesser of (boot received) or (gain realized). Received boot: cash, non-like-kind property, net debt relief. Cannot recognize loss in like-kind exchange. Basis adjustments reflect recognized gain.',
    reference: 'IRC Section 1031',
  },

  // BAR (5 questions)
  {
    id: 'bar-wc-182',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Vertical Analysis',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Common-size (vertical) analysis expresses financial statement items as:',
    options: [
      'Dollar changes from prior year',
      'Percentages of a base amount (revenue for I/S, total assets for B/S)',
      'Ratios to industry averages',
      'Present values'
    ],
    correctAnswer: 1,
    explanation: 'Vertical analysis: each line as % of base. I/S: % of revenue/sales. B/S: % of total assets. Enables comparison across companies of different sizes and over time. Horizontal analysis: changes over time.',
    reference: 'Financial Analysis',
  },
  {
    id: 'bar-wc-183',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-valuation',
    topic: 'Valuation',
    subtopic: 'Precedent Transaction Premiums',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Precedent transaction analysis typically implies:',
    options: [
      'Identical values to DCF',
      'Higher valuations due to control premiums and synergies embedded in transaction prices',
      'Lower valuations than trading multiples',
      'Only book value',
    ],
    correctAnswer: 1,
    explanation: 'Precedent transactions: paid prices include control premium + synergies, typically higher than public trading multiples. Consider: transaction timing, deal context, financing conditions, strategic vs financial buyer.',
    reference: 'M&A Valuation',
  },
  {
    id: 'bar-wc-184',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-technical',
    topic: 'Technical Accounting',
    subtopic: 'Segment Disclosures',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Segment disclosures must include:',
    options: [
      'Measure of profit/loss, total assets, and reconciliations to consolidated amounts',
      'Only operating expenses',
      'Only revenue',
      'Only cash flows',
    ],
    correctAnswer: 0,
    explanation: 'ASC 280: disclose segment profit/loss (as measured by CODM), assets, reconciliations to consolidated totals. Also: revenue from external customers, intersegment revenue, interest, depreciation, unusual items.',
    reference: 'ASC 280-10-50',
  },
  {
    id: 'bar-wc-185',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-IV',
    topicId: 'bar-planning',
    topic: 'Financial Planning',
    subtopic: 'Working Capital Management',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Aggressive working capital policies:',
    options: [
      'Eliminate all debt',
      'Maximize current assets',
      'Minimize current assets and use short-term financing, increasing risk but potentially higher returns',
      'Focus only on receivables',
    ],
    correctAnswer: 2,
    explanation: 'Aggressive: lean inventory, tight credit, short-term funding. Higher risk (liquidity) but higher returns (less tied up capital). Conservative: higher current assets, long-term financing, lower risk, lower return. Tradeoff.',
    reference: 'Working Capital',
  },
  {
    id: 'bar-wc-186',
    courseId: 'cpa',
    section: 'BAR',
    blueprintArea: 'BAR-I',
    topic: 'Financial Statement Analysis',
    subtopic: 'ROIC',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A company has NOPAT of $3.6M and invested capital of $24M. Its WACC is 12%. What is the ROIC, and is the company creating or destroying value?',
    options: [
      'ROIC = 15%; creating value because ROIC exceeds WACC by 3 percentage points',
      'ROIC = 12%; break-even — neither creating nor destroying value',
      'ROIC = 15%; destroying value because WACC is too high',
      'ROIC = 10%; destroying value because ROIC is below WACC',
    ],
    correctAnswer: 0,
    explanation: 'ROIC = NOPAT / Invested Capital = $3.6M / $24M = 15%. Since ROIC (15%) > WACC (12%), the company earns more than its cost of capital, creating economic value. The spread (ROIC − WACC = 3%) multiplied by invested capital gives the annual value created: $24M × 3% = $720K, equivalent to EVA.',
    reference: 'Return Analysis',
  },

  // ISC (4 questions)
  {
    id: 'isc-wc-155',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-I',
    topicId: 'isc-governance',
    topic: 'IT Governance',
    subtopic: 'ISO 27001',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'ISO 27001 is a standard for:',
    options: [
      'Information security management systems (ISMS) with requirements for establishing, implementing, and maintaining security',
      'Project management',
      'Environmental management',
      'Quality management',
    ],
    correctAnswer: 0,
    explanation: 'ISO 27001: ISMS framework. Requirements for: context, leadership, planning, support, operation, performance evaluation, improvement. Risk-based approach. Certifiable standard. ISO 27002 provides control guidance.',
    reference: 'ISO 27001',
  },
  {
    id: 'isc-wc-156',
    courseId: 'cpa',
    section: 'ISC',
    blueprintArea: 'ISC-II',
    topic: 'Security Controls',
    subtopic: 'Least Privilege',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'An auditor reviews a client\'s vulnerability management program and finds that critical vulnerabilities in the financial reporting application have an average remediation time of 120 days after discovery. Industry benchmarks recommend remediation within 15 days for critical vulnerabilities. What audit implication does this have?',
    options: [
    'No implication because vulnerability management is an IT operations issue, not a financial audit concern',
    'The extended remediation window creates prolonged exposure to exploitation, increasing the risk that the financial reporting system could be compromised, which affects the reliability of financial data',
    'The auditor should only be concerned if an actual breach has occurred',
    'Vulnerability management timing is irrelevant if the system has a firewall',
    ],
    correctAnswer: 1,
    explanation: 'Critical vulnerabilities in financial reporting systems directly affect data integrity and system reliability. A 120-day remediation window (8x the benchmark) means the system is exposed to known exploitation vectors for an extended period. The auditor should: (1) evaluate compensating controls during the exposure period, (2) assess whether exploitation occurred, (3) consider the impact on IT general control conclusions, and (4) evaluate whether management\'s risk acceptance is reasonable.',
    reference: 'Access Control',
  },
  {
    id: 'isc-wc-157',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-systems',
    topic: 'Information Systems',
    subtopic: 'Microservices',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Microservices architecture structures applications as:',
    options: [
      'Only desktop applications',
      'Loosely coupled, independently deployable services communicating through APIs',
      'Static websites',
      'One monolithic codebase',
    ],
    correctAnswer: 1,
    explanation: 'Microservices: decompose into small, focused services. Benefits: independent scaling, deployment, technology diversity, fault isolation. Challenges: distributed system complexity, service discovery, data consistency, monitoring.',
    reference: 'Software Architecture',
  },
  {
    id: 'isc-wc-158',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-IV',
    topicId: 'isc-audit',
    topic: 'IT Audit',
    subtopic: 'Audit Trail',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'An audit trail provides:',
    options: [
      'Chronological record of system activities enabling reconstruction and examination of transactions',
      'Only login information',
      'Performance metrics only',
      'Only error messages',
    ],
    correctAnswer: 0,
    explanation: 'Audit trail: records who did what, when, from where. Enables: accountability, detective controls, incident investigation, compliance evidence, transaction reconstruction. Must be protected from tampering (write-once, secure storage).',
    reference: 'IT Controls',
  },

  // TCP (4 questions)
  {
    id: 'tcp-wc-155',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-II',
    topicId: 'tcp-entity',
    topic: 'Entity Tax Compliance',
    subtopic: 'Reasonable Compensation',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'S corporation shareholder-employee reasonable compensation issues arise because:',
    options: [
      'Distributions are taxed higher',
      'Only for partnerships',
      'There are no tax implications',
      'Wages are subject to payroll taxes while distributions are not, creating incentive to minimize wages',
    ],
    correctAnswer: 3,
    explanation: 'S corp: wages = payroll taxes (FICA), distributions = no SE tax. IRS scrutinizes low wages. Reasonable: industry, experience, responsibilities comparables. Penalties for unreasonable. Balance tax savings with audit risk.',
    reference: 'Rev. Rul. 74-44',
  },
  {
    id: 'tcp-wc-156',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-I',
    topicId: 'tcp-individual',
    topic: 'Individual Tax Compliance',
    subtopic: 'Education Credits',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'The American Opportunity Tax Credit (AOTC):',
    options: [
      'Has no income limits',
      'Only reduces tax liability',
      'Is available for any education',
      'Provides up to $2,500 for first 4 years of undergraduate education, 40% refundable',
    ],
    correctAnswer: 3,
    explanation: 'AOTC: $2,500 max (100% first $2,000 + 25% next $2,000), 40% refundable ($1,000 max). First 4 years undergraduate, at least half-time. Income limits apply. Better than Lifetime Learning Credit for qualifying students.',
    reference: 'IRC Section 25A',
  },
  {
    id: 'tcp-wc-157',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-III',
    topicId: 'tcp-planning',
    topic: 'Tax Planning',
    subtopic: 'Charitable Lead Trust',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A charitable lead trust (CLT):',
    options: [
      'Provides no tax benefits',
      'Pays income to charity with remainder to individual beneficiaries, opposite of CRT',
      'Is revocable',
      'Only benefits charities',
    ],
    correctAnswer: 3,
    explanation: 'CLT: income stream to charity, remainder to individuals (often next generation). Gift/estate tax benefit: value of charitable lead reduces transfer value. Grantor CLT: income tax deduction now, taxed on trust income. Non-grantor: no current deduction.',
    reference: 'IRC Section 170',
  },
  {
    id: 'tcp-wc-158',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-IV',
    topicId: 'tcp-representation',
    topic: 'Tax Representation',
    subtopic: 'Appeals Process',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'After receiving a 30-day letter, the taxpayer may:',
    options: [
      'Only go to court',
      'File amended returns only',
      'Ignore it',
      'Request Appeals Office conference to resolve the dispute without litigation',
    ],
    correctAnswer: 3,
    explanation: '30-day letter: preliminary determination. Options: (1) agree, (2) submit protest to Appeals (for amounts >$25K, written protest required), (3) do nothing and receive 90-day letter (statutory notice). Appeals = settlement opportunity.',
    reference: 'IRS Appeals Process',
  },
];
