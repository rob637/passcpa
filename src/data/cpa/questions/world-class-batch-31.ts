// World-Class Questions Batch 31 - Exam Quality MCQs
// 25 questions across all CPA exam sections

import { Question } from '../../../types';

export const WORLD_CLASS_BATCH_31: Question[] = [
  // FAR (4 questions)
  {
    id: 'far-wc-159',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-II',
    topicId: 'far-debt',
    topic: 'Debt',
    subtopic: 'Debt Modification',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A debt modification is accounted for as an extinguishment when:',
    options: [
      'The creditor changes',
      'Any term is modified',
      'Cash flows differ by more than 10% under the present value test',
      'Interest rate changes',
    ],
    correctAnswer: 2,
    explanation: 'ASC 470-50: 10% cash flow test - if PV of new debt differs by >10% from old, extinguishment accounting (derecognize old, record new at FV, recognize gain/loss). Otherwise modification accounting (prospective adjustment).',
    reference: 'ASC 470-50-40',
  },
  {
    id: 'far-wc-160',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-I',
    topicId: 'far-property',
    topic: 'Property, Plant & Equipment',
    subtopic: 'Capitalization Policy',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Costs capitalized for self-constructed assets include:',
    options: [
      'Administrative overhead only',
      'Only labor',
      'Direct materials, direct labor, and allocable overhead',
      'Only materials',
    ],
    correctAnswer: 2,
    explanation: 'Self-constructed assets: capitalize all costs directly attributable (materials, labor) plus incremental overhead. Interest may be capitalized during construction (ASC 835-20). General and administrative overhead typically expensed.',
    reference: 'ASC 360-10-30',
  },
  {
    id: 'far-wc-161',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-III',
    topicId: 'far-stockholders-equity',
    topic: 'Stockholders Equity',
    subtopic: 'Treasury Stock Methods',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under the cost method of treasury stock, reissuance below cost:',
    options: [
      'Is not allowed',
      'Creates a loss on income statement',
      'Reduces APIC from treasury stock transactions, then retained earnings for any excess',
      'Creates a gain',
    ],
    correctAnswer: 2,
    explanation: 'Cost method: treasury stock at cost. Reissue below cost: debit APIC-treasury stock (from prior transactions), excess to RE. Never debit loss to income statement for treasury stock. Equity transactions, not earnings.',
    reference: 'ASC 505-30',
  },
  {
    id: 'far-wc-162',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-IV',
    topicId: 'far-government',
    topic: 'Government Accounting',
    subtopic: 'Fiduciary Funds',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Fiduciary funds are used to report:',
    options: [
      'Capital projects',
      'Resources held in trust or as agent for parties outside the government',
      'Internal services',
      'General government operations',
    ],
    correctAnswer: 1,
    explanation: 'Fiduciary funds: pension trusts, investment trusts, private-purpose trusts, custodial funds. Resources held for others, not for government\'s own programs. Not in government-wide statements. Statement of fiduciary net position.',
    reference: 'GASB 84',
  },

  // AUD (4 questions)
  {
    id: 'aud-wc-159',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-I',
    topicId: 'aud-engagement',
    topic: 'Engagement Acceptance',
    subtopic: 'Client Evaluation',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Before accepting a new audit engagement, the auditor should:',
    options: [
      'Complete all substantive testing',
      'Complete the audit planning',
      'Issue an engagement letter only',
      'Evaluate integrity of management, assess competence, and communicate with predecessor auditor',
    ],
    correctAnswer: 3,
    explanation: 'Acceptance: evaluate management integrity (reputation, disputes, pressure), assess competence/resources for engagement, independence, communicate with predecessor (PCAOB required, AICPA required if designated). Then engagement letter.',
    reference: 'AU-C 210/220',
  },
  {
    id: 'aud-wc-160',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-III',
    topicId: 'aud-procedures',
    topic: 'Audit Procedures',
    subtopic: 'Inventory Observation',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Physical inventory observation is performed to test:',
    options: [
      'Ownership only',
      'Revenue cutoff',
      'Historical cost only',
      'Existence and condition of inventory',
    ],
    correctAnswer: 3,
    explanation: 'Inventory observation: existence (is it there?), condition (obsolescence, damage). Also supports completeness (count agrees to records). If can\'t observe: alternative procedures or scope limitation. Test count procedures, make test counts.',
    reference: 'AU-C 501.04',
  },
  {
    id: 'aud-wc-161',
    courseId: 'cpa',
    section: 'AUD',
    blueprintArea: 'AUD-IV',
    topic: 'Attestation',
    subtopic: 'Agreed-Upon Procedures',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A CPA performs an attestation examination engagement on a company\'s greenhouse gas emissions report under AT-C 205. What level of assurance does this engagement provide?',
    options: [
      'No assurance',
      'Limited (negative) assurance',
      'Reasonable (positive) assurance that the subject matter is presented in accordance with the criteria',
      'Absolute assurance',
    ],
    correctAnswer: 2,
    explanation: 'An examination engagement under AT-C 205 provides the highest level of attestation assurance — reasonable assurance expressed as a positive opinion. The CPA expresses whether the subject matter (here, the emissions report) is presented, in all material respects, in accordance with the established criteria. This mirrors the assurance level of an audit, applied to non-financial subject matter.',
    reference: 'AT-C 215',
  },
  {
    id: 'aud-wc-162',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-II',
    topicId: 'aud-internal',
    topic: 'Internal Audit',
    subtopic: 'Using Internal Auditors',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'External auditors assess internal auditors\' competence and objectivity to:',
    options: [
      'Transfer responsibility',
      'Replace external audit entirely',
      'Eliminate testing needs',
      'Determine extent of reliance on their work for audit evidence',
    ],
    correctAnswer: 3,
    explanation: 'Can use internal audit work or direct assistance. Assess: organizational status (reporting level), policies, competence, due care. Higher competence/objectivity = more reliance possible. External auditor retains responsibility.',
    reference: 'AU-C 610',
  },

  // REG (4 questions)
  {
    id: 'reg-wc-159',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-II',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Filing Status',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'To file as Head of Household, the taxpayer must:',
    options: [
      'Be unmarried, pay over half the cost of maintaining a home, and have a qualifying person living there',
      'Have only one child',
      'Have income over $100,000',
      'Be married',
    ],
    correctAnswer: 0,
    explanation: 'HOH: unmarried (or considered unmarried), pay >50% home costs, qualifying person lived with taxpayer (dependent or certain relatives). Lower tax rates than single, higher standard deduction. Qualifying widow(er) different status.',
    reference: 'IRC Section 2(b)',
  },
  {
    id: 'reg-wc-160',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-III',
    topicId: 'reg-s-corp',
    topic: 'S Corporation',
    subtopic: 'Eligible Shareholders',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Eligible S corporation shareholders include:',
    options: [
      'Partnerships',
      'Individuals, certain trusts, and estates (not partnerships or corporations)',
      'Foreign persons',
      'C corporations',
    ],
    correctAnswer: 1,
    explanation: 'S corp shareholders: US individuals, estates, certain trusts (grantor, QSST, ESBT, voting trusts), tax-exempts. NOT: nonresident aliens, partnerships, corporations (except 100% subsidiaries). Violation = termination.',
    reference: 'IRC Section 1361(b)',
  },
  {
    id: 'reg-wc-161',
    courseId: 'cpa',
    section: 'REG',
    blueprintArea: 'REG-I',
    topic: 'Debtor-Creditor',
    subtopic: 'Automatic Stay',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A business owner files a Chapter 11 bankruptcy petition. A creditor had filed a lawsuit and obtained a judgment 10 days before the petition was filed. Can the creditor enforce the judgment after the filing?',
    options: [
      'No, the automatic stay prevents enforcement of pre-petition judgments against the debtor or property of the estate',
      'Yes, because the judgment was obtained before filing',
      'Yes, but only if the judgment exceeds $10,000',
      'No, but only if the debtor moves to avoid the judgment within 30 days',
    ],
    correctAnswer: 0,
    explanation: 'The automatic stay under 11 USC §362(a) prevents enforcement of pre-petition judgments against the debtor and property of the bankruptcy estate. Even though the judgment was obtained before filing, any enforcement action after the petition date violates the stay. The creditor must participate in the bankruptcy proceedings to collect on the judgment through the claims process.',
    reference: '11 USC Section 362',
  },
  {
    id: 'reg-wc-162',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-IV',
    topicId: 'reg-property',
    topic: 'Property Transactions',
    subtopic: 'Casualty Loss',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Personal casualty losses are deductible only if:',
    options: [
      'Attributable to a federally declared disaster (post-TCJA)',
      'Over $100',
      'Under $1,000',
      'From any cause',
    ],
    correctAnswer: 0,
    explanation: 'TCJA: personal casualty losses limited to federally declared disasters (through 2025). Subject to $100 per-event floor and 10% AGI threshold. Business casualty losses still deductible. Insurance proceeds reduce loss.',
    reference: 'IRC Section 165(h)',
  },

  // BAR (5 questions)
  {
    id: 'bar-wc-187',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-valuation',
    topic: 'Valuation',
    subtopic: 'Cost of Equity',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The Capital Asset Pricing Model (CAPM) estimates cost of equity as:',
    options: [
      'Risk-free rate only',
      'Dividend yield only',
      'Risk-free rate plus beta times the market risk premium',
      'Book value of equity',
    ],
    correctAnswer: 2,
    explanation: 'CAPM: Re = Rf + β(Rm - Rf). Risk-free rate + systematic risk premium. Beta measures sensitivity to market. Market risk premium = expected market return - risk-free. Limitations: single-period, historical beta, market assumptions.',
    reference: 'CAPM',
  },
  {
    id: 'bar-wc-188',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-technical',
    topic: 'Technical Accounting',
    subtopic: 'Guarantees',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A guarantee liability is initially measured at:',
    options: [
      'Fair value of the obligation at issuance',
      'Zero',
      'Maximum potential amount',
      'Expected cash outflows only',
    ],
    correctAnswer: 0,
    explanation: 'ASC 460: initial recognition at FV of guarantee obligation (stand-ready obligation). Subsequent: higher of initial less amortization OR contingent liability (ASC 450). Disclose maximum potential and current carrying amount.',
    reference: 'ASC 460-10-25',
  },
  {
    id: 'bar-wc-189',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Altman Z-Score',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The five ratios in Altman\'s Z-Score for public manufacturing companies include working capital/TA, retained earnings/TA, EBIT/TA, market value equity/book value debt, and:',
    options: [
      'Sales/total assets',
      'Net income/sales',
      'Cash/current liabilities',
      'Debt/equity',
    ],
    correctAnswer: 0,
    explanation: 'Z-Score ratios: WC/TA (liquidity), RE/TA (profitability/leverage), EBIT/TA (productivity), MVE/BVD (solvency), Sales/TA (asset utilization). Z = 1.2X1 + 1.4X2 + 3.3X3 + 0.6X4 + 1.0X5.',
    reference: 'Altman Z-Score',
  },
  {
    id: 'bar-wc-190',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-planning',
    topic: 'Financial Planning',
    subtopic: 'Capital Rationing',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under capital rationing, projects are selected by:',
    options: [
      'Choosing all positive NPV projects',
      'Ranking by profitability index or NPV per dollar invested within budget constraints',
      'Selecting the largest projects first',
      'Random selection'
    ],
    correctAnswer: 1,
    explanation: 'Capital rationing: limited budget, can\'t fund all positive NPV. Rank by PI (NPV/Investment) or NPV per constrained resource. Select highest ranking until budget exhausted. May not maximize total NPV due to project indivisibility.',
    reference: 'Capital Budgeting',
  },
  {
    id: 'bar-wc-191',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-technical',
    topic: 'Technical Accounting',
    subtopic: 'Variable Interest Consolidation',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A company consolidates a VIE when it is the primary beneficiary, meaning:',
    options: [
      'It owns 50%+ voting stock',
      'It has power over significant activities AND obligation to absorb losses or right to receive benefits',
      'It is the largest investor',
      'It has any variable interest'
    ],
    correctAnswer: 1,
    explanation: 'Primary beneficiary: (1) power to direct activities significantly affecting VIE performance, (2) obligation to absorb losses OR right to receive benefits significant to VIE. Both required. Reassess at each reporting date.',
    reference: 'ASC 810-10-25',
  },

  // ISC (4 questions)
  {
    id: 'isc-wc-159',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-II',
    topicId: 'isc-security',
    topic: 'Security Controls',
    subtopic: 'Incident Response Phases',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An auditor discovers that a company\'s software development team deploys code changes to the production financial reporting application using a CI/CD pipeline. The pipeline includes automated unit tests but no security testing, code review gates, or separation between the development and production environments. What IT general control concern does this raise?',
    options: [
      'Automated deployment pipelines do not require additional controls',
      'The CI/CD pipeline lacks essential security controls — without code review gates, security testing (SAST/DAST), and environment separation, vulnerable or unauthorized code could be automatically deployed to production, potentially introducing security flaws or unauthorized functionality into the financial reporting system',
      'CI/CD pipelines are inherently secure because they are automated',
      'Code reviews are only necessary for externally-facing applications',
    ],
    correctAnswer: 1,
    explanation: 'CI/CD pipelines that deploy to production without adequate controls represent a significant IT general control deficiency. Missing controls include: (1) mandatory code reviews (ensuring changes are reviewed by someone other than the author), (2) security testing (SAST for code vulnerabilities, DAST for runtime issues), (3) environment separation (dev/staging/production isolation), and (4) approval gates before production deployment. Without these, the speed of automated deployment increases risk.',
    reference: 'NIST SP 800-61',
  },
  {
    id: 'isc-wc-160',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-I',
    topicId: 'isc-governance',
    topic: 'IT Governance',
    subtopic: 'IT Strategic Alignment',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'IT strategic alignment ensures:',
    options: [
      'IT budget is minimized',
      'IT investments and activities support business objectives and strategies',
      'Only technical goals are met',
      'IT operates independently',
    ],
    correctAnswer: 1,
    explanation: 'Strategic alignment: IT strategy derived from and supports business strategy. IT enables business capabilities. Requires: communication between IT and business, IT governance representation, business-driven IT prioritization.',
    reference: 'IT Governance',
  },
  {
    id: 'isc-wc-161',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-systems',
    topic: 'Information Systems',
    subtopic: 'RPO and RTO',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An organization maintains two separate financial reporting systems — a legacy system for domestic operations and a cloud-based system for international operations. The auditor discovers that reconciliation between the two systems is performed manually in a spreadsheet by a single accountant. No independent review of the reconciliation is performed. What IT control concern exists?',
    options: [
      'Manual reconciliation in spreadsheets is standard practice and requires no additional controls',
      'A manual reconciliation process performed by a single individual without independent review creates risks of undetected errors, manipulation, or omission — the consolidated financial statements depend on the accuracy of this critical control point',
      'Reconciliation controls are only necessary when both systems are operated by different companies',
      'The cloud-based system\'s controls are sufficient to ensure consolidation accuracy',
    ],
    correctAnswer: 1,
    explanation: 'The reconciliation between systems is a critical control point for consolidated financial reporting. A single individual performing the reconciliation without review creates: (1) key person dependency, (2) risk of undetected errors (formula mistakes, missed items), (3) fraud opportunity (ability to manipulate reconciling items), and (4) no compensating control. The auditor should evaluate the materiality of the reconciliation amounts and recommend independent review controls.',
    reference: 'Business Continuity',
  },
  {
    id: 'isc-wc-162',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-audit',
    topic: 'IT Audit',
    subtopic: 'Database Controls Testing',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Database controls testing should include:',
    options: [
      'Only data entry',
      'Only reporting',
      'Access controls, referential integrity, logging, encryption, and change management',
      'Only backup procedures',
    ],
    correctAnswer: 2,
    explanation: 'Database controls: access (authentication, authorization, admin privileges), data integrity (referential integrity, constraints), encryption (at rest, in transit), audit logging, backup/recovery, change management (schema changes).',
    reference: 'Database Audit',
  },

  // TCP (4 questions)
  {
    id: 'tcp-wc-159',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-I',
    topicId: 'tcp-individual',
    topic: 'Individual Tax Compliance',
    subtopic: 'Alimony',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Alimony payments under pre-2019 divorce agreements are:',
    options: [
      'Never deductible',
      'Tax-free to both',
      'Capital gains',
      'Deductible by payer, includible by recipient (unless modified to post-2018 rules)',
    ],
    correctAnswer: 3,
    explanation: 'Pre-2019 divorces: alimony deductible by payer (for AGI), taxable to recipient. Post-2018 divorces: no deduction, not taxable. Transitional rules if parties elect post-2018 treatment for modified pre-2019 agreements.',
    reference: 'IRC Section 215/71',
  },
  {
    id: 'tcp-wc-160',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-II',
    topicId: 'tcp-entity',
    topic: 'Entity Tax Compliance',
    subtopic: 'Tax Year',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'S corporations must generally use:',
    options: [
      'June 30 year-end',
      'Any fiscal year',
      'September 30 year-end',
      'Calendar year (or establish business purpose for fiscal year)',
    ],
    correctAnswer: 3,
    explanation: 'S corps: required calendar year unless business purpose or Section 444 election (limited deferral with required payment). Partnerships/S corps: matching rules to prevent excessive deferral. Different from C corps (any year).',
    reference: 'IRC Section 1378',
  },
  {
    id: 'tcp-wc-161',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-III',
    topicId: 'tcp-planning',
    topic: 'Tax Planning',
    subtopic: 'Family Limited Partnerships',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Family limited partnerships are used in estate planning to:',
    options: [
      'Avoid all taxes',
      'Avoid probate only',
      'Increase estate values',
      'Transfer wealth with valuation discounts (minority interest, lack of marketability)',
    ],
    correctAnswer: 3,
    explanation: 'FLP: parents transfer assets to partnership, gift LP interests to children. Discounts reduce gift/estate value (minority + lack of marketability = 25-40%). IRS scrutiny: must have business purpose, proper administration.',
    reference: 'Estate Planning',
  },
  {
    id: 'tcp-wc-162',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-IV',
    topicId: 'tcp-representation',
    topic: 'Tax Representation',
    subtopic: 'Form 2848',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Form 2848 Power of Attorney:',
    options: [
      'Allows representation before any agency',
      'Is valid indefinitely',
      'Requires no signature',
      'Authorizes the representative to represent the taxpayer before the IRS for specific matters',
    ],
    correctAnswer: 3,
    explanation: 'Form 2848: authorizes representative (CPA, attorney, EA) to represent before IRS for specific tax matters and periods. Must specify types, years. Usually good for 7 years (can specify term). Revokes prior POAs for same matters.',
    reference: 'Form 2848',
  },
];
