// World-Class Questions Batch 36 - Exam Quality MCQs
// 25 questions across all CPA exam sections

import { Question } from '../../../types';

export const WORLD_CLASS_BATCH_36: Question[] = [
  // FAR (4 questions)
  {
    id: 'far-wc-179',
    courseId: 'cpa',
    section: 'FAR',
    blueprintArea: 'FAR-II',
    topic: 'Investments',
    subtopic: 'Held-to-Maturity',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'When an investor loses significant influence over an investee previously accounted for under the equity method, the investor should:',
    options: [
      'Continue using the equity method until the investment is sold',
      'Retroactively restate all prior periods to fair value through net income',
      'Prospectively account for the investment at fair value, with any difference between carrying amount and fair value recognized in earnings',
      'Write off the entire investment balance and recognize a loss',
    ],
    correctAnswer: 2,
    explanation: 'Under ASC 323-10-35-36, when significant influence is lost, the investor discontinues the equity method prospectively. The retained investment is measured at fair value, and any difference between the carrying amount under the equity method and fair value is recognized in net income. Prior periods are not restated. This often occurs when ownership drops below 20% without other indicators of influence.',
    reference: 'ASC 320-10-35',
  },
  {
    id: 'far-wc-180',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-I',
    topicId: 'far-expenses',
    topic: 'Expenses',
    subtopic: 'Research and Development',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Costs of developing computer software for internal use:',
    options: [
      'Immediately written off',
      'Never capitalized',
      'Capitalized during application development stage, expensed for preliminary project stage',
      'Always expensed',
    ],
    correctAnswer: 2,
    explanation: 'ASC 350-40: internal-use software. Preliminary stage (conceptual) = expense. Application development stage = capitalize when both (1) management commits and (2) feasible. Post-implementation = expense unless significant enhancement.',
    reference: 'ASC 350-40-25',
  },
  {
    id: 'far-wc-181',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-III',
    topicId: 'far-segment',
    topic: 'Segment Reporting',
    subtopic: 'Quantitative Thresholds',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An operating segment is reportable if it meets which quantitative threshold?',
    options: [
      '25% of assets',
      '10% of combined revenue, reported profit/loss, or combined assets',
      '50% of revenue',
      '5% of combined revenue',
    ],
    correctAnswer: 1,
    explanation: 'ASC 280: reportable if ≥ 10% of (1) combined revenue, (2) greater of combined profit or combined loss (absolute), or (3) combined assets. All other segments combined in "all other" category.',
    reference: 'ASC 280-10-50',
  },
  {
    id: 'far-wc-182',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-IV',
    topicId: 'far-government',
    topic: 'Government Accounting',
    subtopic: 'Encumbrances',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'At year-end, outstanding encumbrances that will be honored in the subsequent year are:',
    options: [
      'Reported as part of committed or assigned fund balance',
      'Ignored',
      'Reported as liabilities',
      'Reported as expenditures',
    ],
    correctAnswer: 0,
    explanation: 'Encumbrances: commitments for future spending (purchase orders). Year-end: reverse entry, report as restricted/committed/assigned fund balance depending on government policy. Not expenditures until goods/services received.',
    reference: 'GASB 54',
  },

  // AUD (4 questions)
  {
    id: 'aud-wc-179',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-IV',
    topicId: 'aud-reports',
    topic: 'Reporting',
    subtopic: 'Dual Dating',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Dual dating on an audit report is used when:',
    options: [
      'Two auditors sign',
      'Management changes date',
      'Two years are covered',
      'A subsequent event occurring after fieldwork but before report issuance relates to a specific matter',
    ],
    correctAnswer: 3,
    explanation: 'Dual dating: subsequent event discovered after fieldwork completion. Option 1: extend procedures to new date (single date). Option 2: dual date - original date "except Note X dated [later date]." Limits auditor responsibility.',
    reference: 'AU-C 560',
  },
  {
    id: 'aud-wc-180',
    courseId: 'cpa',
    section: 'AUD',
    blueprintArea: 'AUD-II',
    topic: 'Internal Control',
    subtopic: 'Service Organization Reports',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A user auditor receives a SOC 1 Type II report on a service organization that processes the client\'s inventory management. The report contains a qualified opinion due to a control exception in the receiving process. How should the user auditor respond?',
    options: [
    'Disregard the report because it contains a qualification',
    'Evaluate whether the control exception affects assertions relevant to the client\'s financial statements and consider whether complementary user controls compensate',
    'Automatically issue a qualified opinion on the client\'s financial statements',
    'Request a new SOC report without the qualification',
    ],
    correctAnswer: 1,
    explanation: 'A qualified SOC report requires the user auditor to evaluate: (1) which controls had exceptions, (2) whether those controls are relevant to the client\'s financial statement assertions, (3) whether complementary user entity controls mitigate the risk, and (4) whether additional audit procedures are needed. The exception may or may not affect the client\'s audit — the user auditor must exercise judgment.',
    reference: 'AT-C 320',
  },
  {
    id: 'aud-wc-181',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-III',
    topicId: 'aud-estimates',
    topic: 'Accounting Estimates',
    subtopic: 'Auditor Responsibilities',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'When auditing accounting estimates, the auditor must:',
    options: [
      'Ignore hindsight',
      'Only verify calculations',
      'Accept management\'s estimates',
      'Evaluate reasonableness of assumptions and methods, and consider indicators of bias',
    ],
    correctAnswer: 3,
    explanation: 'Estimates (AU-C 540): evaluate (1) method appropriateness, (2) significant assumptions reasonableness, (3) data relevance/reliability, (4) management bias indicators. May develop independent expectation. Consider subsequent events.',
    reference: 'AU-C 540',
  },
  {
    id: 'aud-wc-182',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-I',
    topicId: 'aud-planning',
    topic: 'Audit Planning',
    subtopic: 'Audit Strategy',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'The overall audit strategy establishes:',
    options: [
      'Fee arrangements',
      'Staff assignments only',
      'Specific procedures only',
      'Scope, timing, direction of audit and guides development of detailed audit plan',
    ],
    correctAnswer: 3,
    explanation: 'Audit strategy: high-level approach. Establishes scope, timing, direction. Considers entity characteristics, reporting requirements, preliminary materiality. Guides detailed audit plan development. Documented and updated as needed.',
    reference: 'AU-C 300',
  },

  // REG (4 questions)
  {
    id: 'reg-wc-179',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-III',
    topicId: 'reg-partnership',
    topic: 'Partnership Taxation',
    subtopic: 'Substantial Economic Effect',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Partnership special allocations must have substantial economic effect, which requires:',
    options: [
      'Equal allocations',
      'Economic effect (capital accounts maintained, liquidating distributions per capitals) and substantiality (reasonable possibility of affecting partners\' shares)',
      'IRS approval',
      'Only a written agreement',
    ],
    correctAnswer: 1,
    explanation: 'SEE: allocations must have economic effect (follow capitals) AND be substantial (not just tax shifting with offsetting allocations). If not SEE, allocate per partner\'s interest in partnership (PIP) rules.',
    reference: 'Reg. 1.704-1(b)',
  },
  {
    id: 'reg-wc-180',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-II',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Hobby Loss Rules',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Under the hobby loss rules, deductions for a hobby are:',
    options: [
      'Never allowed',
      'Limited to hobby income with no excess deduction (and subject to itemized deduction limitations)',
      'Deductible as business losses',
      'Fully deductible',
    ],
    correctAnswer: 1,
    explanation: 'Section 183: hobby (not-for-profit activity) deductions limited to hobby income. No net loss. Under TCJA (through 2025), hobby deductions not deductible at all as misc itemized deductions suspended. Income still taxable.',
    reference: 'IRC Section 183',
  },
  {
    id: 'reg-wc-181',
    courseId: 'cpa',
    section: 'REG',
    blueprintArea: 'REG-I',
    topic: 'Agency Law',
    subtopic: 'Actual vs Apparent Authority',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A principal gives an agent a written power of attorney to \'manage all business affairs.\' A third party asks about the agent\'s authority, and the principal confirms the agent can handle \'anything related to the business.\' The agent then pledges the principal\'s property as collateral for a personal loan. Is the principal bound?',
    options: [
      'No, because using the principal\'s property for the agent\'s personal loan exceeds the scope of authority and is a breach of fiduciary duty',
      'Yes, because the broad power of attorney covers all actions',
      'Yes, because the principal confirmed the agent\'s authority to the third party',
      'No, because agents can never pledge property as collateral',
    ],
    correctAnswer: 0,
    explanation: 'Even broad grants of authority are limited by the fiduciary duty the agent owes the principal. Using the principal\'s property as collateral for a personal loan serves the agent\'s interest, not the principal\'s — this is a breach of the fiduciary duty of loyalty. The third party (lender) should know this is outside the scope of an agent\'s authority to \'manage business affairs,\' as personal loans are not business affairs of the principal.',
    reference: 'Agency Law',
  },
  {
    id: 'reg-wc-182',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-IV',
    topicId: 'reg-estate',
    topic: 'Estate Tax',
    subtopic: 'Unified Credit',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The unified credit against estate tax:',
    options: [
      'Is unlimited',
      'Applies only to estates',
      'Exempts a specified amount from combined gift and estate taxes based on applicable exclusion amount',
      'Applies only to gifts',
    ],
    correctAnswer: 2,
    explanation: 'Unified credit: exempts AEA from gift/estate tax (~$13.61M 2024, $12.92M 2023). Credit = tax on AEA. Lifetime gifts reduce available estate exemption. Portability allows surviving spouse to use deceased spouse\'s unused exemption.',
    reference: 'IRC Section 2010',
  },

  // BAR (5 questions)
  {
    id: 'bar-wc-212',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'DuPont Analysis Extended',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The extended (5-factor) DuPont model decomposes ROE into:',
    options: [
      'Tax burden, interest burden, operating margin, asset turnover, and financial leverage',
      'Only profit margin and turnover',
      'Three components only',
      'Revenue growth only',
    ],
    correctAnswer: 0,
    explanation: '5-factor DuPont: ROE = (NI/EBT) × (EBT/EBIT) × (EBIT/Sales) × (Sales/Assets) × (Assets/Equity). Tax burden, interest burden, operating margin, asset turnover, leverage. Detailed profitability driver analysis.',
    reference: 'Advanced DuPont',
  },
  {
    id: 'bar-wc-213',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-valuation',
    topic: 'Valuation',
    subtopic: 'Sum of Parts Valuation',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Sum-of-the-parts (SOTP) valuation is appropriate when:',
    options: [
      'Company has single segment',
      'Company has distinct business units that can be valued separately using different multiples',
      'Company is private',
      'Only for small companies'
    ],
    correctAnswer: 1,
    explanation: 'SOTP: conglomerates with diverse segments. Value each segment using appropriate comps (different industries). Sum segment values, add corporate value, subtract corporate costs/debt. May reveal conglomerate discount.',
    reference: 'SOTP Valuation',
  },
  {
    id: 'bar-wc-214',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-technical',
    topic: 'Technical Accounting',
    subtopic: 'Stock Compensation Forfeitures',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under current GAAP, stock-based compensation forfeitures may be:',
    options: [
      'Only recognized when they occur',
      'Either estimated at grant or recognized when they occur (accounting policy election)',
      'Only estimated at grant',
      'Ignored',
    ],
    correctAnswer: 1,
    explanation: 'ASC 718 (post-ASU 2016-09): policy election. Either (1) estimate forfeitures at grant, true-up to actuals, or (2) recognize forfeitures when occur (simpler). Apply consistently. Prior rule required estimation.',
    reference: 'ASC 718-10-35',
  },
  {
    id: 'bar-wc-215',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-cost',
    topic: 'Cost Accounting',
    subtopic: 'Transfer Pricing Methods',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Internal transfer pricing between divisions may use:',
    options: [
      'Market price, cost-based (variable, full, cost-plus), or negotiated price depending on objectives',
      'Only cost',
      'Only market price',
      'Arbitrary assignment',
    ],
    correctAnswer: 0,
    explanation: 'Transfer pricing: market (if available, promotes efficiency), cost-based (variable, full, cost-plus), negotiated. Choice affects divisional performance measures, goal congruence, autonomy. No single best method.',
    reference: 'Transfer Pricing',
  },
  {
    id: 'bar-wc-216',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Working Capital Management',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'The cash conversion cycle measures:',
    options: [
      'Total revenue cycle',
      'Only accounts receivable collection',
      'Time between paying for inventory and collecting receivables (DIO + DSO - DPO)',
      'Only payables period',
    ],
    correctAnswer: 2,
    explanation: 'CCC = DIO + DSO - DPO. Days inventory + days receivables - days payables. Measures operating cycle cash requirement. Lower = less working capital needed. Negative CCC = collect before paying suppliers.',
    reference: 'Working Capital',
  },

  // ISC (4 questions)
  {
    id: 'isc-wc-179',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-I',
    topicId: 'isc-governance',
    topic: 'IT Governance',
    subtopic: 'ITIL Framework',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'ITIL (IT Infrastructure Library) is a framework for:',
    options: [
      'Software development only',
      'Network design',
      'Security only',
      'IT service management best practices across the service lifecycle',
    ],
    correctAnswer: 3,
    explanation: 'ITIL: service management framework. Lifecycle: service strategy, design, transition, operation, continual improvement. Practices: incident, problem, change management, etc. Widely adopted for IT operations.',
    reference: 'ITIL Framework',
  },
  {
    id: 'isc-wc-180',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-II',
    topicId: 'isc-security',
    topic: 'Security Controls',
    subtopic: 'Privileged Access Management',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An organization\'s IT disaster recovery plan specifies that financial data backups are performed nightly and stored at an offsite location. The auditor requests evidence of backup restoration testing and learns that backups have never been tested for restorability. What concern does this raise?',
    options: [
      'Untested backups provide adequate protection because the backup process completed successfully',
      'Untested backups may be corrupted, incomplete, or incompatible with the restoration environment — without restoration testing, the organization cannot verify that financial data can actually be recovered in a disaster scenario',
      'Backup testing is an operational convenience, not an audit requirement',
      'The backup software vendor\'s guarantee is sufficient assurance',
    ],
    correctAnswer: 1,
    explanation: 'Backup processes can produce files that appear successful but fail during restoration due to: corruption, media degradation, software version incompatibility, missing dependencies, or procedural errors. Without regular restoration testing, the organization\'s assertion that data is recoverable is unsubstantiated. The auditor should: (1) report the finding as a control deficiency, (2) assess the risk to financial data recoverability, and (3) recommend periodic restoration testing.',
    reference: 'PAM Solutions',
  },
  {
    id: 'isc-wc-181',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-systems',
    topic: 'Information Systems',
    subtopic: 'Message Queues',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Message queue systems (like RabbitMQ, Kafka) provide:',
    options: [
      'Only database storage',
      'Only email services',
      'Real-time video',
      'Asynchronous communication between services with guaranteed delivery and decoupling',
    ],
    correctAnswer: 3,
    explanation: 'Message queues: decouple producers/consumers, enable async processing, provide buffering during load spikes, ensure message persistence. Patterns: pub/sub, point-to-point. Critical for microservices and event-driven architectures.',
    reference: 'Message Queuing',
  },
  {
    id: 'isc-wc-182',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-audit',
    topic: 'IT Audit',
    subtopic: 'Application Controls Testing',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Testing application controls typically includes:',
    options: [
      'Only security scanning',
      'Only code review',
      'Only performance testing',
      'Input validation, processing logic, output controls, and interface testing',
    ],
    correctAnswer: 3,
    explanation: 'Application control testing: input (validation, authorization, error handling), processing (calculations, logic, completeness), output (distribution controls, reconciliation), interfaces (data transfer accuracy). Mix of inquiry, observation, testing.',
    reference: 'Application Control Audit',
  },

  // TCP (4 questions)
  {
    id: 'tcp-wc-179',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-II',
    topicId: 'tcp-entity',
    topic: 'Entity Tax Compliance',
    subtopic: 'Tax Benefit Rule',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The tax benefit rule requires:',
    options: [
      'Always deferring income',
      'No action on recovered amounts',
      'Only applying to corporations',
      'Including in income amounts recovered from prior deductions that provided a tax benefit',
    ],
    correctAnswer: 3,
    explanation: 'Tax benefit rule: if deduction in prior year reduced tax, recovery of that amount is income when received. If no tax benefit (itemized but didn\'t exceed standard), recovery not taxable. Section 111.',
    reference: 'IRC Section 111',
  },
  {
    id: 'tcp-wc-180',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-I',
    topicId: 'tcp-individual',
    topic: 'Individual Tax Compliance',
    subtopic: 'Section 121 Ownership Test',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'For Section 121 home sale exclusion, the taxpayer must have:',
    options: [
      'Lived there 5 years continuously',
      'Only lived in the home',
      'Owned for 10 years',
      'Owned AND used the home as principal residence for 2 of the 5 years before sale',
    ],
    correctAnswer: 3,
    explanation: 'Section 121: ownership test (owned 2 of 5 years) AND use test (principal residence 2 of 5 years). Need not be consecutive or same 2 years. Exclusion: $250K single, $500K MFJ. Once per 2 years.',
    reference: 'IRC Section 121',
  },
  {
    id: 'tcp-wc-181',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-III',
    topicId: 'tcp-planning',
    topic: 'Tax Planning',
    subtopic: 'Grantor Trust Rules',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A trust is a grantor trust for income tax purposes when:',
    options: [
      'It has any beneficiaries',
      'Trust has income',
      'Trust files separate return',
      'The grantor retains certain powers (like power to revoke or control beneficial enjoyment)',
    ],
    correctAnswer: 3,
    explanation: 'Grantor trust rules (Section 671-679): grantor taxed on income if retains certain controls (revocation, beneficial enjoyment, administrative powers, reversionary interest >5%). Intentionally defective grantor trust (IDGT) used for planning.',
    reference: 'IRC Sections 671-679',
  },
  {
    id: 'tcp-wc-182',
    courseId: 'cpa',
    section: 'TCP',
    blueprintArea: 'TCP-IV',
    topic: 'Tax Representation',
    subtopic: 'IRS Statute of Limitations',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A CPA\'s client is being audited by the IRS and asks the CPA to represent them. The CPA prepared the return under examination. Under Circular 230, which statement best describes the CPA\'s authority?',
    options: [
    'The CPA may represent the client before the IRS at all levels, including audits and appeals, because CPAs have unlimited practice rights under Circular 230',
    'The CPA may only represent the client if they hold a separate power of attorney',
    'The CPA may represent the client only in audits, not before the IRS Appeals Office',
    'The CPA cannot represent the client because of a conflict of interest as the return preparer',
    ],
    correctAnswer: 0,
    explanation: 'CPAs, attorneys, and enrolled agents have unlimited practice rights before the IRS under Circular 230 §10.3. They may represent clients at all administrative levels — audits, collection, and appeals. While filing Form 2848 (Power of Attorney) is needed for the IRS to communicate with the representative, this is procedural, not a limitation on authority. Return preparation does not create a conflict of interest for representation.',
    reference: 'IRC Section 6501',
  },
];
