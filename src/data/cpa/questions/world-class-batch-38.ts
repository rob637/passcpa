// World-Class Questions Batch 38 - Exam Quality MCQs
// 25 questions across all CPA exam sections

import { Question } from '../../../types';

export const WORLD_CLASS_BATCH_38: Question[] = [
  // FAR (4 questions)
  {
    id: 'far-wc-187',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-II',
    topicId: 'far-derivatives',
    topic: 'Derivatives',
    subtopic: 'Hedge Effectiveness',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'For a cash flow hedge to qualify for hedge accounting, the hedge must be:',
    options: [
      'Only reasonably effective',
      'No effectiveness required',
      'Highly effective in achieving offsetting changes in cash flows and formally documented at inception',
      'Perfectly effective',
    ],
    correctAnswer: 2,
    explanation: 'Cash flow hedge qualifications (ASC 815): formal documentation at inception, highly effective (ongoing assessment), hedging a forecasted transaction that is probable. Ineffective portion through earnings immediately.',
    reference: 'ASC 815-30-35',
  },
  {
    id: 'far-wc-188',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-I',
    topicId: 'far-current',
    topic: 'Current Assets',
    subtopic: 'Restricted Cash',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Restricted cash should be:',
    options: [
      'Excluded from balance sheet',
      'Always noncurrent',
      'Classified based on nature of restriction and timing of expected use (current or noncurrent)',
      'Always current',
    ],
    correctAnswer: 2,
    explanation: 'Restricted cash: classify based on restriction. If restriction releases within one year = current. If longer = noncurrent. Must disclose in statement of cash flows separately or reconcile to cash and equivalents.',
    reference: 'ASC 230-10-50',
  },
  {
    id: 'far-wc-189',
    courseId: 'cpa',
    section: 'FAR',
    blueprintArea: 'FAR-III',
    topic: 'Interim Reporting',
    subtopic: 'Discrete vs Integral',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under ASC 270, Drake Corp. incurs a $600,000 annual property tax bill on January 1. Drake prepares interim financial statements quarterly. What property tax expense should Drake report in its first quarter (Q1) interim income statement?',
    options: [
      '$600,000 — the full amount when the liability is established',
      '$150,000 — allocated ratably over four quarters',
      '$0 — deferred until the fourth quarter',
      '$300,000 — recognized in the first half of the year',
    ],
    correctAnswer: 1,
    explanation: 'Under ASC 270-10-25 (integral approach to interim reporting), costs that benefit the entire fiscal year should be allocated to interim periods based on a reasonable method. Property taxes are an annual cost allocated proportionally across quarters: $600,000 ÷ 4 = $150,000 per quarter. Each quarter bears its proportional share. This contrasts with discrete items (unusual or infrequent items) recognized entirely in the quarter they occur.',
    reference: 'ASC 270',
  },
  {
    id: 'far-wc-190',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-IV',
    topicId: 'far-government',
    topic: 'Government Accounting',
    subtopic: 'Derived Tax Revenue',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Derived tax revenues (like sales tax) are recognized when:',
    options: [
      'Only at year-end',
      'When budgeted',
      'The underlying exchange transaction occurs and resources are available',
      'Cash received',
    ],
    correctAnswer: 2,
    explanation: 'Derived tax revenue (GASB 33): derived from exchange transactions (sales tax from sale, income tax from earnings). Recognize when exchange occurs AND available (collectible within period or soon enough to pay liabilities).',
    reference: 'GASB 33',
  },

  // AUD (4 questions)
  {
    id: 'aud-wc-187',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-IV',
    topicId: 'aud-opinions',
    topic: 'Reporting',
    subtopic: 'Emphasis of Matter',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'An emphasis-of-matter paragraph is included in the audit report to:',
    options: [
      'Modify the opinion',
      'Note control deficiencies',
      'Express disagreement',
      'Draw attention to a matter already appropriately presented or disclosed that is fundamental to user understanding',
    ],
    correctAnswer: 3,
    explanation: 'Emphasis-of-matter (AU-C 706): does not modify opinion. Draws attention to matter appropriately presented/disclosed but fundamental (significant uncertainty, related party, subsequent event). After opinion paragraph.',
    reference: 'AU-C 706',
  },
  {
    id: 'aud-wc-188',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-II',
    topicId: 'aud-sampling',
    topic: 'Audit Sampling',
    subtopic: 'Tolerable Misstatement',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Tolerable misstatement in audit sampling represents:',
    options: [
      'Total materiality',
      'Sample size',
      'Expected error',
      'Maximum misstatement auditor willing to accept in a population and still conclude account is not materially misstated',
    ],
    correctAnswer: 3,
    explanation: 'Tolerable misstatement: application of performance materiality to specific sampling procedure. Usually less than overall materiality. Lower TM = larger sample. Affects sample size calculation and evaluation.',
    reference: 'AU-C 530',
  },
  {
    id: 'aud-wc-189',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-III',
    topicId: 'aud-litigation',
    topic: 'Litigation',
    subtopic: 'Lawyer Letter',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The auditor\'s letter of inquiry to client\'s legal counsel requests:',
    options: [
      'Tax advice only',
      'Legal opinions on all matters',
      'Only pending litigation',
      'Description of litigation matters, evaluation of likelihood and amount, and omissions in client list',
    ],
    correctAnswer: 3,
    explanation: 'Legal letter (AU-C 501): pending/threatened litigation, claims and assessments client has disclosed. Lawyer responds on litigation description, outcome evaluation, estimate if probable. Identifies any omissions from client list.',
    reference: 'AU-C 501',
  },
  {
    id: 'aud-wc-190',
    courseId: 'cpa',
    section: 'AUD',
    blueprintArea: 'AUD-I',
    topic: 'Engagement',
    subtopic: 'Engagement Letter Requirements',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'During an audit, the auditor identifies that the entity\'s IT system automatically reverses all manual journal entries after 48 hours unless an authorized supervisor re-approves them. What type of IT application control is this?',
    options: [
    'An input control that validates data entry',
    'A processing control that ensures the integrity and authorization of transactions through automated reversal of unapproved entries',
    'An output control that restricts report distribution',
    'A general control over system access',
    ],
    correctAnswer: 1,
    explanation: 'This is a processing control — it operates after initial input to ensure that manual journal entries receive proper supervisory authorization. The automatic reversal mechanism serves as a detective and corrective control embedded in the application. IT application controls are distinguished from IT general controls (which govern the environment in which applications operate). This specific control addresses the risk of unauthorized journal entries.',
    reference: 'AU-C 210',
  },
  // REG (4 questions)
  {
    id: 'reg-wc-187',
    courseId: 'cpa',
    section: 'REG',
    blueprintArea: 'REG-III',
    topic: 'Partnership Taxation',
    subtopic: 'Hot Assets',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Partner Davis sells a 30% partnership interest for $150,000. The partnership has hot assets consisting of $80,000 in unrealized receivables and $40,000 in substantially appreciated inventory. Davis\'s share of hot assets is 30%. What portion of Davis\'s gain is treated as ordinary income?',
    options: [
      'The gain attributable to Davis\'s 30% share of hot assets ($36,000) is ordinary income; the remainder is capital gain',
      'The entire $150,000 is capital gain because partnership interests are capital assets',
      'The entire gain is ordinary income whenever hot assets are present',
      'Only the gain on unrealized receivables ($24,000) is ordinary income',
    ],
    correctAnswer: 0,
    explanation: 'Under IRC §751(a), when a partner sells their interest, the portion of gain attributable to \'hot assets\' (unrealized receivables and substantially appreciated inventory) is treated as ordinary income rather than capital gain. Davis\'s 30% share of hot assets = 30% × ($80,000 + $40,000) = $36,000 ordinary income. The remaining gain is treated as capital gain from the sale of a capital asset.',
    reference: 'IRC Section 751',
  },
  {
    id: 'reg-wc-188',
    courseId: 'cpa',
    section: 'REG',
    blueprintArea: 'REG-II',
    topic: 'Individual Taxation',
    subtopic: 'Alimony Tax Treatment',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Taxpayer Henderson and spouse divorced in 2016 with a decree requiring Henderson to pay $3,500 per month in combined payments — $2,000 in alimony and $1,500 in child support. In 2024, Henderson paid $42,000 total for the year. If $6,000 was unpaid child support, how much can Henderson deduct as alimony?',
    options: [
      '$24,000',
      '$42,000',
      '$18,000',
      '$36,000',
    ],
    correctAnswer: 0,
    explanation: 'Under the pre-2019 grandfathered rules, alimony is deductible and child support is not. Annual payments due: alimony $24,000 ($2,000 × 12) + child support $18,000 ($1,500 × 12) = $42,000. Henderson paid $42,000 but was $6,000 short on child support. Under the ordering rules, payments are first applied to child support before alimony. Child support paid = $18,000 − $6,000 = $12,000. But since total paid equals total due ($42,000), and $6,000 was unpaid child support — Henderson actually paid $42,000 total. Payments short of the full amount are allocated first to child support. Since $6,000 was unpaid in the child support category only, alimony paid = $24,000. Deductible alimony = $24,000.',
    reference: 'IRC Section 71/215 (repealed by TCJA)',
  },
  {
    id: 'reg-wc-189',
    courseId: 'cpa',
    section: 'REG',
    blueprintArea: 'REG-I',
    topic: 'Bankruptcy Law',
    subtopic: 'Automatic Stay',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under the Bankruptcy Code, a debtor filed a Chapter 7 petition. Prior to filing, the IRS had placed a federal tax lien on the debtor\'s home. What is the effect of the automatic stay on the IRS lien?',
    options: [
    'The automatic stay prevents the IRS from enforcing or foreclosing on the lien, but the lien itself remains in place',
    'The automatic stay voids the IRS lien entirely',
    'The IRS lien is unaffected by bankruptcy and can be enforced immediately',
    'The automatic stay applies only to unsecured creditors, not the IRS',
    ],
    correctAnswer: 0,
    explanation: 'The automatic stay prevents collection actions including lien enforcement, but it does not remove existing liens. The federal tax lien remains attached to the property. The IRS cannot foreclose or seize property during the stay but retains its secured claim. The lien may survive discharge if the underlying tax is nondischargeable. The debtor may seek lien avoidance in limited circumstances.',
    reference: '11 USC 362',
  },
  {
    id: 'reg-wc-190',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-IV',
    topicId: 'reg-amortization',
    topic: 'Cost Recovery',
    subtopic: 'Section 197 Intangibles',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Section 197 intangibles acquired in business acquisition are amortized over:',
    options: [
      '15 years straight-line regardless of actual useful life',
      '5 years',
      '7 years',
      'Their useful life',
    ],
    correctAnswer: 0,
    explanation: 'Section 197: goodwill, going concern value, covenants not to compete, customer lists, licenses acquired in connection with business acquisition. 15-year straight-line. Cannot use shorter life even if actual life is shorter.',
    reference: 'IRC Section 197',
  },

  // BAR (5 questions)
  {
    id: 'bar-wc-222',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Quality of Financial Reporting',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Red flags indicating potential financial statement manipulation include:',
    options: [
      'Unusual revenue growth vs. industry, rising DSO, declining operating cash flow relative to income',
      'Only declining revenue',
      'Only audit qualifications',
      'Only restatements',
    ],
    correctAnswer: 0,
    explanation: 'Red flags: revenue growth >> industry, OCF < NI consistently, rising DSO/DIO, large non-recurring items, high accruals, channel stuffing indicators, unusual estimates, related party transactions.',
    reference: 'FR Quality Analysis',
  },
  {
    id: 'bar-wc-223',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-valuation',
    topic: 'Valuation',
    subtopic: 'Adjusted Present Value',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Adjusted Present Value (APV) valuation separates:',
    options: [
      'Unlevered firm value from the present value of tax shields and other financing effects',
      'Revenue and expenses',
      'Assets and liabilities',
      'Only cash and debt',
    ],
    correctAnswer: 0,
    explanation: 'APV = NPV of project as if all-equity financed + PV of financing effects (tax shields, issue costs, subsidies). Useful when capital structure changes or complex financing. Alternative to WACC approach.',
    reference: 'APV Valuation',
  },
  {
    id: 'bar-wc-224',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-technical',
    topic: 'Technical Accounting',
    subtopic: 'Push-Down Accounting',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Push-down accounting requires:',
    options: [
      'Acquired subsidiary to reflect acquirer\'s basis (fair value) in its separate financial statements',
      'Only at parent level',
      'No change to subsidiary books',
      'Only for goodwill',
    ],
    correctAnswer: 0,
    explanation: 'Push-down (ASC 805-50): subsidiary reflects acquirer\'s basis and fair value adjustments in its own standalone F/S. Elected when subsidiary is substantially wholly owned. Affects subsidiary debt covenants.',
    reference: 'ASC 805-50',
  },
  {
    id: 'bar-wc-225',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-IV',
    topicId: 'bar-cost',
    topic: 'Cost Accounting',
    subtopic: 'Throughput Accounting',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'In throughput accounting, the key performance measure is:',
    options: [
      'Operating income',
      'Throughput (revenue minus totally variable costs) divided by the constraint time',
      'Gross margin',
      'Cost per unit',
    ],
    correctAnswer: 1,
    explanation: 'Throughput accounting: T = Revenue - TVC (truly variable, usually direct materials only). Focus on throughput per constraint minute. Maximize T, minimize operating expense and inventory. Alternative to traditional cost allocation.',
    reference: 'Throughput Accounting',
  },
  {
    id: 'bar-wc-226',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Sustainable Growth Rate',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The sustainable growth rate (SGR) represents:',
    options: [
      'Maximum possible growth',
      'Industry average growth',
      'Rate at which company can grow without external equity financing, given current ROE and retention ratio',
      'Historical growth rate',
    ],
    correctAnswer: 2,
    explanation: 'SGR = ROE × Retention Ratio (or b). Maximum growth rate sustainable with current profitability and plowed-back earnings. Growth > SGR requires external financing or improved efficiency. Good planning tool.',
    reference: 'Sustainable Growth',
  },

  // ISC (4 questions)
  {
    id: 'isc-wc-187',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-I',
    topicId: 'isc-governance',
    topic: 'IT Governance',
    subtopic: 'IT Balanced Scorecard',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An IT balanced scorecard includes perspectives such as:',
    options: [
      'Only financial',
      'Only customer satisfaction',
      'Only IT costs',
      'Business contribution, user orientation, operational excellence, and future orientation',
    ],
    correctAnswer: 3,
    explanation: 'IT BSC: adaptation of Kaplan/Norton. Perspectives: business contribution (financial), user orientation (customer), operational excellence (internal), future orientation (learning/growth). Links IT metrics to business strategy.',
    reference: 'IT Balanced Scorecard',
  },
  {
    id: 'isc-wc-188',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-II',
    topicId: 'isc-security',
    topic: 'Security Controls',
    subtopic: 'Security Incident Metrics',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Key security incident response metrics include:',
    options: [
      'Only number of incidents',
      'Only cost per incident',
      'Only downtime',
      'Mean time to detect (MTTD), mean time to respond (MTTR), and mean time to contain (MTTC)',
    ],
    correctAnswer: 3,
    explanation: 'Incident metrics: MTTD (detection speed), MTTR (response initiation), MTTC (containment completion), MTTR (recovery). Also: false positive rate, incidents by type/severity, cost per incident. Drive improvement.',
    reference: 'Incident Metrics',
  },
  {
    id: 'isc-wc-189',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-systems',
    topic: 'Information Systems',
    subtopic: 'Infrastructure as Code',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Infrastructure as Code (IaC) provides:',
    options: [
      'Only monitoring',
      'Only documentation',
      'Only security scanning',
      'Automated, version-controlled, repeatable infrastructure provisioning through declarative or imperative code',
    ],
    correctAnswer: 3,
    explanation: 'IaC: define infrastructure in code (Terraform, CloudFormation, Ansible). Benefits: version control, repeatable deployments, consistency, peer review, automated testing. Declarative (desired state) or imperative (steps).',
    reference: 'Infrastructure as Code',
  },
  {
    id: 'isc-wc-190',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-IV',
    topicId: 'isc-audit',
    topic: 'IT Audit',
    subtopic: 'Penetration Testing Scope',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Penetration testing scope definition should include:',
    options: [
      'Only target systems',
      'Only dates',
      'Only budget',
      'Target systems, authorized techniques, timing, rules of engagement, escalation procedures, and out-of-scope items',
    ],
    correctAnswer: 3,
    explanation: 'Pen test scope: in-scope targets (IPs, apps, physical), excluded systems, authorized techniques, timing/duration, rules of engagement (stop conditions), emergency contacts, legal/contractual requirements.',
    reference: 'Penetration Test Scope',
  },

  // TCP (4 questions)
  {
    id: 'tcp-wc-187',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-II',
    topicId: 'tcp-entity',
    topic: 'Entity Tax Compliance',
    subtopic: 'REIT Requirements',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'To qualify as a REIT, an entity must distribute:',
    options: [
      '75% of income',
      'All income',
      '50% of income',
      'At least 90% of its taxable income to shareholders annually',
    ],
    correctAnswer: 3,
    explanation: 'REIT distribution requirement: 90%+ of taxable income annually. Other tests: 75% income from real property, 75% assets in real estate/cash, 100+ shareholders, not closely held. Avoids corporate tax on distributed income.',
    reference: 'IRC Section 857',
  },
  {
    id: 'tcp-wc-188',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-I',
    topicId: 'tcp-individual',
    topic: 'Individual Tax Compliance',
    subtopic: 'HSA Excess Contributions',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Excess contributions to an HSA are subject to:',
    options: [
      '10% penalty',
      'Income tax only',
      '25% penalty',
      '6% excise tax for each year the excess remains in the account',
    ],
    correctAnswer: 3,
    explanation: 'HSA excess contributions: 6% excise tax under Section 4973. Applies each year until excess withdrawn. Can withdraw excess (plus earnings) before tax return due date to avoid tax on contribution. Earnings taxable.',
    reference: 'IRC Section 4973',
  },
  {
    id: 'tcp-wc-189',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-III',
    topicId: 'tcp-planning',
    topic: 'Tax Planning',
    subtopic: 'Installment Sale to Related Party',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'When an installment sale is made to a related party who resells within 2 years:',
    options: [
      'No special rules apply',
      'Only buyer has consequences',
      'Installment method always applies',
      'Original seller must recognize deferred gain when related party disposes of property',
    ],
    correctAnswer: 3,
    explanation: 'Related party installment sales (Section 453(e)): if related buyer resells within 2 years, original seller accelerates gain recognition. Prevents using related party to convert installment to cash. Exceptions: death, involuntary conversion.',
    reference: 'IRC Section 453(e)',
  },
  {
    id: 'tcp-wc-190',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-IV',
    topicId: 'tcp-representation',
    topic: 'Tax Representation',
    subtopic: 'Penalty Abatement',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'First-time penalty abatement (FTA) is available when:',
    options: [
      'Only for corporations',
      'Any taxpayer requests',
      'Only for significant penalties',
      'Taxpayer has clean compliance history (no penalties in prior 3 years) and is current on filings/payments',
    ],
    correctAnswer: 3,
    explanation: 'FTA: administrative waiver. Requirements: clean 3-year history (no penalties same return type), current on all filings, current on payments (or approved plan). Applies to failure-to-file, failure-to-pay, failure-to-deposit.',
    reference: 'IRM 20.1.1.3.6.1',
  },
];
