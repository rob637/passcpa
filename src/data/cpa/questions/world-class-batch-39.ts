// World-Class Questions Batch 39 - Exam Quality MCQs
// 25 questions across all CPA exam sections

import { Question } from '../../../types';

export const WORLD_CLASS_BATCH_39: Question[] = [
  // FAR (4 questions)
  {
    id: 'far-wc-191',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-II',
    topicId: 'far-equity',
    topic: 'Stockholders\' Equity',
    subtopic: 'Stock Dividends vs Stock Splits',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A large stock dividend (greater than 20-25%) is accounted for by:',
    options: [
      'Transferring par or stated value from retained earnings to common stock (same as stock split)',
      'No journal entry',
      'Reducing additional paid-in capital only',
      'Fair value transfer',
    ],
    correctAnswer: 0,
    explanation: 'Large stock dividend (>20-25%): par/stated value transferred from RE to common stock. Small dividend (<20-25%): fair value transferred. Large dividend is economically like stock split. Total equity unchanged.',
    reference: 'ASC 505-20-25',
  },
  {
    id: 'far-wc-192',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-I',
    topicId: 'far-receivables',
    topic: 'Receivables',
    subtopic: 'Factoring Without Recourse',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'When receivables are factored without recourse:',
    options: [
      'Liability is recorded',
      'Transfer is typically a sale with derecognition of receivables and recognition of gain/loss',
      'No accounting entry required',
      'Seller retains risk',
    ],
    correctAnswer: 1,
    explanation: 'Without recourse: factor assumes credit risk. If control criteria met (ASC 860), derecognize receivables. Gain/loss = cash received - carrying value - servicing asset/liability. Compare to with-recourse (may be secured borrowing).',
    reference: 'ASC 860',
  },
  {
    id: 'far-wc-193',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-III',
    topicId: 'far-variable',
    topic: 'Variable Interest Entities',
    subtopic: 'Primary Beneficiary',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The primary beneficiary of a VIE is the entity that:',
    options: [
      'Has majority voting rights',
      'Has power to direct activities that most significantly impact economic performance AND obligation to absorb losses or receive benefits',
      'Created the VIE',
      'Has largest investment',
    ],
    correctAnswer: 1,
    explanation: 'Primary beneficiary (ASC 810): both characteristics: (1) power over significant activities, (2) obligation to absorb losses/right to receive benefits that could be significant. Must consolidate VIE. Reassess when circumstances change.',
    reference: 'ASC 810-10-25',
  },
  {
    id: 'far-wc-194',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-IV',
    topicId: 'far-nonprofit',
    topic: 'Non-Profit Accounting',
    subtopic: 'Contributed Services',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Contributed services should be recognized as revenue when they:',
    options: [
      'Create or enhance nonfinancial assets OR require specialized skills that would typically be purchased',
      'Never recognized',
      'Are any volunteer services',
      'Always recognized',
    ],
    correctAnswer: 0,
    explanation: 'ASC 958-605: contributed services recognized if (1) create/enhance nonfinancial asset, OR (2) require specialized skills (accounting, legal, medical), provided by persons with those skills, and would be purchased if not donated.',
    reference: 'ASC 958-605-25',
  },

  // AUD (4 questions)
  {
    id: 'aud-wc-191',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-IV',
    topicId: 'aud-group',
    topic: 'Group Audits',
    subtopic: 'Component Auditors',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The group engagement partner\'s responsibilities regarding component auditors include:',
    options: [
      'Only reviewing their opinion',
      'Only agreeing on fees',
      'No oversight required',
      'Evaluating their competence and independence, involvement in their work, and evaluating sufficiency of their procedures',
    ],
    correctAnswer: 3,
    explanation: 'Group audit (AU-C 600): group partner must evaluate component auditors\' competence, independence, understanding. Determine involvement needed (direction, supervision, review). Evaluate whether sufficient appropriate evidence obtained.',
    reference: 'AU-C 600',
  },
  {
    id: 'aud-wc-192',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-II',
    topicId: 'aud-fraud',
    topic: 'Fraud',
    subtopic: 'Financial Statement Fraud Indicators',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Fraud risk factors related to attitudes/rationalization include:',
    options: [
      'Only cash handling',
      'Only compensation plans',
      'Only financial pressure',
      'Management disputes with auditors, known history of violations, excessive interest in stock price',
    ],
    correctAnswer: 3,
    explanation: 'Fraud triangle attitudes: disputes with auditors, history of regulatory violations, aggressive accounting practices, excessive focus on analyst expectations, management override of controls, strained auditor relationship.',
    reference: 'AU-C 240',
  },
  {
    id: 'aud-wc-193',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-III',
    topicId: 'aud-procedures',
    topic: 'Audit Procedures',
    subtopic: 'Direction of Testing',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'To test for completeness of liabilities, the auditor should:',
    options: [
      'Only count liabilities',
      'Vouch from accounting records',
      'Only review disclosures',
      'Trace from unrecorded sources (subsequent payments, vendor statements) to accounting records',
    ],
    correctAnswer: 3,
    explanation: 'Completeness: test that all items are recorded. For liabilities: trace from external sources (subsequent disbursements, unpaid invoices, vendor statements) TO records. Vouching tests occurrence (recorded → support).',
    reference: 'Testing Direction',
  },
  {
    id: 'aud-wc-194',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-I',
    topicId: 'aud-quality',
    topic: 'Quality Management',
    subtopic: 'Root Cause Analysis',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Root cause analysis of audit deficiencies helps the firm:',
    options: [
      'Only calculate costs',
      'Only assign blame',
      'Only document findings',
      'Identify underlying reasons for deficiencies to design effective remediation preventing recurrence',
    ],
    correctAnswer: 3,
    explanation: 'Root cause analysis: investigate why deficiency occurred, not just what. Identify systemic issues (training, supervision, methodology). Design targeted remediation. Required by ISQM 1 / SQMS for addressing identified deficiencies.',
    reference: 'ISQM 1',
  },

  // REG (4 questions)
  {
    id: 'reg-wc-191',
    courseId: 'cpa',
    section: 'REG',
    blueprintArea: 'REG-III',
    topic: 'S Corporation',
    subtopic: 'Shareholder Basis',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An S corporation shareholder has a beginning stock basis of $18,000 and separately lent $12,000 to the corporation. During the year, the S corporation allocated $35,000 of ordinary losses to the shareholder. In the following year, the S corp allocated $10,000 of ordinary income. What is the shareholder\'s stock basis and debt basis after year 2?',
    options: [
      'Stock basis $0, debt basis $5,000 after year 2',
      'Stock basis $10,000, debt basis $12,000 after year 2',
      'Stock basis $5,000, debt basis $0 after year 2',
      'Stock basis $0, debt basis $12,000 after year 2',
    ],
    correctAnswer: 0,
    explanation: 'Year 1: Stock basis $18,000 absorbs first → $0 ($18,000 loss). Remaining loss $17,000 reduces debt basis from $12,000 → $0 ($12,000 loss). Remaining $5,000 is suspended (exceeds basis). Year 2: income first restores debt basis: $10,000 income but only $12,000 of debt needs restoring. Debt basis increases from $0 to $10,000. But the $5,000 suspended loss from year 1 is next allowed. Debt basis $10,000 − $5,000 suspended loss = $5,000. Stock basis remains $0. End: stock $0, debt $5,000.',
    reference: 'IRC Section 1367',
  },
  {
    id: 'reg-wc-192',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-II',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Passive Activity Loss Rules',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Suspended passive activity losses are:',
    options: [
      'Carried back 2 years',
      'Deductible against ordinary income',
      'Carried forward indefinitely to offset future passive income or fully deductible on complete disposition',
      'Lost permanently',
    ],
    correctAnswer: 2,
    explanation: 'PAL suspension: carried forward to offset future passive income from any passive activity. On fully taxable disposition of activity, all suspended losses become deductible (including against non-passive income).',
    reference: 'IRC Section 469',
  },
  {
    id: 'reg-wc-193',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-I',
    topicId: 'reg-professional',
    topic: 'Professional Responsibility',
    subtopic: 'CPA Liability to Third Parties',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under the Restatement approach, CPAs may be liable to:',
    options: [
      'Foreseen third parties and actually foreseen users for negligence',
      'No third parties',
      'All foreseeable users',
      'Only clients',
    ],
    correctAnswer: 0,
    explanation: 'Restatement (Second) of Torts: CPA liable to limited group of actually foreseen (identified) third parties. Middle ground between privity (Ultramares) and foreseeability. Most jurisdictions follow Restatement approach.',
    reference: 'CPA Third Party Liability',
  },
  {
    id: 'reg-wc-194',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-IV',
    topicId: 'reg-depreciation',
    topic: 'Cost Recovery',
    subtopic: 'Alternative Depreciation System',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Alternative Depreciation System (ADS) is required for:',
    options: [
      'Listed property used 50% or less for business, tangible property used predominantly outside US, and property for tax-exempt entities',
      'Only real property',
      'Only vehicles',
      'All tangible property',
    ],
    correctAnswer: 0,
    explanation: 'ADS required: listed property ≤50% business use, tangible property used predominantly outside US, tax-exempt use property, imported covered property for MTB calculations. Longer lives, straight-line only. May elect for any property.',
    reference: 'IRC Section 168(g)',
  },

  // BAR (5 questions)
  {
    id: 'bar-wc-227',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Piotroski F-Score',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The Piotroski F-Score is used to:',
    options: [
      'Calculate intrinsic value',
      'Predict bankruptcy',
      'Identify improving financial health using 9 binary signals related to profitability, leverage, and efficiency',
      'Determine credit rating',
    ],
    correctAnswer: 2,
    explanation: 'F-Score: 9 binary criteria (0/1). Profitability: positive ROA, OCF, change ROA, accruals quality. Leverage: declining leverage, improving current ratio, no new shares. Efficiency: improving margin, turnover. Score 0-9.',
    reference: 'Piotroski F-Score',
  },
  {
    id: 'bar-wc-228',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-valuation',
    topic: 'Valuation',
    subtopic: 'Option Pricing Applications',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Real options analysis applies option pricing theory to:',
    options: [
      'Value managerial flexibility such as options to expand, abandon, or delay projects',
      'Stock options only',
      'Only bond valuation',
      'Only M&A',
    ],
    correctAnswer: 0,
    explanation: 'Real options: value of flexibility in capital budgeting. Types: option to expand, abandon, delay, switch, contract. Black-Scholes or binomial methods. Captures value NPV may miss. Useful for high-uncertainty projects.',
    reference: 'Real Options',
  },
  {
    id: 'bar-wc-229',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-technical',
    topic: 'Technical Accounting',
    subtopic: 'Restructuring Costs',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Exit or disposal costs under ASC 420 are recognized when:',
    options: [
      'Plan is announced',
      'Liability is incurred - for one-time termination benefits when plan communicated and meets criteria',
      'Amounts paid',
      'Plan is developed'
    ],
    correctAnswer: 1,
    explanation: 'ASC 420: exit costs recognized when liability incurred. One-time termination benefits: when plan communicated IF employees won\'t render future service beyond minimum. Contract termination: when contract terminated. Other costs: when incurred.',
    reference: 'ASC 420-10-25',
  },
  {
    id: 'bar-wc-230',
    courseId: 'cpa',
    section: 'BAR',
    blueprintArea: 'BAR-III',
    topic: 'Cost Accounting',
    subtopic: 'Life Cycle Costing',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A product manager discovers that 70% of total life cycle costs for a new medical device are determined during the design phase, although only 15% of costs are actually incurred during design. What is the strategic implication?',
    options: [
    'Reduce design spending to lower total costs',
    'Focus cost reduction efforts on the production phase where most costs are incurred',
    'Invest more in the design phase to lock in lower downstream costs',
    'Life cycle costing is irrelevant for medical devices',
    ],
    correctAnswer: 2,
    explanation: 'This illustrates a key life cycle costing insight: the majority of costs are committed (locked in) during the design phase, even though they are incurred later during production, distribution, and disposal. By investing more in design (better materials research, DFM analysis, value engineering), a company can significantly reduce total life cycle costs. Cutting design spending is counterproductive because it leads to higher downstream costs.',
    reference: 'Life Cycle Costing',
  },
  {
    id: 'bar-wc-231',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Core vs Non-Core Earnings',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Separating core from non-core earnings helps analysts:',
    options: [
      'Identify sustainable earnings for forecasting by excluding non-recurring and peripheral items',
      'Only calculate taxes',
      'Only audit financials',
      'Only prepare presentations',
    ],
    correctAnswer: 0,
    explanation: 'Core earnings: recurring, sustainable from main operations. Non-core: non-recurring (restructuring, gains/losses), non-operating (unusual investments). Adjusting for non-core improves earnings quality assessment and forecasting.',
    reference: 'Earnings Analysis',
  },

  // ISC (4 questions)
  {
    id: 'isc-wc-191',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-I',
    topicId: 'isc-governance',
    topic: 'IT Governance',
    subtopic: 'Agile Governance',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Governance in Agile environments requires:',
    options: [
      'Traditional waterfall oversight',
      'No governance',
      'Only end-of-project review',
      'Adaptive controls with frequent deliverables review, empowered teams, and outcome-based metrics',
    ],
    correctAnswer: 3,
    explanation: 'Agile governance: balance control with flexibility. Sprint reviews, Definition of Done, working software as measure. Decentralized decisions within guardrails. Risk managed iteratively. Outcome-based not compliance-based.',
    reference: 'Agile Governance',
  },
  {
    id: 'isc-wc-192',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-II',
    topicId: 'isc-security',
    topic: 'Security Controls',
    subtopic: 'Security Architecture',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An organization implements a zero-trust architecture for its financial systems, requiring continuous authentication and authorization for every access request. The auditor discovers that the implementation includes microsegmentation for network access but does not include data-level access controls or continuous monitoring of user behavior after initial authentication. What gap exists?',
    options: [
      'Microsegmentation alone is sufficient for zero-trust',
      'The implementation is incomplete — zero-trust architecture requires network controls (microsegmentation) AND data-level access controls, continuous session monitoring, and behavioral analytics to detect anomalous activities after authentication',
      'Zero-trust only applies to network architecture, not data access',
      'Continuous monitoring is optional in a zero-trust framework',
    ],
    correctAnswer: 1,
    explanation: 'Zero-trust architecture operates on the principle of \'never trust, always verify\' and must extend beyond network segmentation to include: (1) data-level access controls (encryption, DLP, rights management), (2) continuous session evaluation (not just point-of-entry authentication), (3) behavioral analytics to detect compromised accounts or insider threats, and (4) automated response to anomalous behavior. Network-only implementation leaves significant gaps in the security model.',
    reference: 'Zero Trust',
  },
  {
    id: 'isc-wc-193',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-systems',
    topic: 'Information Systems',
    subtopic: 'Service Mesh',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A service mesh in microservices architecture provides:',
    options: [
      'Only database connections',
      'Only load balancing',
      'Only logging',
      'Infrastructure layer for service-to-service communication including traffic management, security, and observability',
    ],
    correctAnswer: 3,
    explanation: 'Service mesh: sidecar proxies handling service communication. Features: load balancing, service discovery, circuit breakers, mTLS encryption, observability (tracing, metrics). Examples: Istio, Linkerd. Decouples networking from application.',
    reference: 'Service Mesh',
  },
  {
    id: 'isc-wc-194',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-audit',
    topic: 'IT Audit',
    subtopic: 'DevSecOps Audit',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Auditing DevSecOps practices should assess:',
    options: [
      'Only change approvals',
      'Only documentation',
      'Only deployment speed',
      'Security integration in CI/CD pipeline, automated testing, vulnerability scanning, and security as code practices',
    ],
    correctAnswer: 3,
    explanation: 'DevSecOps audit: security tools in pipeline (SAST, DAST, SCA), automated security testing, infrastructure as code security, secrets management, container security, security gates, deployment controls, monitoring.',
    reference: 'DevSecOps Audit',
  },

  // TCP (4 questions)
  {
    id: 'tcp-wc-191',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-II',
    topicId: 'tcp-entity',
    topic: 'Entity Tax Compliance',
    subtopic: 'Qualified Opportunity Zone',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Capital gains invested in a Qualified Opportunity Zone Fund may receive:',
    options: [
      'Only ordinary income treatment',
      'Full immediate exclusion',
      'Immediate deduction',
      'Deferral of gain until 2026 and potential exclusion of appreciation if held 10+ years',
    ],
    correctAnswer: 3,
    explanation: 'QOZ benefits: defer recognition of reinvested gains (until 2026 or earlier disposition). Step-up: 10% basis increase at 5 years, 15% at 7 years (not available after 2019). 10-year hold: exclude post-investment appreciation.',
    reference: 'IRC Section 1400Z-2',
  },
  {
    id: 'tcp-wc-192',
    courseId: 'cpa',
    section: 'TCP',
    blueprintArea: 'TCP-I',
    topic: 'Individual Tax Compliance',
    subtopic: 'Kiddie Tax',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A self-employed taxpayer has net Schedule C income of $100,000 and no other income. What is the deductible portion of self-employment tax for calculating AGI?',
    options: [
    '50% of the total self-employment tax, approximately $7,065',
    '100% of the self-employment tax',
    'The employer-equivalent portion of only the Medicare tax',
    'No deduction is available for self-employment tax',
    ],
    correctAnswer: 0,
    explanation: 'Self-employed individuals deduct 50% of their SE tax as an above-the-line deduction under IRC §164(f). SE tax is calculated on 92.35% of net SE income: $100,000 × 0.9235 = $92,350. SE tax = $92,350 × 15.3% = $14,130 (approximately). The deductible portion = 50% × $14,130 ≈ $7,065. This approximation replaces the employer\'s share of FICA that W-2 employees receive tax-free. The deduction reduces income tax but not the SE tax itself.',
    reference: 'IRC Section 1(g)',
  },
  {
    id: 'tcp-wc-193',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-III',
    topicId: 'tcp-planning',
    topic: 'Tax Planning',
    subtopic: 'Spousal Lifetime Access Trust',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A Spousal Lifetime Access Trust (SLAT) allows:',
    options: [
      'Only charitable giving',
      'Only for retirement',
      'Full estate inclusion',
      'Removing assets from estate while spouse can access trust assets as beneficiary',
    ],
    correctAnswer: 3,
    explanation: 'SLAT: irrevocable trust, spouse is beneficiary. Grantor transfers assets (uses gift exemption). Assets grow outside estate. Spouse can receive distributions if needed. Careful: if spouse dies first, access lost.',
    reference: 'SLAT Planning',
  },
  {
    id: 'tcp-wc-194',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-IV',
    topicId: 'tcp-representation',
    topic: 'Tax Representation',
    subtopic: 'CDP Hearing',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A Collection Due Process (CDP) hearing provides:',
    options: [
      'Only installment agreement',
      'Only penalty abatement',
      'Only payment extension',
      'Opportunity to challenge IRS levy or lien, propose collection alternatives, and access Tax Court review',
    ],
    correctAnswer: 3,
    explanation: 'CDP hearing (Sections 6320, 6330): requested within 30 days of lien/levy notice. Appeals office conference. Can challenge liability (if not previously), propose OIC/IA, raise spousal defenses. Tax Court review of Appeals determination.',
    reference: 'IRC Sections 6320, 6330',
  },
];
