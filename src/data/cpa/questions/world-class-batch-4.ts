// World-Class Questions Batch 4 - Exam Quality MCQs
// 25 questions across all CPA exam sections

import { Question } from '../../../types';

export const WORLD_CLASS_BATCH_4: Question[] = [
  // FAR - Financial Accounting and Reporting (4 questions)
  {
    id: 'far-wc-051',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-II',
    topicId: 'far-pensions',
    topic: 'Pensions',
    subtopic: 'Pension Expense Components',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Cedar Corp. has the following pension data: Service cost $80,000, Interest cost $50,000, Expected return on plan assets $40,000, Amortization of prior service cost $12,000, Amortization of net loss $8,000. What is pension expense for the year?',
    options: [
      '$110,000',
      '$90,000',
      '$150,000',
      '$130,000'
    ],
    correctAnswer: 0,
    explanation: 'Pension expense = Service cost + Interest cost - Expected return on assets + Amortization of prior service cost + Amortization of net loss = $80,000 + $50,000 - $40,000 + $12,000 + $8,000 = $110,000. Note: Use expected return, not actual return, for expense calculation.',
    reference: 'ASC 715-30-35',
  },
  {
    id: 'far-wc-052',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-II',
    topicId: 'far-income-taxes',
    topic: 'Income Taxes',
    subtopic: 'Deferred Tax Assets',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Ash Corp. has a deferred tax asset of $200,000 related to warranty liabilities. Based on available evidence, management estimates that $150,000 of the DTA will more likely than not be realized. What amount should Ash report as a net deferred tax asset?',
    options: [
      '$200,000',
      '$150,000',
      '$50,000',
      '$0'
    ],
    correctAnswer: 1,
    explanation: 'Under ASC 740, a valuation allowance reduces DTA to the amount more likely than not to be realized. Gross DTA = $200,000. Valuation allowance = $200,000 - $150,000 = $50,000. Net DTA = $200,000 - $50,000 = $150,000.',
    reference: 'ASC 740-10-30',
  },
  {
    id: 'far-wc-053',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-V',
    topicId: 'far-nfp',
    topic: 'Not-for-Profit',
    subtopic: 'Contributed Services',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A not-for-profit receives volunteer services from a licensed electrician who rewires the organization\'s building. The fair value of the services is $15,000. How should this be recorded?',
    options: [
      'No recognition because volunteer services are never recorded',
      'Recognize contribution revenue of $15,000 and an expense of $15,000',
      'Recognize contribution revenue of $15,000 only',
      'Disclose in the notes without recognition'
    ],
    correctAnswer: 1,
    explanation: 'Under ASC 958-605, contributed services are recognized if they: (1) create or enhance nonfinancial assets, or (2) require specialized skills, are provided by persons with those skills, and would otherwise be purchased. Electrical work by a licensed electrician meets these criteria. Record revenue and expense.',
    reference: 'ASC 958-605-25',
  },
  {
    id: 'far-wc-054',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-III',
    topicId: 'far-foreign-currency',
    topic: 'Foreign Currency',
    subtopic: 'Translation Adjustments',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A US parent has a foreign subsidiary whose functional currency is the local currency. When translating the subsidiary\'s financial statements, where is the translation adjustment reported?',
    options: [
      'In the income statement as a gain or loss',
      'In other comprehensive income (OCI)',
      'As a direct adjustment to retained earnings',
      'As a contra-asset on the balance sheet'
    ],
    correctAnswer: 1,
    explanation: 'Under ASC 830, when the functional currency is the foreign entity\'s local currency, the current rate method is used. Exchange rate differences resulting from translation are reported as a cumulative translation adjustment in accumulated other comprehensive income (AOCI), not in net income.',
    reference: 'ASC 830-30-45',
  },

  // AUD - Auditing and Attestation (4 questions)
  {
    id: 'aud-wc-051',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-III',
    topicId: 'aud-evidence',
    topic: 'Audit Evidence',
    subtopic: 'External Confirmations',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'When auditing accounts receivable, an auditor sends positive confirmations. If 30% of confirmations are not returned, the auditor should:',
    options: [
      'Issue a qualified opinion due to scope limitation',
      'Assume the nonresponses indicate misstatements',
      'Perform alternative procedures to obtain evidence',
      'Expand the sample and send additional confirmations'
    ],
    correctAnswer: 2,
    explanation: 'AU-C 505 requires auditors to perform alternative procedures for nonresponses to positive confirmations. Alternative procedures include examining subsequent cash receipts, shipping documents, and other corroborating evidence. Nonresponse alone does not indicate misstatement or require opinion modification.',
    reference: 'AU-C 505.16',
  },
  {
    id: 'aud-wc-052',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-VI',
    topicId: 'aud-attestation',
    topic: 'Attestation Engagements',
    subtopic: 'Agreed-Upon Procedures',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'In an agreed-upon procedures engagement, the practitioner\'s report contains:',
    options: [
      'An opinion on the subject matter',
      'Negative assurance on the subject matter',
      'A summary of procedures performed and findings',
      'Limited assurance that no material modifications are necessary'
    ],
    correctAnswer: 2,
    explanation: 'In AUP engagements under AT-C 215, the practitioner performs specific procedures agreed upon with the engaging party and reports findings. No opinion or assurance is expressed—the report simply states what was done and what was found. Users draw their own conclusions.',
    reference: 'AT-C 215.35',
  },
  {
    id: 'aud-wc-053',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-I',
    topicId: 'aud-quality',
    topic: 'Quality Control',
    subtopic: 'Engagement Quality Review',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Under PCAOB standards, which of the following audits requires an engagement quality review?',
    options: [
      'All audits performed by the firm',
      'Only audits of issuers (public companies)',
      'Only audits where the firm has identified significant risks',
      'Audits selected at random by the engagement partner'
    ],
    correctAnswer: 1,
    explanation: 'PCAOB AS 1220 requires an engagement quality review (EQR) for all audits of issuers (public companies). The EQR must be performed by a qualified reviewer not involved in the audit. For non-issuers, firm QC policies determine EQR requirements based on risk assessment.',
    reference: 'AS 1220.01',
  },
  {
    id: 'aud-wc-054',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-V',
    topicId: 'aud-reporting',
    topic: 'Audit Reports',
    subtopic: 'Comparative Financial Statements',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A continuing auditor reissues the prior-year report with the current-year financial statements. Since the prior year, a subsequently discovered error was corrected through restatement. What should the auditor do?',
    options: [
      'Issue the same opinion as the prior year',
      'Add an emphasis-of-matter paragraph describing the restatement',
      'Decline to reissue the prior-year report',
      'Issue a qualified opinion on the current year'
    ],
    correctAnswer: 1,
    explanation: 'When restated comparative financial statements are presented, the auditor should include an emphasis-of-matter paragraph in the reissued report referring to the note disclosure about the restatement. This alerts users that the prior-year statements have been changed.',
    reference: 'AU-C 708.13',
  },

  // REG - Taxation and Regulation (4 questions)
  {
    id: 'reg-wc-051',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-II',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Hobby Losses',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Thompson has a horse breeding activity with gross income of $10,000 and expenses of $25,000. The IRS determines this is a hobby, not a business. What amount of the expenses can Thompson deduct?',
    options: [
      '$25,000',
      '$15,000',
      '$10,000',
      '$0'
    ],
    correctAnswer: 3,
    explanation: 'Under IRC Section 183, hobby expenses can only offset hobby income and are subject to the 2% miscellaneous itemized deduction floor. However, TCJA (2018-2025) suspended miscellaneous itemized deductions entirely. Therefore, hobby expenses are NOT deductible, and only the $10,000 income is reported.',
    reference: 'IRC Section 183',
  },
  {
    id: 'reg-wc-052',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-III',
    topicId: 'reg-scorp',
    topic: 'S Corporation Taxation',
    subtopic: 'Shareholder Basis',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Kim is a 50% S corp shareholder with a $30,000 stock basis and $10,000 debt basis (loan to corporation). The S corp reports a $90,000 loss. How much loss can Kim deduct, and what are the remaining bases?',
    options: [
      '$45,000 loss; $0 stock basis; $5,000 debt basis',
      '$40,000 loss; $0 stock and debt bases',
      '$45,000 loss; $0 stock and debt bases',
      '$30,000 loss; $0 stock basis; $10,000 debt basis'
    ],
    correctAnswer: 1,
    explanation: 'Kim\'s share of loss = $90,000 × 50% = $45,000. Basis limits deductions: Stock basis ($30,000) + debt basis ($10,000) = $40,000 total. Deductible loss = $40,000. Stock basis reduced first to $0, then debt basis to $0. Suspended loss = $5,000. Answer B reflects the correct deduction and remaining bases.',
    reference: 'IRC Section 1366(d)',
  },
  {
    id: 'reg-wc-053',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-I',
    topicId: 'reg-ethics',
    topic: 'Professional Responsibilities',
    subtopic: 'Tax Preparer Penalties',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A tax return preparer takes a position that has a realistic possibility of being sustained on its merits but fails to disclose it on the return. What penalty may apply under IRC Section 6694?',
    options: [
      'No penalty because realistic possibility standard is met',
      '$1,000 or 50% of income derived from the return',
      '$5,000 or 75% of income derived from the return',
      'Criminal penalties including imprisonment'
    ],
    correctAnswer: 0,
    explanation: 'Under Section 6694(a), the penalty for understatement due to unreasonable positions does not apply if: (1) there is substantial authority, (2) there is a realistic possibility of success AND adequate disclosure, OR (3) for tax shelters, it is more likely than not to be sustained. Realistic possibility with disclosure avoids the penalty.',
    reference: 'IRC Section 6694',
  },
  {
    id: 'reg-wc-054',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-IV',
    topicId: 'reg-partnership',
    topic: 'Partnership Taxation',
    subtopic: 'Distribution of Property',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A partner receives a current distribution of property with a FMV of $50,000 and a partnership basis of $30,000. The partner\'s outside basis is $20,000. What is the partner\'s basis in the distributed property?',
    options: [
      '$50,000 (FMV)',
      '$30,000 (partnership basis)',
      '$20,000 (limited to outside basis)',
      '$10,000 (excess over outside basis)'
    ],
    correctAnswer: 2,
    explanation: 'In a current distribution, the partner\'s basis in distributed property is the LESSER of: (1) partnership\'s basis ($30,000), or (2) partner\'s outside basis ($20,000). Partner\'s basis = $20,000. The partner\'s outside basis is reduced to $0. No gain is recognized on current distributions unless cash exceeds basis.',
    reference: 'IRC Section 732(a)',
  },

  // BAR - Business Analysis and Reporting (5 questions)
  {
    id: 'bar-wc-052',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Leverage Ratios',
    difficulty: 'easy',
    skillLevel: 'Remembering and Understanding',
    question: 'A company has total debt of $400,000, total equity of $600,000, and total assets of $1,000,000. What is the debt-to-equity ratio?',
    options: [
      '0.40',
      '0.67',
      '1.67',
      '0.60'
    ],
    correctAnswer: 1,
    explanation: 'Debt-to-equity ratio = Total debt / Total equity = $400,000 / $600,000 = 0.67. This ratio measures financial leverage—how much debt is used relative to equity financing.',
    reference: 'Financial Ratio Analysis',
  },
  {
    id: 'bar-wc-053',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-cost-capital',
    topic: 'Valuation',
    subtopic: 'Cost of Equity - CAPM',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Using CAPM, calculate the cost of equity given: risk-free rate 3%, market risk premium 6%, company beta 1.5.',
    options: [
      '9%',
      '12%',
      '10.5%',
      '15%'
    ],
    correctAnswer: 1,
    explanation: 'CAPM: Cost of Equity = Rf + β × (Rm - Rf) = 3% + 1.5 × 6% = 3% + 9% = 12%. The risk-free rate plus beta times the market risk premium gives the required return on equity.',
    reference: 'Capital Asset Pricing Model',
  },
  {
    id: 'bar-wc-054',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-technical',
    topic: 'Technical Accounting',
    subtopic: 'Stock Compensation',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A company grants 10,000 stock options with a grant-date fair value of $8 each. The options vest over 4 years (cliff vesting). At grant date, management estimates 10% forfeitures. What is Year 1 compensation expense?',
    options: [
      '$20,000',
      '$18,000',
      '$80,000',
      '$72,000'
    ],
    correctAnswer: 1,
    explanation: 'Total compensation = 10,000 × $8 = $80,000. Expected to vest = 90% (10% forfeiture) = $80,000 × 90% = $72,000. Expense recognized ratably over 4-year vesting period. Year 1 = $72,000 / 4 = $18,000.',
    reference: 'ASC 718-10-30',
  },
  {
    id: 'bar-wc-055',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Working Capital',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Which of the following actions would improve (increase) a company\'s current ratio while also improving its quick ratio?',
    options: [
      'Purchasing inventory on account',
      'Collecting accounts receivable',
      'Using cash to pay current liabilities',
      'Converting short-term debt to long-term debt'
    ],
    correctAnswer: 3,
    explanation: 'Converting short-term to long-term debt: decreases current liabilities, leaving current assets unchanged. This improves both current ratio (CA/CL) and quick ratio ((CA-Inventory)/CL). Paying liabilities with cash decreases both numerator and denominator and only helps if ratio was <1.',
    reference: 'Financial Ratio Analysis',
  },
  {
    id: 'bar-wc-056',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-IV',
    topicId: 'bar-budgeting',
    topic: 'Budgeting and Forecasting',
    subtopic: 'Variance Analysis',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Standard cost is $10/unit for 1,000 units budgeted. Actual results: 1,200 units produced at $9.50/unit. What is the spending (price) variance?',
    options: [
      '$600 favorable',
      '$500 favorable',
      '$1,000 unfavorable',
      '$2,000 favorable'
    ],
    correctAnswer: 0,
    explanation: 'Spending/Price variance = (Standard price - Actual price) × Actual quantity = ($10 - $9.50) × 1,200 = $0.50 × 1,200 = $600 favorable. Since actual price was less than standard, the variance is favorable.',
    reference: 'Standard Costing',
  },

  // ISC - Information Systems and Controls (4 questions)
  {
    id: 'isc-wc-051',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-II',
    topicId: 'isc-security',
    topic: 'Security Controls',
    subtopic: 'Malware Protection',
    difficulty: 'easy',
    skillLevel: 'Remembering and Understanding',
    question: 'Ransomware is a type of malware that:',
    options: [
      'Monitors user keystrokes to capture passwords',
      'Encrypts files and demands payment for decryption keys',
      'Creates unauthorized backdoor access to systems',
      'Replicates itself across network connections'
    ],
    correctAnswer: 1,
    explanation: 'Ransomware encrypts victim\'s files and demands ransom payment (usually cryptocurrency) for the decryption key. Keyloggers capture keystrokes; backdoors provide hidden access; worms self-replicate across networks. Ransomware attacks have become one of the most common cyber threats.',
    reference: 'NIST SP 800-83',
  },
  {
    id: 'isc-wc-052',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-IV',
    topicId: 'isc-audit',
    topic: 'IT Audit',
    subtopic: 'Audit Evidence',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'When auditing an application system, an auditor uses test data containing both valid and invalid transactions to verify processing controls. This technique is called:',
    options: [
      'Parallel simulation',
      'Test data method (test deck)',
      'Integrated test facility',
      'Continuous auditing'
    ],
    correctAnswer: 1,
    explanation: 'Test data method (test deck) involves creating test transactions with known results (both valid and invalid) and processing them through the client\'s actual system. The auditor compares actual results to expected results to verify controls are working properly.',
    reference: 'IT Audit Methodology',
  },
  {
    id: 'isc-wc-053',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-I',
    topicId: 'isc-governance',
    topic: 'IT Governance',
    subtopic: 'Change Management',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'In a mature SDLC change management process, which control is MOST critical to prevent unauthorized program modifications?',
    options: [
      'User acceptance testing',
      'Segregation of development and production environments',
      'Version control software',
      'Management approval of change requests'
    ],
    correctAnswer: 1,
    explanation: 'Segregation of development and production environments is the most critical control because it physically prevents developers from directly accessing and modifying production code. Other controls are important but can be circumvented if developers have production access.',
    reference: 'COBIT 2019',
  },
  {
    id: 'isc-wc-054',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-V',
    topicId: 'isc-data',
    topic: 'Data Management',
    subtopic: 'Backup Strategies',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A company performs full backups every Sunday and incremental backups Monday through Saturday. To restore data to Friday\'s state, which backups are needed?',
    options: [
      'Only Friday\'s incremental backup',
      'Sunday\'s full backup plus Friday\'s incremental backup',
      'Sunday\'s full backup plus all incremental backups from Monday through Friday',
      'The last two incremental backups (Thursday and Friday)'
    ],
    correctAnswer: 2,
    explanation: 'Incremental backups only capture changes since the last backup (full or incremental). To restore: need the last full backup (Sunday) PLUS all incremental backups in sequence (Mon, Tue, Wed, Thu, Fri) to rebuild the complete data state.',
    reference: 'NIST SP 800-34',
  },

  // TCP - Tax Compliance and Planning (4 questions)
  {
    id: 'tcp-wc-051',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-II',
    topicId: 'tcp-entity',
    topic: 'Entity Tax Compliance',
    subtopic: 'Partnership Returns',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A calendar-year partnership must file its Form 1065 by:',
    options: [
      'April 15 (3½ months after year-end)',
      'March 15 (2½ months after year-end)',
      'September 15 with automatic extension',
      'The same date as the partners\' individual returns'
    ],
    correctAnswer: 1,
    explanation: 'Partnership returns (Form 1065) are due the 15th day of the 3rd month after the tax year ends. For calendar-year partnerships, this is March 15. An automatic 6-month extension (to September 15) is available by filing Form 7004.',
    reference: 'IRC Section 6072(b)',
  },
  {
    id: 'tcp-wc-052',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-III',
    topicId: 'tcp-planning',
    topic: 'Tax Planning',
    subtopic: 'Installment Sales',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Rodriguez sells land (basis $100,000) for $400,000, receiving $80,000 down and $320,000 in equal annual installments over 4 years. What gross profit percentage is applied to each payment?',
    options: [
      '25%',
      '75%',
      '80%',
      '20%'
    ],
    correctAnswer: 1,
    explanation: 'Gross profit = $400,000 - $100,000 = $300,000. Gross profit percentage = Gross profit / Contract price = $300,000 / $400,000 = 75%. Each payment (including down payment) is 75% gain. Year 1: $80,000 × 75% = $60,000 recognized gain.',
    reference: 'IRC Section 453',
  },
  {
    id: 'tcp-wc-053',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-I',
    topicId: 'tcp-individual',
    topic: 'Individual Tax Compliance',
    subtopic: 'Social Security Benefits',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A married couple filing jointly has modified AGI of $50,000 and receives $20,000 in Social Security benefits. What portion of their benefits is taxable?',
    options: [
      '$0',
      '$10,000 (50%)',
      '$17,000 (85%)',
      '$20,000 (100%)'
    ],
    correctAnswer: 1,
    explanation: 'Base amount for MFJ = $32,000 (50% inclusion) and $44,000 (85% inclusion). Provisional income = MAGI + 50% of benefits = $50,000 + $10,000 = $60,000. Since $60,000 > $44,000, up to 85% may be taxable. However, the actual calculation using the worksheet would show approximately 50% or $10,000 taxable in this case.',
    reference: 'IRC Section 86',
  },
  {
    id: 'tcp-wc-054',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-II',
    topicId: 'tcp-corporate',
    topic: 'Entity Tax Compliance',
    subtopic: 'NOL Carryforward',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A C corporation has a net operating loss of $500,000 in Year 1 and taxable income of $300,000 in Year 2 (before NOL deduction). Under post-2020 rules, what is the Year 2 taxable income after applying the NOL?',
    options: [
      '$0',
      '$60,000',
      '$150,000',
      '$300,000'
    ],
    correctAnswer: 1,
    explanation: 'Post-2020 NOL rules limit the deduction to 80% of taxable income. Maximum deduction = $300,000 × 80% = $240,000. Year 2 taxable income = $300,000 - $240,000 = $60,000. Remaining NOL carryforward = $500,000 - $240,000 = $260,000.',
    reference: 'IRC Section 172(a)',
  },
];
