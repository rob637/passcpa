// World-Class Questions Batch 40 - Exam Quality MCQs
// 25 questions across all CPA exam sections

import { Question } from '../../../types';

export const WORLD_CLASS_BATCH_40: Question[] = [
  // FAR (4 questions)
  {
    id: 'far-wc-195',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-II',
    topicId: 'far-consolidation',
    topic: 'Consolidation',
    subtopic: 'Noncontrolling Interest',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'At acquisition, noncontrolling interest in a business combination is measured at:',
    options: [
      'Fair value OR proportionate share of net identifiable assets (accounting policy choice)',
      'Book value only',
      'Historical cost only',
      'Zero',
    ],
    correctAnswer: 0,
    explanation: 'NCI initial measurement (ASC 805): policy choice. (1) Fair value = full goodwill method, NCI gets share of goodwill. (2) NCI share of net identifiable assets = partial goodwill, no goodwill to NCI. Choice made acquisition-by-acquisition.',
    reference: 'ASC 805-20-30',
  },
  {
    id: 'far-wc-196',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-I',
    topicId: 'far-liabilities',
    topic: 'Liabilities',
    subtopic: 'Exit Activities',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Costs to terminate an operating lease as part of exit activities are recognized when:',
    options: [
      'Board approves',
      'Management decides',
      'The contract is terminated or entity ceases use of the right conveyed by the contract',
      'Plan is announced',
    ],
    correctAnswer: 2,
    explanation: 'Contract termination costs (ASC 420): recognized when contract is terminated per terms (usually termination fee) OR when entity ceases using the right (remaining obligation). Not merely when exit plan approved.',
    reference: 'ASC 420-10-25',
  },
  {
    id: 'far-wc-197',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-III',
    topicId: 'far-foreign',
    topic: 'Foreign Currency',
    subtopic: 'Remeasurement',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'When remeasuring foreign currency financial statements into the functional currency:',
    options: [
      'No translation needed',
      'All accounts use historical rate',
      'Monetary items use current rate, nonmonetary items use historical rates, and gains/losses go to income',
      'All accounts use current rate',
    ],
    correctAnswer: 2,
    explanation: 'Remeasurement (temporal method): monetary assets/liabilities at current rate, nonmonetary items at historical rates, revenues/expenses at average (except those related to nonmonetary). Resulting gains/losses in current income.',
    reference: 'ASC 830-10-45',
  },
  {
    id: 'far-wc-198',
    section: 'FAR',
    courseId: 'cpa',
    blueprintArea: 'FAR-IV',
    topicId: 'far-government',
    topic: 'Government Accounting',
    subtopic: 'Compensated Absences',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'In governmental accounting, compensated absences that will be liquidated from governmental funds are:',
    options: [
      'Recognized as fund expenditure only when matured (due and payable), with full liability in government-wide statements',
      'Not recorded',
      'Expensed when earned',
      'Fully accrued',
    ],
    correctAnswer: 0,
    explanation: 'Compensated absences: government-wide = full accrual (liability when earned). Governmental funds = recognized when matured (due and payable from current resources). Long-term portion in government-wide, not fund statements.',
    reference: 'GASB 16',
  },

  // AUD (4 questions)
  {
    id: 'aud-wc-195',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-IV',
    topicId: 'aud-comparative',
    topic: 'Reporting',
    subtopic: 'Comparative Financial Statements',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'When comparative financial statements are presented and a different auditor reported on prior period:',
    options: [
      'Only current auditor reports',
      'Prior opinion ignored',
      'Combined opinion issued',
      'Prior auditor may reissue report, or current auditor refers to predecessor\'s report in other-matter paragraph',
    ],
    correctAnswer: 3,
    explanation: 'Comparative statements: predecessor may reissue (updated or unchanged). If predecessor does not reissue, current auditor\'s report includes other-matter paragraph referencing predecessor\'s report (type, date, any modifications).',
    reference: 'AU-C 700',
  },
  {
    id: 'aud-wc-196',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-II',
    topicId: 'aud-it',
    topic: 'IT Controls',
    subtopic: 'Automated Application Controls',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Automated application controls are generally:',
    options: [
      'Less reliable than manual',
      'Only preventive',
      'Not testable',
      'More reliable than manual controls because they operate consistently once properly designed and implemented',
    ],
    correctAnswer: 3,
    explanation: 'Automated controls: operate consistently, don\'t make judgment errors, don\'t get fatigued. Once working correctly, highly reliable. But depend on ITGCs functioning. Manual controls subject to human error, fatigue.',
    reference: 'Automated Controls',
  },
  {
    id: 'aud-wc-197',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-III',
    topicId: 'aud-related',
    topic: 'Related Parties',
    subtopic: 'Substantive Procedures',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Audit procedures for related party transactions include:',
    options: [
      'Only analytical procedures',
      'Only inquiry',
      'Only reading board minutes',
      'Confirming terms with counterparty, evaluating business purpose, and verifying appropriate disclosure',
    ],
    correctAnswer: 3,
    explanation: 'Related party procedures (AU-C 550): confirm terms, evaluate business rationale, test recording/authorization, read contracts, verify arm\'s-length pricing claims, ensure proper disclosure. Higher risk than ordinary transactions.',
    reference: 'AU-C 550',
  },
  {
    id: 'aud-wc-198',
    section: 'AUD',
    courseId: 'cpa',
    blueprintArea: 'AUD-I',
    topicId: 'aud-ethics',
    topic: 'Professional Ethics',
    subtopic: 'Independence Impairment',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Direct financial interest in an audit client by an immediate family member of the audit engagement partner:',
    options: [
      'Only impairs if greater than 5%',
      'Is permitted if disclosed',
      'Is not an independence issue',
      'Impairs independence regardless of materiality',
    ],
    correctAnswer: 3,
    explanation: 'Direct financial interest: any amount = impairment for covered member and immediate family. Immediate family = spouse, dependent. No materiality threshold. Must dispose before accepting engagement or becoming covered.',
    reference: 'AICPA Code',
  },

  // REG (4 questions)
  {
    id: 'reg-wc-195',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-III',
    topicId: 'reg-c-corp',
    topic: 'C Corporation',
    subtopic: 'Organizational Expenditures',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A corporation may immediately expense up to how much of organizational expenditures?',
    options: [
      '$50,000',
      '$5,000 (reduced if total exceeds $50,000), then amortize remainder over 180 months',
      '$100,000',
      '$10,000',
    ],
    correctAnswer: 1,
    explanation: 'Section 248: $5,000 immediately deductible (reduced dollar-for-dollar when total > $50,000). Remainder amortized over 180 months. Start-up costs (Section 195) have same rules. Must elect by filing return.',
    reference: 'IRC Section 248',
  },
  {
    id: 'reg-wc-196',
    courseId: 'cpa',
    section: 'REG',
    blueprintArea: 'REG-II',
    topic: 'Individual Taxation',
    subtopic: 'Medical Expense Deduction',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'Taxpayer Grant, age 52 and single, had AGI of $120,000 and paid $15,000 in unreimbursed medical expenses including $4,000 for cosmetic surgery. What is Grant\'s allowable medical expense deduction on Schedule A?',
    options: [
      '$2,000',
      '$6,000',
      '$15,000',
      '$0',
    ],
    correctAnswer: 0,
    explanation: 'Cosmetic surgery is not deductible unless medically necessary. Qualifying expenses = $15,000 − $4,000 = $11,000. The 7.5% AGI floor = 7.5% × $120,000 = $9,000. Deductible amount = $11,000 − $9,000 = $2,000. Under IRC §213(d)(9), cosmetic surgery is excluded from deductible medical expenses unless necessary to correct a deformity arising from a congenital abnormality, personal injury, or disfiguring disease.',
    reference: 'IRC Section 213',
  },
  {
    id: 'reg-wc-197',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-I',
    topicId: 'reg-negotiable',
    topic: 'Negotiable Instruments',
    subtopic: 'Requirements for Negotiability',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'To be a negotiable instrument under UCC Article 3, the instrument must:',
    options: [
      'Be written, signed, contain unconditional promise to pay fixed amount of money, be payable on demand or at definite time, and payable to bearer or order',
      'Only state payment amount',
      'Only be dated',
      'Only be signed',
    ],
    correctAnswer: 0,
    explanation: 'Negotiable instrument (UCC 3-104): writing, signed by maker/drawer, unconditional promise/order, fixed amount of money, no other undertaking, payable on demand or definite time, payable to order or bearer.',
    reference: 'UCC 3-104',
  },
  {
    id: 'reg-wc-198',
    section: 'REG',
    courseId: 'cpa',
    blueprintArea: 'REG-IV',
    topicId: 'reg-basis',
    topic: 'Property Transactions',
    subtopic: 'Carryover Basis',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A donee\'s basis in gifted property for loss purposes is:',
    options: [
      'Always FMV',
      'Zero',
      'Lesser of donor\'s basis or FMV at time of gift (dual basis rule)',
      'Always donor\'s basis',
    ],
    correctAnswer: 2,
    explanation: 'Gift basis rules: gain basis = donor\'s basis (+ gift tax on appreciation). Loss basis = lesser of donor\'s basis or FMV. If FMV < donor\'s basis and sold between values, no gain or loss. Holding period includes donor\'s.',
    reference: 'IRC Section 1015',
  },

  // BAR (5 questions)
  {
    id: 'bar-wc-232',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Beneish M-Score',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'The Beneish M-Score is used to:',
    options: [
      'Calculate equity value',
      'Detect likelihood of earnings manipulation using financial statement ratios',
      'Measure liquidity',
      'Predict revenue growth'
    ],
    correctAnswer: 1,
    explanation: 'M-Score: 8 variables (days sales receivable index, gross margin index, asset quality index, sales growth index, depreciation index, SG&A index, leverage index, accruals/total assets). Score > -2.22 suggests manipulation.',
    reference: 'Beneish M-Score',
  },
  {
    id: 'bar-wc-233',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-II',
    topicId: 'bar-valuation',
    topic: 'Valuation',
    subtopic: 'Discounts for Lack of Marketability',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A discount for lack of marketability (DLOM) reflects:',
    options: [
      'Operating costs',
      'Reduced value of an interest that cannot be easily sold or converted to cash',
      'Market risk premium',
      'Dividend policy',
    ],
    correctAnswer: 1,
    explanation: 'DLOM: illiquidity discount for private company shares. Studies suggest 15-35% range. Based on restricted stock studies, IPO studies. Applied after control/minority adjustments. Reflects time, cost, uncertainty of sale.',
    reference: 'DLOM Valuation',
  },
  {
    id: 'bar-wc-234',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-technical',
    topic: 'Technical Accounting',
    subtopic: 'SEC Comment Letters',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'SEC comment letters typically address:',
    options: [
      'Compliance with GAAP and SEC rules, adequacy of disclosure, and consistency with MD&A',
      'Only audit opinions',
      'Only typos',
      'Only stock price',
    ],
    correctAnswer: 0,
    explanation: 'SEC comments: GAAP compliance, segment allocation, revenue recognition, critical accounting estimates, MD&A consistency/adequacy, non-GAAP measures, related party issues, material contracts. Public record after resolved.',
    reference: 'SEC Comment Letters',
  },
  {
    id: 'bar-wc-235',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-III',
    topicId: 'bar-cost',
    topic: 'Cost Accounting',
    subtopic: 'Backflush Costing',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Backflush costing is appropriate for:',
    options: [
      'Job costing',
      'Traditional manufacturing',
      'JIT environments with minimal WIP inventory where costs are assigned at completion or sale',
      'Service companies',
    ],
    correctAnswer: 2,
    explanation: 'Backflush: delays cost assignment, applies at completion or sale. Appropriate for JIT (minimal WIP). Simplifies accounting but may not comply with GAAP for inventory valuation. Trigger points vary by company.',
    reference: 'Backflush Costing',
  },
  {
    id: 'bar-wc-236',
    section: 'BAR',
    courseId: 'cpa',
    blueprintArea: 'BAR-I',
    topicId: 'bar-analysis',
    topic: 'Financial Statement Analysis',
    subtopic: 'Peer Analysis',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'When selecting peer companies for comparison, analysts should consider:',
    options: [
      'Only market cap',
      'Only revenue',
      'Industry classification, business model, size, growth profile, and geographic exposure',
      'Only profitability',
    ],
    correctAnswer: 2,
    explanation: 'Peer selection: similar industry/sub-industry, comparable business model, size (revenue, assets), growth stage, geographic mix, capital structure, margin profile. Pure-play comparables preferred over diversified.',
    reference: 'Peer Analysis',
  },

  // ISC (4 questions)
  {
    id: 'isc-wc-195',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-I',
    topicId: 'isc-governance',
    topic: 'IT Governance',
    subtopic: 'Digital Risk',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Digital risk management addresses:',
    options: [
      'Only system failures',
      'Only data loss',
      'Only cyber threats',
      'Risks from digital business initiatives including cybersecurity, third parties, compliance, and business model disruption',
    ],
    correctAnswer: 3,
    explanation: 'Digital risk: broader than cyber. Includes digital transformation risks, business model disruption, third-party digital dependencies, data privacy, regulatory (GDPR, CCPA), reputation, emerging tech risks.',
    reference: 'Digital Risk Management',
  },
  {
    id: 'isc-wc-196',
    courseId: 'cpa',
    section: 'ISC',
    blueprintArea: 'ISC-II',
    topic: 'Security Controls',
    subtopic: 'CASB Solutions',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A company implements robotic process automation (RPA) to automate journal entry postings from its accounts payable sub-ledger to the general ledger. The RPA bot runs daily without human intervention. What IT controls should be in place for this automation?',
    options: [
    'No controls are needed because RPA eliminates human error',
    'Access controls over bot credentials, change management for bot logic, monitoring of bot output with exception handling, reconciliation controls to verify posting accuracy, and audit trail logging of all bot activities',
    'Only a monthly review of bot output is sufficient',
    'RPA bots should be treated the same as regular user accounts with no special controls',
    ],
    correctAnswer: 1,
    explanation: 'RPA bots that process financial data require specific IT controls: (1) access controls — bot credentials should follow least privilege and be managed separately from user accounts, (2) change management — any changes to bot logic must go through the standard change process to prevent unauthorized modifications, (3) monitoring and reconciliation — automated checks should verify that postings are complete and accurate, (4) exception handling — procedures for when the bot encounters errors, and (5) audit logging — full trail of all bot activities for review.',
    reference: 'CASB Solutions',
  },
  {
    id: 'isc-wc-197',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-systems',
    topic: 'Information Systems',
    subtopic: 'Event-Driven Architecture',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Event-driven architecture (EDA) is characterized by:',
    options: [
      'Batch processing only',
      'Synchronous calls only',
      'Direct database access',
      'Loose coupling where services react to events published asynchronously enabling real-time responsiveness',
    ],
    correctAnswer: 3,
    explanation: 'EDA: event producers publish, consumers subscribe and react. Loose coupling, scalability, real-time processing. Event types: notification, state transfer, event sourcing. Challenges: eventual consistency, complexity.',
    reference: 'Event-Driven Architecture',
  },
  {
    id: 'isc-wc-198',
    section: 'ISC',
    courseId: 'cpa',
    blueprintArea: 'ISC-III',
    topicId: 'isc-audit',
    topic: 'IT Audit',
    subtopic: 'Third Party Risk Assessment',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Third party/vendor IT risk assessments should evaluate:',
    options: [
      'Only service levels',
      'Only pricing',
      'Only financial stability',
      'Security controls, compliance certifications, business continuity, data handling, and subcontractor management',
    ],
    correctAnswer: 3,
    explanation: 'Vendor assessment: security posture (penetration tests, SOC reports), compliance (industry regs), BCP/DR, data protection, right to audit, subcontractor oversight, incident response, insurance coverage.',
    reference: 'Third Party Risk',
  },

  // TCP (4 questions)
  {
    id: 'tcp-wc-195',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-II',
    topicId: 'tcp-entity',
    topic: 'Entity Tax Compliance',
    subtopic: 'Tax-Exempt Organizations',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'Unrelated business taxable income (UBTI) for exempt organizations includes:',
    options: [
      'Only donations',
      'All revenue',
      'Only investment income',
      'Income from trade or business regularly carried on and not substantially related to exempt purpose',
    ],
    correctAnswer: 3,
    explanation: 'UBTI (Section 512): three requirements: trade or business, regularly carried on, not substantially related to exempt purpose. Exceptions: volunteer labor, convenience, passive (dividends, interest, rent). Taxed at normal rates.',
    reference: 'IRC Section 512',
  },
  {
    id: 'tcp-wc-196',
    courseId: 'cpa',
    section: 'TCP',
    blueprintArea: 'TCP-I',
    topic: 'Individual Tax Compliance',
    subtopic: 'Gambling Losses',
    difficulty: 'medium',
    skillLevel: 'Application',
    question: 'A taxpayer has $50,000 of W-2 wages, $8,000 of Schedule C net income, and a $15,000 net loss from a rental activity in which they did not materially participate. The taxpayer\'s AGI is below $100,000. How much of the rental loss is deductible?',
    options: [
    '$15,000 — the full rental loss, because the taxpayer actively participates and AGI is under $100,000 (assuming active participation)',
    '$0 — passive losses cannot offset active income',
    '$8,000 — limited to the passive income',
    '$25,000 — the maximum rental loss allowance',
    ],
    correctAnswer: 0,
    explanation: 'Under IRC §469(i), individuals who actively participate in rental real estate activities may deduct up to $25,000 of rental losses against nonpassive income. The allowance phases out between $100,000 and $150,000 AGI. With AGI below $100,000 and active participation, the full $15,000 rental loss is deductible. Active participation requires a lesser standard than material participation — the taxpayer must make management decisions (approving tenants, setting rents, approving repairs).',
    reference: 'IRC Section 165(d)',
  },
  {
    id: 'tcp-wc-197',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-III',
    topicId: 'tcp-planning',
    topic: 'Tax Planning',
    subtopic: 'Donor Advised Fund',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'A donor advised fund (DAF) allows donors to:',
    options: [
      'Retain control of assets',
      'Get income from fund',
      'Reclaim contributions',
      'Make irrevocable contribution, receive immediate deduction, and recommend grants to charities over time',
    ],
    correctAnswer: 3,
    explanation: 'DAF: contribute to sponsoring charity (irrevocable). Immediate deduction at contribution. Investment grows tax-free. Recommend (not control) grants. Useful for bunching deductions or appreciated asset donations.',
    reference: 'DAF Planning',
  },
  {
    id: 'tcp-wc-198',
    section: 'TCP',
    courseId: 'cpa',
    blueprintArea: 'TCP-IV',
    topicId: 'tcp-representation',
    topic: 'Tax Representation',
    subtopic: 'Closing Agreements',
    difficulty: 'hard',
    skillLevel: 'Analysis',
    question: 'An IRS closing agreement (Form 906):',
    options: [
      'Can be reopened anytime',
      'Only covers interest',
      'Is simply advisory',
      'Is a final, binding agreement between IRS and taxpayer resolving tax matters that cannot be reopened',
    ],
    correctAnswer: 3,
    explanation: 'Closing agreement (Section 7121): final, conclusive determination. Cannot be reopened except for fraud, malfeasance, or misrepresentation. Used to resolve specific issues or prospective transactions. Signed by authorized officials.',
    reference: 'IRC Section 7121',
  },
];
