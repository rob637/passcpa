// Expanded Formula Flashcards - Major expansion for world-class coverage
// Critical formulas, ratios, and calculations for all CPA exam sections

import { Flashcard } from './types';

// ==========================================
// FAR EXPANDED FORMULAS (50 cards)
// ==========================================
export const FAR_EXPANDED_FORMULAS: Flashcard[] = [
  {
    id: 'far-exp-form-001',
    section: 'FAR',
    type: 'formula',
    topic: 'Inventory',
    blueprintArea: 'FAR-II',
    front: 'COST OF GOODS SOLD formula',
    back: 'Beginning Inventory + Purchases - Ending Inventory = COGS\n\nAlternatively:\nBeginning Inventory + Net Purchases + Freight-In - Purchase Returns - Purchase Discounts - Ending Inventory',
    example: 'BI $50,000 + Purchases $200,000 - EI $40,000 = COGS $210,000',
    difficulty: 'easy',
    tags: ['inventory', 'COGS'],
    reference: 'ASC 330',
  },
  {
    id: 'far-exp-form-002',
    section: 'FAR',
    type: 'formula',
    topic: 'Inventory',
    blueprintArea: 'FAR-II',
    front: 'INVENTORY TURNOVER ratio',
    back: 'Cost of Goods Sold ÷ Average Inventory\n\nDays in Inventory = 365 ÷ Inventory Turnover',
    example: 'COGS $1,000,000 ÷ Avg Inventory $200,000 = 5 times\nDays = 365 ÷ 5 = 73 days',
    difficulty: 'easy',
    tags: ['inventory', 'turnover'],
    reference: 'Financial Analysis',
  },
  {
    id: 'far-exp-form-003',
    section: 'FAR',
    type: 'formula',
    topic: 'Receivables',
    blueprintArea: 'FAR-II',
    front: 'ACCOUNTS RECEIVABLE TURNOVER',
    back: 'Net Credit Sales ÷ Average Accounts Receivable\n\nDays Sales Outstanding (DSO) = 365 ÷ A/R Turnover',
    example: 'Sales $2,000,000 ÷ Avg A/R $250,000 = 8 times\nDSO = 365 ÷ 8 = 46 days',
    difficulty: 'easy',
    tags: ['receivables', 'turnover'],
    reference: 'Financial Analysis',
  },
  {
    id: 'far-exp-form-004',
    section: 'FAR',
    type: 'formula',
    topic: 'Depreciation',
    blueprintArea: 'FAR-II',
    front: 'STRAIGHT-LINE DEPRECIATION',
    back: '(Cost - Salvage Value) ÷ Useful Life = Annual Depreciation\n\nOr: (Cost - Salvage) × (1 ÷ Life) = Annual Amount',
    example: '($100,000 - $10,000) ÷ 10 years = $9,000/year',
    difficulty: 'easy',
    tags: ['depreciation', 'straight-line'],
    reference: 'ASC 360',
  },
  {
    id: 'far-exp-form-005',
    section: 'FAR',
    type: 'formula',
    topic: 'Depreciation',
    blueprintArea: 'FAR-II',
    front: 'DOUBLE-DECLINING BALANCE depreciation',
    back: 'Book Value × (2 ÷ Useful Life) = Annual Depreciation\n\nNote: Ignore salvage value until BV reaches salvage',
    example: 'Year 1: $100,000 × (2/5) = $40,000\nYear 2: $60,000 × (2/5) = $24,000',
    difficulty: 'medium',
    tags: ['depreciation', 'accelerated'],
    reference: 'ASC 360',
  },
  {
    id: 'far-exp-form-006',
    section: 'FAR',
    type: 'formula',
    topic: 'Depreciation',
    blueprintArea: 'FAR-II',
    front: 'SUM-OF-YEARS-DIGITS depreciation',
    back: '(Cost - Salvage) × (Remaining Life ÷ SYD) = Annual Depreciation\n\nSYD = n(n+1)/2 where n = useful life',
    example: '5-year life: SYD = 5(6)/2 = 15\nYear 1: ($100K - $10K) × 5/15 = $30,000\nYear 2: $90K × 4/15 = $24,000',
    difficulty: 'medium',
    tags: ['depreciation', 'SYD'],
    reference: 'ASC 360',
  },
  {
    id: 'far-exp-form-007',
    section: 'FAR',
    type: 'formula',
    topic: 'Depreciation',
    blueprintArea: 'FAR-II',
    front: 'UNITS OF PRODUCTION depreciation',
    back: '(Cost - Salvage) ÷ Total Estimated Units = Rate per Unit\n\nAnnual Depreciation = Units Produced × Rate per Unit',
    example: '($100K - $10K) ÷ 100,000 units = $0.90/unit\n20,000 units × $0.90 = $18,000',
    difficulty: 'easy',
    tags: ['depreciation', 'units'],
    reference: 'ASC 360',
  },
  {
    id: 'far-exp-form-008',
    section: 'FAR',
    type: 'formula',
    topic: 'Bonds',
    blueprintArea: 'FAR-II',
    front: 'BOND ISSUE PRICE calculation',
    back: 'PV of Principal + PV of Interest Payments\n\n= (Face Value × PV factor) + (Interest Payment × PV annuity factor)\n\nUse MARKET rate to discount',
    example: '$100K bond, 10% stated, 8% market, 5 years:\nPV Principal: $100K × 0.6806 = $68,060\nPV Interest: $10K × 3.9927 = $39,927\nIssue Price = $107,987 (premium)',
    difficulty: 'hard',
    tags: ['bonds', 'present value'],
    reference: 'ASC 470',
  },
  {
    id: 'far-exp-form-009',
    section: 'FAR',
    type: 'formula',
    topic: 'Bonds',
    blueprintArea: 'FAR-II',
    front: 'EFFECTIVE INTEREST METHOD for bonds',
    back: 'Interest Expense = Carrying Value × Market Rate\n\nAmortization = Interest Expense - Cash Interest\n\nCash Interest = Face Value × Stated Rate',
    example: 'CV $107,987, Market 8%, Stated 10%:\nInterest Exp = $107,987 × 8% = $8,639\nCash Interest = $100K × 10% = $10,000\nPremium Amort = $10,000 - $8,639 = $1,361',
    difficulty: 'hard',
    tags: ['bonds', 'amortization'],
    reference: 'ASC 470',
  },
  {
    id: 'far-exp-form-010',
    section: 'FAR',
    type: 'formula',
    topic: 'Leases',
    blueprintArea: 'FAR-III',
    front: 'LEASE LIABILITY calculation (lessee)',
    back: 'PV of Lease Payments = Payment × PV Annuity Factor\n\nUse: Rate implicit in lease (if known) OR\nLessee\'s incremental borrowing rate',
    example: '$10,000 annual payments, 5 years, 6% rate:\nLease Liability = $10,000 × 4.2124 = $42,124',
    difficulty: 'medium',
    tags: ['leases', 'present value'],
    reference: 'ASC 842',
  },
  {
    id: 'far-exp-form-011',
    section: 'FAR',
    type: 'formula',
    topic: 'EPS',
    blueprintArea: 'FAR-I',
    front: 'BASIC EPS formula',
    back: '(Net Income - Preferred Dividends) ÷ Weighted Average Common Shares Outstanding\n\nPreferred dividends: Declared if cumulative, Paid if noncumulative',
    example: 'NI $500K, Pref Div $50K, 100K shares:\nBasic EPS = ($500K - $50K) ÷ 100K = $4.50',
    difficulty: 'easy',
    tags: ['EPS', 'earnings per share'],
    reference: 'ASC 260',
  },
  {
    id: 'far-exp-form-012',
    section: 'FAR',
    type: 'formula',
    topic: 'EPS',
    blueprintArea: 'FAR-I',
    front: 'TREASURY STOCK METHOD (for diluted EPS)',
    back: 'Incremental Shares = Options Outstanding - (Options × Exercise Price ÷ Avg Market Price)\n\nOnly dilutive if Exercise Price < Market Price',
    example: '10,000 options, $20 exercise, $25 market:\nProceeds: 10,000 × $20 = $200,000\nShares repurchased: $200,000 ÷ $25 = 8,000\nIncremental: 10,000 - 8,000 = 2,000 shares',
    difficulty: 'hard',
    tags: ['EPS', 'dilution'],
    reference: 'ASC 260',
  },
  {
    id: 'far-exp-form-013',
    section: 'FAR',
    type: 'formula',
    topic: 'Cash Flows',
    blueprintArea: 'FAR-I',
    front: 'INDIRECT METHOD - Operating Cash Flows',
    back: 'Start with Net Income\n+ Depreciation/Amortization\n+ Losses (- Gains)\n- Increase in Current Assets (+ Decrease)\n+ Increase in Current Liabilities (- Decrease)\n= Cash from Operations',
    example: 'NI $100K + Dep $20K - Gain $5K - ↑A/R $10K + ↑A/P $8K = $113K',
    difficulty: 'medium',
    tags: ['cash flows', 'indirect'],
    reference: 'ASC 230',
  },
  {
    id: 'far-exp-form-014',
    section: 'FAR',
    type: 'formula',
    topic: 'Cash Flows',
    blueprintArea: 'FAR-I',
    front: 'CASH COLLECTED FROM CUSTOMERS',
    back: 'Sales Revenue + Beginning A/R - Ending A/R = Cash Collected\n\nOr: Sales - Increase in A/R (+ Decrease)',
    example: 'Sales $500K, Beg A/R $50K, End A/R $60K:\nCash = $500K + $50K - $60K = $490K',
    difficulty: 'medium',
    tags: ['cash flows', 'direct method'],
    reference: 'ASC 230',
  },
  {
    id: 'far-exp-form-015',
    section: 'FAR',
    type: 'formula',
    topic: 'Cash Flows',
    blueprintArea: 'FAR-I',
    front: 'CASH PAID TO SUPPLIERS',
    back: 'COGS + Ending Inventory - Beginning Inventory + Beginning A/P - Ending A/P = Cash Paid\n\nOr: COGS + ↑Inventory - ↑A/P',
    example: 'COGS $300K + ↑Inv $20K - ↑A/P $15K = $305K',
    difficulty: 'hard',
    tags: ['cash flows', 'direct method'],
    reference: 'ASC 230',
  },
  {
    id: 'far-exp-form-016',
    section: 'FAR',
    type: 'formula',
    topic: 'Deferred Taxes',
    blueprintArea: 'FAR-III',
    front: 'DEFERRED TAX ASSET/LIABILITY',
    back: 'Temporary Difference × Tax Rate = DTA or DTL\n\nDTA: Deductible temporary difference (book > tax deduction now)\nDTL: Taxable temporary difference (tax > book income now)',
    example: 'Warranty accrual $100K (book), $0 (tax), 21% rate:\nDTA = $100K × 21% = $21,000',
    difficulty: 'medium',
    tags: ['deferred taxes', 'temporary'],
    reference: 'ASC 740',
  },
  {
    id: 'far-exp-form-017',
    section: 'FAR',
    type: 'formula',
    topic: 'Pension',
    blueprintArea: 'FAR-III',
    front: 'PENSION EXPENSE components',
    back: 'Service Cost\n+ Interest Cost (PBO × Discount Rate)\n- Expected Return on Plan Assets\n+ Amortization of Prior Service Cost\n+/- Amortization of Gain/Loss\n= Net Periodic Pension Cost',
    difficulty: 'hard',
    tags: ['pension', 'expense'],
    reference: 'ASC 715',
  },
  {
    id: 'far-exp-form-018',
    section: 'FAR',
    type: 'formula',
    topic: 'Pension',
    blueprintArea: 'FAR-III',
    front: 'FUNDED STATUS of pension plan',
    back: 'Fair Value of Plan Assets - Projected Benefit Obligation (PBO) = Funded Status\n\nOverfunded = Asset on balance sheet\nUnderfunded = Liability on balance sheet',
    example: 'Plan Assets $800K, PBO $900K:\nFunded Status = -$100K (underfunded liability)',
    difficulty: 'medium',
    tags: ['pension', 'funded status'],
    reference: 'ASC 715',
  },
  {
    id: 'far-exp-form-019',
    section: 'FAR',
    type: 'formula',
    topic: 'Government',
    blueprintArea: 'FAR-IV',
    front: 'FUND BALANCE equation (governmental funds)',
    back: 'Assets + Deferred Outflows = Liabilities + Deferred Inflows + Fund Balance\n\nFund Balance = Assets - Liabilities (simplified)',
    difficulty: 'easy',
    tags: ['government', 'fund balance'],
    reference: 'GASB 34',
  },
  {
    id: 'far-exp-form-020',
    section: 'FAR',
    type: 'formula',
    topic: 'Consolidation',
    blueprintArea: 'FAR-III',
    front: 'GOODWILL calculation',
    back: 'Consideration Transferred\n+ NCI at Fair Value (full goodwill)\n+ Previously Held Equity Interest at FV\n- Net Identifiable Assets at Fair Value\n= Goodwill',
    example: 'Paid $1,000K for 80%, NCI FV $250K, Net Assets FV $1,100K:\nGoodwill = $1,000K + $250K - $1,100K = $150K',
    difficulty: 'hard',
    tags: ['consolidation', 'goodwill'],
    reference: 'ASC 805',
  },
];

// ==========================================
// BAR EXPANDED FORMULAS (40 cards)
// ==========================================
export const BAR_EXPANDED_FORMULAS: Flashcard[] = [
  {
    id: 'bar-exp-form-001',
    section: 'BAR',
    type: 'formula',
    topic: 'Liquidity Ratios',
    blueprintArea: 'BAR-I',
    front: 'CURRENT RATIO',
    back: 'Current Assets ÷ Current Liabilities\n\nMeasures short-term debt-paying ability\nHigher = more liquid\nBenchmark: 1.5-2.0 varies by industry',
    example: 'CA $500K, CL $250K:\nCurrent Ratio = 2.0',
    difficulty: 'easy',
    tags: ['ratios', 'liquidity'],
    reference: 'Financial Analysis',
  },
  {
    id: 'bar-exp-form-002',
    section: 'BAR',
    type: 'formula',
    topic: 'Liquidity Ratios',
    blueprintArea: 'BAR-I',
    front: 'QUICK RATIO (Acid Test)',
    back: '(Cash + Marketable Securities + A/R) ÷ Current Liabilities\n\nOr: (Current Assets - Inventory - Prepaids) ÷ Current Liabilities\n\nMore conservative than current ratio',
    example: 'CA $500K - Inv $150K - Prepaids $50K = $300K\n$300K ÷ $250K CL = 1.2',
    difficulty: 'easy',
    tags: ['ratios', 'liquidity'],
    reference: 'Financial Analysis',
  },
  {
    id: 'bar-exp-form-003',
    section: 'BAR',
    type: 'formula',
    topic: 'Liquidity Ratios',
    blueprintArea: 'BAR-I',
    front: 'CASH RATIO',
    back: '(Cash + Cash Equivalents) ÷ Current Liabilities\n\nMost conservative liquidity measure\nAbility to pay obligations with cash on hand',
    example: 'Cash $100K ÷ CL $250K = 0.4',
    difficulty: 'easy',
    tags: ['ratios', 'liquidity'],
    reference: 'Financial Analysis',
  },
  {
    id: 'bar-exp-form-004',
    section: 'BAR',
    type: 'formula',
    topic: 'Profitability Ratios',
    blueprintArea: 'BAR-I',
    front: 'GROSS PROFIT MARGIN',
    back: '(Revenue - COGS) ÷ Revenue × 100\n\nOr: Gross Profit ÷ Revenue\n\nMeasures production efficiency',
    example: 'Revenue $1M, COGS $600K:\nGP Margin = $400K ÷ $1M = 40%',
    difficulty: 'easy',
    tags: ['ratios', 'profitability'],
    reference: 'Financial Analysis',
  },
  {
    id: 'bar-exp-form-005',
    section: 'BAR',
    type: 'formula',
    topic: 'Profitability Ratios',
    blueprintArea: 'BAR-I',
    front: 'NET PROFIT MARGIN',
    back: 'Net Income ÷ Revenue × 100\n\nMeasures overall profitability\n"Bottom line" percentage',
    example: 'NI $80K, Revenue $1M:\nNet Margin = 8%',
    difficulty: 'easy',
    tags: ['ratios', 'profitability'],
    reference: 'Financial Analysis',
  },
  {
    id: 'bar-exp-form-006',
    section: 'BAR',
    type: 'formula',
    topic: 'Profitability Ratios',
    blueprintArea: 'BAR-I',
    front: 'RETURN ON ASSETS (ROA)',
    back: 'Net Income ÷ Average Total Assets\n\nMeasures efficiency of asset utilization\nHow well assets generate profit',
    example: 'NI $80K, Avg Assets $800K:\nROA = 10%',
    difficulty: 'easy',
    tags: ['ratios', 'profitability'],
    reference: 'Financial Analysis',
  },
  {
    id: 'bar-exp-form-007',
    section: 'BAR',
    type: 'formula',
    topic: 'Profitability Ratios',
    blueprintArea: 'BAR-I',
    front: 'RETURN ON EQUITY (ROE)',
    back: 'Net Income ÷ Average Stockholders\' Equity\n\nMeasures return to shareholders\nKey metric for investors',
    example: 'NI $80K, Avg Equity $400K:\nROE = 20%',
    difficulty: 'easy',
    tags: ['ratios', 'profitability'],
    reference: 'Financial Analysis',
  },
  {
    id: 'bar-exp-form-008',
    section: 'BAR',
    type: 'formula',
    topic: 'DuPont Analysis',
    blueprintArea: 'BAR-I',
    front: 'DUPONT FORMULA (3-part)',
    back: 'ROE = Profit Margin × Asset Turnover × Equity Multiplier\n\n= (NI/Sales) × (Sales/Assets) × (Assets/Equity)\n\nBreaks ROE into profitability, efficiency, leverage',
    example: 'PM 8% × AT 1.25 × EM 2.0 = ROE 20%',
    difficulty: 'medium',
    tags: ['ratios', 'DuPont'],
    reference: 'Financial Analysis',
  },
  {
    id: 'bar-exp-form-009',
    section: 'BAR',
    type: 'formula',
    topic: 'Leverage Ratios',
    blueprintArea: 'BAR-I',
    front: 'DEBT-TO-EQUITY ratio',
    back: 'Total Debt ÷ Total Equity\n\nMeasures financial leverage\nHigher = more debt-financed = higher risk',
    example: 'Debt $300K, Equity $200K:\nD/E = 1.5 or 150%',
    difficulty: 'easy',
    tags: ['ratios', 'leverage'],
    reference: 'Financial Analysis',
  },
  {
    id: 'bar-exp-form-010',
    section: 'BAR',
    type: 'formula',
    topic: 'Leverage Ratios',
    blueprintArea: 'BAR-I',
    front: 'DEBT-TO-ASSETS ratio',
    back: 'Total Debt ÷ Total Assets\n\nPercentage of assets financed by debt\nDebt Ratio = 1 - Equity Ratio',
    example: 'Debt $300K, Assets $500K:\nD/A = 60%',
    difficulty: 'easy',
    tags: ['ratios', 'leverage'],
    reference: 'Financial Analysis',
  },
  {
    id: 'bar-exp-form-011',
    section: 'BAR',
    type: 'formula',
    topic: 'Leverage Ratios',
    blueprintArea: 'BAR-I',
    front: 'TIMES INTEREST EARNED (TIE)',
    back: 'EBIT ÷ Interest Expense\n\nOr: (NI + Interest + Taxes) ÷ Interest\n\nAbility to cover interest payments\nHigher = better coverage',
    example: 'EBIT $200K, Interest $40K:\nTIE = 5.0 times',
    difficulty: 'easy',
    tags: ['ratios', 'coverage'],
    reference: 'Financial Analysis',
  },
  {
    id: 'bar-exp-form-012',
    section: 'BAR',
    type: 'formula',
    topic: 'CVP Analysis',
    blueprintArea: 'BAR-I',
    front: 'CONTRIBUTION MARGIN',
    back: 'Sales - Variable Costs = Contribution Margin\n\nCM per Unit = Price - Variable Cost per Unit\nCM Ratio = CM ÷ Sales',
    example: 'Price $100, VC $60:\nCM per unit = $40\nCM Ratio = 40%',
    difficulty: 'easy',
    tags: ['cost', 'CVP'],
    reference: 'Managerial Accounting',
  },
  {
    id: 'bar-exp-form-013',
    section: 'BAR',
    type: 'formula',
    topic: 'CVP Analysis',
    blueprintArea: 'BAR-I',
    front: 'BREAKEVEN POINT',
    back: 'BEP (units) = Fixed Costs ÷ CM per Unit\n\nBEP (dollars) = Fixed Costs ÷ CM Ratio\n\nPoint where Revenue = Total Costs',
    example: 'FC $100K, CM $25/unit:\nBEP = 4,000 units\nOr: $100K ÷ 0.40 = $250K sales',
    difficulty: 'easy',
    tags: ['cost', 'breakeven'],
    reference: 'Managerial Accounting',
  },
  {
    id: 'bar-exp-form-014',
    section: 'BAR',
    type: 'formula',
    topic: 'CVP Analysis',
    blueprintArea: 'BAR-I',
    front: 'TARGET PROFIT formula',
    back: 'Units for Target Profit = (Fixed Costs + Target Profit) ÷ CM per Unit\n\nDollars for Target Profit = (FC + Target) ÷ CM Ratio',
    example: 'FC $100K, Target Profit $50K, CM $25:\nUnits = ($100K + $50K) ÷ $25 = 6,000 units',
    difficulty: 'medium',
    tags: ['cost', 'target profit'],
    reference: 'Managerial Accounting',
  },
  {
    id: 'bar-exp-form-015',
    section: 'BAR',
    type: 'formula',
    topic: 'CVP Analysis',
    blueprintArea: 'BAR-I',
    front: 'MARGIN OF SAFETY',
    back: 'Actual Sales - Breakeven Sales = Margin of Safety\n\nMOS Ratio = MOS ÷ Actual Sales × 100\n\nCushion above breakeven',
    example: 'Sales $400K, BEP $250K:\nMOS = $150K\nMOS Ratio = 37.5%',
    difficulty: 'easy',
    tags: ['cost', 'margin of safety'],
    reference: 'Managerial Accounting',
  },
  {
    id: 'bar-exp-form-016',
    section: 'BAR',
    type: 'formula',
    topic: 'Capital Budgeting',
    blueprintArea: 'BAR-I',
    front: 'NET PRESENT VALUE (NPV)',
    back: 'NPV = Σ(Cash Flows ÷ (1+r)^t) - Initial Investment\n\nOr: PV of Inflows - PV of Outflows\n\nNPV > 0 → Accept project',
    example: 'Invest $100K, receive $40K/yr for 4 years, 10%:\nPV = $40K × 3.1699 = $126,796\nNPV = $126,796 - $100K = $26,796',
    difficulty: 'medium',
    tags: ['capital budgeting', 'NPV'],
    reference: 'Finance',
  },
  {
    id: 'bar-exp-form-017',
    section: 'BAR',
    type: 'formula',
    topic: 'Capital Budgeting',
    blueprintArea: 'BAR-I',
    front: 'PAYBACK PERIOD',
    back: 'Time to recover initial investment from cash flows\n\nSimple: Initial Investment ÷ Annual Cash Flow\n\nUneven: Cumulate until investment recovered',
    example: 'Invest $100K, annual CF $25K:\nPayback = $100K ÷ $25K = 4 years',
    difficulty: 'easy',
    tags: ['capital budgeting', 'payback'],
    reference: 'Finance',
  },
  {
    id: 'bar-exp-form-018',
    section: 'BAR',
    type: 'formula',
    topic: 'Capital Budgeting',
    blueprintArea: 'BAR-I',
    front: 'PROFITABILITY INDEX (PI)',
    back: 'PV of Future Cash Flows ÷ Initial Investment\n\nOr: (NPV + Initial Investment) ÷ Initial Investment\n\nPI > 1 → Accept\nUseful for capital rationing',
    example: 'PV $126,796, Invest $100K:\nPI = 1.27',
    difficulty: 'medium',
    tags: ['capital budgeting', 'PI'],
    reference: 'Finance',
  },
  {
    id: 'bar-exp-form-019',
    section: 'BAR',
    type: 'formula',
    topic: 'Variance Analysis',
    blueprintArea: 'BAR-I',
    front: 'MATERIAL PRICE VARIANCE',
    back: '(Actual Price - Standard Price) × Actual Quantity Purchased\n\nFavorable: AP < SP\nUnfavorable: AP > SP',
    example: 'AP $5.20, SP $5.00, AQ 10,000:\nMPV = ($5.20 - $5.00) × 10,000 = $2,000 U',
    difficulty: 'medium',
    tags: ['variance', 'materials'],
    reference: 'Managerial Accounting',
  },
  {
    id: 'bar-exp-form-020',
    section: 'BAR',
    type: 'formula',
    topic: 'Variance Analysis',
    blueprintArea: 'BAR-I',
    front: 'MATERIAL QUANTITY VARIANCE',
    back: '(Actual Quantity Used - Standard Quantity Allowed) × Standard Price\n\nSQ Allowed = Std Qty per unit × Actual Output',
    example: 'AQ 10,500, SQ 10,000, SP $5.00:\nMQV = (10,500 - 10,000) × $5 = $2,500 U',
    difficulty: 'medium',
    tags: ['variance', 'materials'],
    reference: 'Managerial Accounting',
  },
];

// ==========================================
// REG/TCP EXPANDED FORMULAS (30 cards)
// ==========================================
export const TAX_EXPANDED_FORMULAS: Flashcard[] = [
  {
    id: 'reg-exp-form-001',
    section: 'REG',
    type: 'formula',
    topic: 'Individual Tax',
    blueprintArea: 'REG-III',
    front: 'TAXABLE INCOME formula (Individual)',
    back: 'Gross Income\n- Adjustments (above-the-line)\n= Adjusted Gross Income (AGI)\n- Standard or Itemized Deductions\n- QBI Deduction (if applicable)\n= Taxable Income',
    difficulty: 'easy',
    tags: ['individual', 'taxable income'],
    reference: 'IRC §63',
  },
  {
    id: 'reg-exp-form-002',
    section: 'REG',
    type: 'formula',
    topic: 'Individual Tax',
    blueprintArea: 'REG-III',
    front: 'TAX LIABILITY formula',
    back: 'Tax on Taxable Income (from tax tables/rates)\n+ Other Taxes (SE tax, AMT, NIIT)\n- Credits (nonrefundable first)\n= Tax Liability\n- Withholding and Estimated Payments\n= Tax Due or Refund',
    difficulty: 'medium',
    tags: ['individual', 'tax liability'],
    reference: 'Form 1040',
  },
  {
    id: 'reg-exp-form-003',
    section: 'REG',
    type: 'formula',
    topic: 'Self-Employment Tax',
    blueprintArea: 'REG-III',
    front: 'SELF-EMPLOYMENT TAX calculation',
    back: 'SE Income × 92.35% = SE Tax Base\n\nSE Tax = Base × 15.3% (up to SS wage base)\n+ 2.9% on amounts over SS wage base\n\n50% of SE Tax is above-the-line deduction',
    example: 'SE Income $100K:\nBase = $92,350\nSE Tax = $92,350 × 15.3% = $14,130\nDeduction = $7,065',
    difficulty: 'medium',
    tags: ['self-employment', 'FICA'],
    reference: 'IRC §1401',
  },
  {
    id: 'reg-exp-form-004',
    section: 'REG',
    type: 'formula',
    topic: 'Property Transactions',
    blueprintArea: 'REG-II',
    front: 'REALIZED GAIN/LOSS',
    back: 'Amount Realized - Adjusted Basis = Realized Gain/Loss\n\nAmount Realized = Cash + FMV of property received + Liabilities assumed by buyer\n\nAdjusted Basis = Cost + Improvements - Depreciation',
    example: 'Sell building: Cash $400K + Mortgage assumed $100K = $500K realized\nAdj Basis $350K\nGain = $150K',
    difficulty: 'easy',
    tags: ['property', 'gain/loss'],
    reference: 'IRC §1001',
  },
  {
    id: 'reg-exp-form-005',
    section: 'REG',
    type: 'formula',
    topic: 'Property Transactions',
    blueprintArea: 'REG-II',
    front: 'DEPRECIATION RECAPTURE (§1245)',
    back: 'Gain recognized as ORDINARY INCOME to lesser of:\n1) Gain realized, or\n2) Depreciation taken\n\nRemainder is §1231 gain (capital)',
    example: 'Equipment: Gain $50K, Depreciation $35K\nOrdinary income = $35K\n§1231 gain = $15K',
    difficulty: 'medium',
    tags: ['depreciation', 'recapture'],
    reference: 'IRC §1245',
  },
  {
    id: 'reg-exp-form-006',
    section: 'REG',
    type: 'formula',
    topic: 'Like-Kind Exchange',
    blueprintArea: 'REG-II',
    front: 'BOOT in §1031 Exchange',
    back: 'Boot Received = Cash + FMV non-like-kind property + Net debt relief\n\nGain Recognized = Lesser of:\n1) Realized Gain, or\n2) Boot Received',
    example: 'Realized gain $100K, Boot $30K:\nRecognized gain = $30K\nDeferred gain = $70K',
    difficulty: 'medium',
    tags: ['like-kind', 'boot'],
    reference: 'IRC §1031',
  },
  {
    id: 'reg-exp-form-007',
    section: 'REG',
    type: 'formula',
    topic: 'Like-Kind Exchange',
    blueprintArea: 'REG-II',
    front: 'BASIS of property received in §1031',
    back: 'FMV of Property Received\n- Deferred Gain (+ Deferred Loss)\n= Basis of New Property\n\nOr: Adjusted Basis of Old + Boot Paid + Gain Recognized - Boot Received',
    example: 'New property FMV $500K, Deferred gain $70K:\nNew Basis = $500K - $70K = $430K',
    difficulty: 'hard',
    tags: ['like-kind', 'basis'],
    reference: 'IRC §1031',
  },
  {
    id: 'reg-exp-form-008',
    section: 'REG',
    type: 'formula',
    topic: 'Partnership',
    blueprintArea: 'REG-IV',
    front: 'PARTNERSHIP OUTSIDE BASIS',
    back: 'Initial contribution basis\n+ Share of partnership income\n+ Share of partnership liabilities\n+ Additional contributions\n- Share of partnership losses\n- Distributions received\n- Share of liability decreases\n= Outside Basis',
    difficulty: 'medium',
    tags: ['partnership', 'basis'],
    reference: 'IRC §705',
  },
  {
    id: 'reg-exp-form-009',
    section: 'REG',
    type: 'formula',
    topic: 'S Corporation',
    blueprintArea: 'REG-IV',
    front: 'S CORP SHAREHOLDER BASIS',
    back: 'Initial stock basis\n+ Share of income (including tax-exempt)\n+ Additional contributions\n- Distributions\n- Share of losses and deductions\n- Share of nondeductible expenses\n= Stock Basis (min $0)',
    difficulty: 'medium',
    tags: ['S corp', 'basis'],
    reference: 'IRC §1367',
  },
  {
    id: 'reg-exp-form-010',
    section: 'REG',
    type: 'formula',
    topic: 'Corporation',
    blueprintArea: 'REG-IV',
    front: 'ACCUMULATED EARNINGS TAX base',
    back: 'Taxable Income\n+ DRD (Dividends Received Deduction)\n- Federal Income Tax\n- Charitable contributions over 10% limit\n- Dividends Paid\n- Accumulated Earnings Credit ($250K or $150K PSC)\n= AET Base × 20% = AET',
    difficulty: 'hard',
    tags: ['corporation', 'AET'],
    reference: 'IRC §531',
  },
  {
    id: 'tcp-exp-form-001',
    section: 'TCP',
    type: 'formula',
    topic: 'QBI Deduction',
    blueprintArea: 'TCP-I',
    front: 'QBI DEDUCTION (§199A)',
    back: 'Lesser of:\n1) 20% of QBI from each qualified trade/business, OR\n2) 20% of (Taxable Income - Net Capital Gains)\n\nSubject to W-2 wage and property limitations at higher incomes',
    example: 'QBI $200K, TI $300K:\n20% × $200K = $40K QBI deduction\nCheck against 20% × $300K = $60K limit',
    difficulty: 'hard',
    tags: ['QBI', '199A'],
    reference: 'IRC §199A',
  },
  {
    id: 'tcp-exp-form-002',
    section: 'TCP',
    type: 'formula',
    topic: 'Gift Tax',
    blueprintArea: 'TCP-I',
    front: 'GIFT TAX calculation',
    back: 'FMV of Gift\n- Annual Exclusion ($18,000/2024)\n- Marital Deduction (unlimited to citizen spouse)\n- Charitable Deduction\n= Taxable Gifts\n× Tax Rate (40% max)\n- Unified Credit\n= Gift Tax Due',
    difficulty: 'medium',
    tags: ['estate', 'gift tax'],
    reference: 'IRC §2503',
  },
  {
    id: 'tcp-exp-form-003',
    section: 'TCP',
    type: 'formula',
    topic: 'Estate Tax',
    blueprintArea: 'TCP-I',
    front: 'GROSS ESTATE calculation',
    back: 'Property owned at death (FMV)\n+ Life insurance (if incidents of ownership)\n+ Jointly held property\n+ Transfers with retained interests\n+ Powers of appointment\n+ Annuities\n= Gross Estate',
    difficulty: 'medium',
    tags: ['estate', 'gross estate'],
    reference: 'IRC §2031',
  },
  {
    id: 'tcp-exp-form-004',
    section: 'TCP',
    type: 'formula',
    topic: 'Installment Sale',
    blueprintArea: 'TCP-III',
    front: 'INSTALLMENT SALE reporting',
    back: 'Gross Profit % = Gross Profit ÷ Contract Price\n\nEach Payment × Gross Profit % = Gain Recognized\n\nContract Price = Selling Price - Assumed Mortgage (if > basis)',
    example: 'Sell for $200K, basis $140K, 20% down:\nGP% = $60K ÷ $200K = 30%\nYear 1: $40K × 30% = $12K gain',
    difficulty: 'medium',
    tags: ['installment', 'property'],
    reference: 'IRC §453',
  },
  {
    id: 'tcp-exp-form-005',
    section: 'TCP',
    type: 'formula',
    topic: 'Passive Activity',
    blueprintArea: 'TCP-I',
    front: 'PASSIVE ACTIVITY LOSS limitation',
    back: 'Passive Income - Passive Losses = Net Passive Income/Loss\n\nNet Passive Loss: Suspended (cannot offset active/portfolio income)\nException: $25K rental real estate allowance (phases out $100K-$150K AGI)',
    difficulty: 'medium',
    tags: ['passive', 'loss limitation'],
    reference: 'IRC §469',
  },
];

// ==========================================
// AUD/ISC EXPANDED FORMULAS (20 cards)
// ==========================================
export const AUDIT_ISC_FORMULAS: Flashcard[] = [
  {
    id: 'aud-exp-form-001',
    section: 'AUD',
    type: 'formula',
    topic: 'Audit Risk',
    blueprintArea: 'AUD-II',
    front: 'AUDIT RISK MODEL',
    back: 'AR = IR × CR × DR\n\nAudit Risk = Inherent Risk × Control Risk × Detection Risk\n\nSolving for DR:\nDR = AR ÷ (IR × CR)',
    example: 'Target AR 5%, IR 80%, CR 50%:\nDR = 0.05 ÷ (0.80 × 0.50) = 12.5%',
    difficulty: 'easy',
    tags: ['risk', 'audit risk'],
    reference: 'AU-C 200',
  },
  {
    id: 'aud-exp-form-002',
    section: 'AUD',
    type: 'formula',
    topic: 'Sampling',
    blueprintArea: 'AUD-III',
    front: 'SAMPLE SIZE factors',
    back: 'Sample Size increases when:\n• Tolerable misstatement ↓\n• Expected misstatement ↑\n• Desired confidence ↑\n• Population size ↑ (minimal effect)\n• Population variability ↑',
    difficulty: 'medium',
    tags: ['sampling', 'size'],
    reference: 'AU-C 530',
  },
  {
    id: 'aud-exp-form-003',
    section: 'AUD',
    type: 'formula',
    topic: 'Sampling',
    blueprintArea: 'AUD-III',
    front: 'PROJECTED MISSTATEMENT',
    back: 'Sample Misstatement ÷ Sample Size × Population Size\n\nOr: (Misstatement Rate in Sample) × Population Value\n\nCompare to Tolerable Misstatement',
    example: 'Found $5K errors in $100K sample from $1M population:\nProjected = $5K ÷ $100K × $1M = $50K',
    difficulty: 'medium',
    tags: ['sampling', 'projection'],
    reference: 'AU-C 530',
  },
  {
    id: 'aud-exp-form-004',
    section: 'AUD',
    type: 'formula',
    topic: 'Materiality',
    blueprintArea: 'AUD-II',
    front: 'MATERIALITY benchmarks',
    back: 'Common starting points:\n• 5% of Pre-tax Income\n• 0.5-1% of Revenue\n• 0.5-1% of Total Assets\n• 1-2% of Equity\n\nPerformance Materiality: 50-75% of Overall',
    example: 'Pre-tax Income $2M:\nMateriality = $2M × 5% = $100K\nPerformance = $100K × 60% = $60K',
    difficulty: 'easy',
    tags: ['materiality', 'benchmarks'],
    reference: 'AU-C 320',
  },
  {
    id: 'isc-exp-form-001',
    section: 'ISC',
    type: 'formula',
    topic: 'IT Metrics',
    blueprintArea: 'ISC-I',
    front: 'SYSTEM AVAILABILITY calculation',
    back: 'Availability % = (Total Time - Downtime) ÷ Total Time × 100\n\nOr: MTBF ÷ (MTBF + MTTR) × 100\n\nMTBF = Mean Time Between Failures\nMTTR = Mean Time To Repair',
    example: 'Month: 720 hours, 3.6 hours downtime:\nAvailability = (720-3.6) ÷ 720 = 99.5%',
    difficulty: 'medium',
    tags: ['availability', 'metrics'],
    reference: 'IT Operations',
  },
  {
    id: 'isc-exp-form-002',
    section: 'ISC',
    type: 'formula',
    topic: 'Business Continuity',
    blueprintArea: 'ISC-I',
    front: 'RTO and RPO definitions',
    back: 'RTO (Recovery Time Objective):\nMaximum acceptable time to restore system after failure\n\nRPO (Recovery Point Objective):\nMaximum acceptable data loss (time between backups)',
    example: 'RTO 4 hours = must be back up within 4 hours\nRPO 1 hour = can lose at most 1 hour of data',
    difficulty: 'medium',
    tags: ['BCP', 'recovery'],
    reference: 'Business Continuity',
  },
];

// Combined export
export const ALL_EXPANDED_FORMULAS: Flashcard[] = [
  ...FAR_EXPANDED_FORMULAS,
  ...BAR_EXPANDED_FORMULAS,
  ...TAX_EXPANDED_FORMULAS,
  ...AUDIT_ISC_FORMULAS,
];

export default ALL_EXPANDED_FORMULAS;
