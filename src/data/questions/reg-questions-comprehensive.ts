// REG - Regulation Comprehensive Questions
// 2026 CPA Exam Blueprint Compliant
// World-Class expansion - Final batch

import { Question } from '../../types';

export const REG_QUESTIONS_COMPREHENSIVE: Question[] = [
  {
    id: 'reg-comp-001',
    section: 'REG',
    topicId: 'reg-ethics',
    topic: 'Professional Ethics',
    subtopic: 'Tax Return Positions',
    difficulty: 'hard',
    blueprintArea: 'REG-I',
    skillLevel: 'Analysis',
    question: 'Under Circular 230, a practitioner may not sign a tax return containing a position that:',
    options: [
      'Is conservative',
      'Is supported by substantial authority',
      'Does not have a reasonable basis or is frivolous',
      'Has been disclosed'
    ],
    correctAnswer: 2,
    explanation: 'Circular 230 prohibits signing returns with positions lacking reasonable basis or that are frivolous. Tax shelters require reasonable belief of "more likely than not" success. Penalties under §6694 also apply.',
    reference: 'Circular 230 §10.34',
  },
  {
    id: 'reg-comp-002',
    section: 'REG',
    topicId: 'reg-contracts',
    topic: 'Contract Law',
    subtopic: 'Promissory Estoppel',
    difficulty: 'hard',
    blueprintArea: 'REG-II',
    skillLevel: 'Analysis',
    question: 'Promissory estoppel may substitute for consideration when:',
    options: [
      'A promise induces reasonable and foreseeable reliance causing detriment, and injustice can only be avoided by enforcement',
      'Any promise is made',
      'The contract is written',
      'Both parties are merchants'
    ],
    correctAnswer: 0,
    explanation: 'Promissory estoppel elements: (1) clear promise, (2) promisor expects reliance, (3) promisee reasonably relies, (4) detriment results, (5) enforcement needed to prevent injustice. Substitute for consideration.',
    reference: 'Contract Law - Promissory Estoppel',
  },
  {
    id: 'reg-comp-003',
    section: 'REG',
    topicId: 'reg-ucc',
    topic: 'UCC Article 2',
    subtopic: 'Perfect Tender',
    difficulty: 'hard',
    blueprintArea: 'REG-II',
    skillLevel: 'Analysis',
    question: 'Under the UCC perfect tender rule, a buyer may reject goods if:',
    options: [
      'The goods or tender fail in any respect to conform to the contract',
      'Only for material breaches',
      'The price changes',
      'Quality is merely different'
    ],
    correctAnswer: 0,
    explanation: 'Perfect tender: buyer can reject if goods/tender fail in ANY respect to conform. Exceptions: installment contracts (substantial impairment test), seller\'s right to cure if time remains, usage of trade.',
    reference: 'UCC §2-601',
  },
  {
    id: 'reg-comp-004',
    section: 'REG',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Dependency Exemption',
    difficulty: 'medium',
    blueprintArea: 'REG-III',
    skillLevel: 'Application',
    question: 'A qualifying child must meet all of the following tests EXCEPT:',
    options: [
      'Gross income test',
      'Age test (under 19, or 24 if student)',
      'Relationship test',
      'Residency test (same principal abode)'
    ],
    correctAnswer: 0,
    explanation: 'Qualifying child tests: relationship, age (<19, <24 student, any age if disabled), residency (>½ year), support (child doesn\'t provide >½). No gross income test for qualifying child (applies to qualifying relative).',
    reference: 'IRC §152(c)',
  },
  {
    id: 'reg-comp-005',
    section: 'REG',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Education Credits',
    difficulty: 'hard',
    blueprintArea: 'REG-III',
    skillLevel: 'Analysis',
    question: 'The American Opportunity Tax Credit differs from the Lifetime Learning Credit by:',
    options: [
      'Having no income limits',
      'Covering any education',
      'Being partially refundable (40%), limited to first 4 years, and per-student basis',
      'Being available indefinitely'
    ],
    correctAnswer: 2,
    explanation: 'AOTC: up to $2,500, 40% refundable, first 4 years undergrad, per student, half-time enrollment. LLC: 20% of $10,000, non-refundable, any post-secondary, per return, any enrollment status.',
    reference: 'IRC §25A',
  },
  {
    id: 'reg-comp-006',
    section: 'REG',
    topicId: 'reg-basis',
    topic: 'Property Basis',
    subtopic: 'Boot in Corporate Formation',
    difficulty: 'hard',
    blueprintArea: 'REG-IV',
    skillLevel: 'Analysis',
    question: 'In a §351 exchange, a shareholder receiving boot recognizes gain equal to:',
    options: [
      'Lesser of boot received or realized gain',
      'All realized gain',
      'Boot received only',
      'No gain'
    ],
    correctAnswer: 0,
    explanation: '§351 with boot: recognize gain = lesser of (1) FMV of boot received, (2) realized gain. Character depends on property contributed. Loss is NOT recognized. Stock basis = property basis - boot + gain recognized.',
    reference: 'IRC §351(b)',
  },
  {
    id: 'reg-comp-007',
    section: 'REG',
    topicId: 'reg-corporate',
    topic: 'Corporate Taxation',
    subtopic: 'Section 382 Limitation',
    difficulty: 'hard',
    blueprintArea: 'REG-V',
    skillLevel: 'Analysis',
    question: 'Section 382 limits the use of NOL carryforwards when:',
    options: [
      'Any stock sale occurs',
      'The corporation has any loss',
      'There is a greater than 50% ownership change within a 3-year period',
      'Dividends are paid'
    ],
    correctAnswer: 2,
    explanation: '§382 limitation: if >50% ownership change in 3-year testing period, annual NOL use limited to FMV of loss corporation × long-term tax-exempt rate. Prevents trafficking in losses through acquisitions.',
    reference: 'IRC §382',
  },
  {
    id: 'reg-comp-008',
    section: 'REG',
    topicId: 'reg-scorp',
    topic: 'S Corporation',
    subtopic: 'ESBT',
    difficulty: 'hard',
    blueprintArea: 'REG-V',
    skillLevel: 'Analysis',
    question: 'An Electing Small Business Trust (ESBT) as an S corporation shareholder:',
    options: [
      'Is taxed at the highest individual rate on its S corp income portion',
      'Cannot hold S corp stock',
      'Passes through income to beneficiaries',
      'Pays no tax'
    ],
    correctAnswer: 0,
    explanation: 'ESBT: eligible S corp shareholder. S portion taxed at trust level at highest individual rate (37%). Potential beneficiaries (not trust) count toward 100-shareholder limit. QSST is alternative (income distributed annually).',
    reference: 'IRC §1361(e)',
  },
  {
    id: 'reg-comp-009',
    section: 'REG',
    topicId: 'reg-partnership',
    topic: 'Partnership Taxation',
    subtopic: 'Mixing Bowl Transactions',
    difficulty: 'hard',
    blueprintArea: 'REG-V',
    skillLevel: 'Evaluation',
    question: 'Section 704(c)(1)(B) requires gain recognition when:',
    options: [
      'Contributed property is distributed to a different partner within 7 years',
      'Any distribution occurs',
      'Partnership sells property',
      'Partner withdraws'
    ],
    correctAnswer: 0,
    explanation: '§704(c)(1)(B): if contributed property distributed to different partner within 7 years, contributing partner recognizes built-in gain/loss. Prevents shifting pre-contribution gain. Related rule: §737 (reverse mixing bowl).',
    reference: 'IRC §704(c)(1)(B)',
  },
  {
    id: 'reg-comp-010',
    section: 'REG',
    topicId: 'reg-procedures',
    topic: 'Tax Procedures',
    subtopic: 'Innocent Spouse Relief',
    difficulty: 'hard',
    blueprintArea: 'REG-I',
    skillLevel: 'Analysis',
    question: 'Innocent spouse relief under §6015(b) requires:',
    options: [
      'Any joint return',
      'Understatement from erroneous item of the other spouse, no knowledge, and inequity to hold liable',
      'Divorce only',
      'IRS error',
    ],
    correctAnswer: 1,
    explanation: 'Innocent spouse: (1) joint return, (2) understatement from other spouse\'s erroneous item, (3) signing spouse didn\'t know/have reason to know, (4) inequitable to hold liable considering all facts. Alternative: separation of liability, equitable relief.',
    reference: 'IRC §6015',
  },
  {
    id: 'reg-comp-011',
    section: 'REG',
    topicId: 'reg-agency',
    topic: 'Agency Law',
    subtopic: 'Termination',
    difficulty: 'medium',
    blueprintArea: 'REG-II',
    skillLevel: 'Application',
    question: 'An agency relationship terminates by operation of law upon:',
    options: [
      'Principal\'s request only',
      'Minor disagreement',
      'Agent\'s vacation',
      'Death, incapacity, bankruptcy of principal, or impossibility of performance'
    ],
    correctAnswer: 3,
    explanation: 'Termination by law: death/incapacity of principal or agent, bankruptcy (if relevant), impossibility, illegality, destruction of subject matter. By act: mutual agreement, accomplishment, expiration, revocation/renunciation.',
    reference: 'Agency Law - Termination',
  },
  {
    id: 'reg-comp-012',
    section: 'REG',
    topicId: 'reg-bankruptcy',
    topic: 'Bankruptcy',
    subtopic: 'Automatic Stay',
    difficulty: 'hard',
    blueprintArea: 'REG-II',
    skillLevel: 'Analysis',
    question: 'The automatic stay in bankruptcy:',
    options: [
      'Affects only secured creditors',
      'Requires court approval',
      'Never applies to tax claims',
      'Immediately stops most collection actions, lawsuits, and foreclosures upon filing'
    ],
    correctAnswer: 3,
    explanation: 'Automatic stay: immediate upon filing, stops creditor actions (collection, lawsuits, garnishment, foreclosure). Exceptions: criminal proceedings, certain family support, tax audits. Relief for cause or lack of adequate protection.',
    reference: 'Bankruptcy Code §362',
  },
  {
    id: 'reg-comp-013',
    section: 'REG',
    topicId: 'reg-secured',
    topic: 'Secured Transactions',
    subtopic: 'PMSI Priority',
    difficulty: 'hard',
    blueprintArea: 'REG-II',
    skillLevel: 'Analysis',
    question: 'A purchase money security interest (PMSI) in inventory has super-priority if:',
    options: [
      'Filed first',
      'Perfected and creditor notifies prior secured parties before debtor receives inventory',
      'Only for consumer goods',
      'No special requirements',
    ],
    correctAnswer: 1,
    explanation: 'Inventory PMSI super-priority: (1) perfected when debtor receives possession, (2) notify prior inventory secured parties (authenticated notice) before debtor receives inventory. Non-inventory PMSI: perfect within 20 days.',
    reference: 'UCC §9-324',
  },
  {
    id: 'reg-comp-014',
    section: 'REG',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Gambling Income',
    difficulty: 'medium',
    blueprintArea: 'REG-III',
    skillLevel: 'Application',
    question: 'Gambling losses are deductible:',
    options: [
      'In full',
      'Only to the extent of gambling winnings (as itemized deduction for non-professionals)',
      'As above-the-line deduction',
      'Never',
    ],
    correctAnswer: 1,
    explanation: 'Gambling losses deductible only to extent of winnings. Non-professionals: itemized deduction (misc not subject to 2% floor). Professionals: Schedule C, subject to SE tax on net. All winnings includible.',
    reference: 'IRC §165(d)',
  },
  {
    id: 'reg-comp-015',
    section: 'REG',
    topicId: 'reg-corporate',
    topic: 'Corporate Taxation',
    subtopic: 'Section 1244 Stock',
    difficulty: 'hard',
    blueprintArea: 'REG-V',
    skillLevel: 'Analysis',
    question: 'Loss on Section 1244 small business stock is treated as:',
    options: [
      'Capital loss only',
      'Carryforward only',
      'Not deductible',
      'Ordinary loss up to $50,000 ($100,000 MFJ) per year'
    ],
    correctAnswer: 3,
    explanation: '§1244: ordinary loss treatment up to $50K single/$100K MFJ annually. Requirements: domestic corp, ≤$1M total capital at issuance, issued for money/property (not stock/services), >50% active business income.',
    reference: 'IRC §1244',
  },
  {
    id: 'reg-comp-016',
    section: 'REG',
    topicId: 'reg-property',
    topic: 'Property Transactions',
    subtopic: 'Involuntary Conversions',
    difficulty: 'hard',
    blueprintArea: 'REG-IV',
    skillLevel: 'Analysis',
    question: 'Under §1033, gain from an involuntary conversion is deferred if:',
    options: [
      'Proceeds are reinvested in similar-use property within the replacement period',
      'Taxpayer reinvests any amount',
      'Loss occurs',
      'Insurance is received'
    ],
    correctAnswer: 0,
    explanation: '§1033: defer gain if reinvest in similar use (functionally similar - condemned RE only needs like-kind). Period: 2 years (3 years condemned RE, 4 years livestock). Basis = cost - deferred gain. Elect deferral on return.',
    reference: 'IRC §1033',
  },
  {
    id: 'reg-comp-017',
    section: 'REG',
    topicId: 'reg-employment',
    topic: 'Employment Tax',
    subtopic: 'Independent Contractor',
    difficulty: 'hard',
    blueprintArea: 'REG-III',
    skillLevel: 'Analysis',
    question: 'The IRS uses what test to determine worker classification:',
    options: [
      'Common law factors examining behavioral control, financial control, and relationship type',
      'Only written contract',
      'Worker\'s preference',
      'Amount of pay only'
    ],
    correctAnswer: 0,
    explanation: 'IRS common law test: (1) behavioral control (instructions, training), (2) financial control (investment, profit/loss opportunity, payment method), (3) relationship type (benefits, permanency, written contract). No single factor determinative.',
    reference: 'Rev. Rul. 87-41',
  },
  {
    id: 'reg-comp-018',
    section: 'REG',
    topicId: 'reg-procedures',
    topic: 'Tax Procedures',
    subtopic: 'Accuracy Penalties',
    difficulty: 'hard',
    blueprintArea: 'REG-I',
    skillLevel: 'Analysis',
    question: 'The 20% accuracy-related penalty under §6662 applies when:',
    options: [
      'Any error occurs',
      'Refund is claimed',
      'Return is late',
      'There is negligence, substantial understatement, or substantial valuation misstatement'
    ],
    correctAnswer: 3,
    explanation: '§6662 penalty (20%): negligence/disregard, substantial understatement (>$5,000 and >10%), substantial valuation misstatement, transaction lacking economic substance. Defenses: reasonable cause/good faith, adequate disclosure.',
    reference: 'IRC §6662',
  },
  {
    id: 'reg-comp-019',
    section: 'REG',
    topicId: 'reg-ethics',
    topic: 'Professional Ethics',
    subtopic: 'Tax Preparer Penalties',
    difficulty: 'hard',
    blueprintArea: 'REG-I',
    skillLevel: 'Analysis',
    question: 'A tax return preparer faces a $530 penalty per return under §6694 for:',
    options: [
      'Any position on a return',
      'Filing late',
      'An unreasonable position without substantial authority (or reasonable basis with disclosure)',
      'Not signing'
    ],
    correctAnswer: 2,
    explanation: '§6694(a): $530 penalty for unreasonable position lacking substantial authority (reasonable basis if disclosed). §6694(b): greater of $5,000 or 75% of income for willful/reckless conduct. Reasonable cause defense available.',
    reference: 'IRC §6694',
  },
  {
    id: 'reg-comp-020',
    section: 'REG',
    topicId: 'reg-scorp',
    topic: 'S Corporation',
    subtopic: 'Termination Events',
    difficulty: 'hard',
    blueprintArea: 'REG-V',
    skillLevel: 'Analysis',
    question: 'An S corporation election terminates when:',
    options: [
      'Any stock sale occurs',
      'It ceases to qualify (excess shareholders, ineligible shareholder, second class of stock) or revokes',
      'It has a loss',
      'Shareholders change',
    ],
    correctAnswer: 1,
    explanation: 'S election termination: (1) revocation (>50% shareholders consent), (2) ceasing to qualify (too many shareholders, wrong shareholder type, second class), (3) excess passive income 3 consecutive years with C corp E&P.',
    reference: 'IRC §1362(d)',
  },
  {
    id: 'reg-comp-021',
    section: 'REG',
    topicId: 'reg-partnership',
    topic: 'Partnership Taxation',
    subtopic: 'Technical Termination',
    difficulty: 'hard',
    blueprintArea: 'REG-V',
    skillLevel: 'Analysis',
    question: 'A partnership technical termination under pre-2018 law occurred when:',
    options: [
      'All partners withdrew',
      '50% or more of total interests were sold within 12 months',
      'The partnership had losses',
      'New partners joined',
    ],
    correctAnswer: 1,
    explanation: 'Pre-TCJA: technical termination if ≥50% sold/exchanged within 12 months. TCJA repealed this for years after 2017. Now partnership continues unless true termination (cessation of business, <2 partners).',
    reference: 'IRC §708(b)(1)(B) - repealed',
  },
  {
    id: 'reg-comp-022',
    section: 'REG',
    topicId: 'reg-individual',
    topic: 'Individual Taxation',
    subtopic: 'Health Insurance Mandate',
    difficulty: 'medium',
    blueprintArea: 'REG-III',
    skillLevel: 'Application',
    question: 'The individual mandate penalty under the ACA for not having health insurance is currently:',
    options: [
      '$695 or 2.5% of income',
      'Reduced to $0 at the federal level beginning in 2019',
      '$2,500 per person',
      '$10,000 maximum',
    ],
    correctAnswer: 1,
    explanation: 'TCJA reduced federal individual mandate penalty to $0 starting 2019. Some states (CA, NJ, DC, MA, RI, VT) have state mandates with penalties. ACA coverage requirements still exist.',
    reference: 'IRC §5000A',
  },
  {
    id: 'reg-comp-023',
    section: 'REG',
    topicId: 'reg-business',
    topic: 'Business Entities',
    subtopic: 'Partnership vs Joint Venture',
    difficulty: 'medium',
    blueprintArea: 'REG-II',
    skillLevel: 'Application',
    question: 'A joint venture differs from a general partnership primarily by:',
    options: [
      'Having limited liability',
      'Requiring fewer members',
      'Being formed for a single transaction or limited purpose rather than ongoing business',
      'Being a corporation'
    ],
    correctAnswer: 2,
    explanation: 'Joint venture: partnership for single project/limited purpose. General partnership: ongoing business. Both have similar liability (joint and several for obligations). JV often taxed as partnership. Intent and scope differentiate them.',
    reference: 'Business Associations Law',
  },
  {
    id: 'reg-comp-024',
    section: 'REG',
    topicId: 'reg-property',
    topic: 'Property Transactions',
    subtopic: 'Charitable Remainder Trust',
    difficulty: 'hard',
    blueprintArea: 'REG-IV',
    skillLevel: 'Analysis',
    question: 'A charitable remainder annuity trust (CRAT):',
    options: [
      'Allows additional contributions',
      'Is fully taxable',
      'Has no minimum payout',
      'Pays a fixed dollar amount annually, must be 5-50% of initial value'
    ],
    correctAnswer: 3,
    explanation: 'CRAT: fixed annuity (5-50% of initial FMV), no additional contributions, term ≤20 years or lives, 10% remainder test. CRUT: fixed percentage of annual FMV, allows additions. Donor gets immediate deduction for remainder value.',
    reference: 'IRC §664',
  },
  {
    id: 'reg-comp-025',
    section: 'REG',
    topicId: 'reg-procedures',
    topic: 'Tax Procedures',
    subtopic: 'Offer in Compromise',
    difficulty: 'hard',
    blueprintArea: 'REG-I',
    skillLevel: 'Analysis',
    question: 'An offer in compromise to settle tax debt may be accepted by the IRS based on:',
    options: [
      'Any request',
      'First-time request only',
      'Taxpayer hardship only',
      'Doubt as to collectibility, doubt as to liability, or effective tax administration'
    ],
    correctAnswer: 3,
    explanation: 'OIC grounds: (1) doubt as to liability (dispute about amount owed), (2) doubt as to collectibility (can\'t pay full amount), (3) effective tax administration (hardship, equity). Requires reasonable collection potential analysis.',
    reference: 'IRC §7122',
  },
];
